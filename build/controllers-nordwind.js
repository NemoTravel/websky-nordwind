!function(){function e(r,n,t){function o(a,i){if(!n[a]){if(!r[a]){var c="function"==typeof require&&require;if(!i&&c)return c(a,!0);if(s)return s(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var l=n[a]={exports:{}};r[a][0].call(l.exports,function(e){var n=r[a][1][e];return o(n||e)},l,l.exports,e,r,n,t)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<t.length;a++)o(t[a]);return o}return e}()({1:[function(e,r,n){!function(e,t){"object"==typeof n&&"undefined"!=typeof r?t(n):"function"==typeof define&&define.amd?define(["exports"],t):t(e.lvovich={})}(this,function(e){"use strict";function r(e,r){var n=e.length;return e.substring(n-r.length,n)===r}function n(e){return i(e,C.firstname)}function t(e){return i(e,C.lastname)}function o(e){return i(e,C.middlename)}function s(e,r){return e===O?r:r===O?e:e===r?e:null}function a(e){return l(function(e){var r=O;if(e.middle&&(r=s(r,o(e.middle.trim()))),e.first&&(r=s(r,n(e.first.trim()))),e.last){var a=t(e.last.trim());null!==a&&(r=s(r,a))}return r}(e))}function i(e,n){if(!e||!n)return null;var t=e.toLowerCase();if(n.exceptions){var o=c(n.exceptions,function(e){return e.substr(!o||0>o?0:+o,(n="-").length)===n?r(t,e.substr(1)):e===t;var n,o});if(o)return o}return n.suffixes?c(n.suffixes,function(e){return r(t,e)}):null}function c(e,r){var n=Object.keys(e).filter(function(n){var t=e[n];return Array.isArray(t)&&t.some(r)});return 1!==n.length?(Object.keys(e).forEach(function(n){var t=e[n];Array.isArray(t)&&t.some(r)}),null):d(n[0])}function d(e){switch(e){case"male":case w:return w;case"female":case E:return E;case"androgynous":case O:return O;default:return null}}function l(e){switch(e){case"male":case w:return"male";case"female":case E:return"female";case"androgynous":case O:return"androgynous";default:return null}}function u(e){Array.isArray(e.exceptions)&&e.exceptions.forEach(function(e){e.gender=d(e.gender)}),Array.isArray(e.suffixes)&&e.suffixes.forEach(function(e){e.gender=d(e.gender)})}function f(e,r,n,t){for(var o=function(e){switch(e){case"nominative":case L:return L;case"genitive":case F:return F;case"dative":case B:return B;case"accusative":case k:return k;case"instrumental":case A:return A;case"prepositional":case T:return T;default:return null}}(r),s=d(n),a=e.split("-"),i=[],c=0;c<a.length;c++){var l=a[c],u=m(l,s,t,{firstWord:0===c&&1<a.length});i.push(u?h(u,l,o):l)}return i.join("-")}function m(e,n,t){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(!e)return null;var s=e.toLowerCase(),a=[];if(Object.keys(o).forEach(function(e){o[e]&&a.push(e)}),t.exceptions){var i=g(t.exceptions,n,function(e){return e===s},a);if(i)return i}return t.suffixes?g(t.suffixes,n,function(e){return r(s,e)},a):null}function g(e,r,n){for(var t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],o=0;o<e.length;o++){var s=e[o];if((!s.tags||s.tags.find(function(e){return-1!=t.indexOf(e)}))&&(s.gender===O||r===s.gender)&&s.test)for(var a=0;a<s.test.length;a++)if(n(s.test[a]))return s}return null}function p(e,r){return e&&r<=e.length?e[r]:"."}function h(e,r,n){var t;switch(n){case L:t=".";break;case F:t=p(e.mods,0);break;case B:t=p(e.mods,1);break;case k:t=p(e.mods,2);break;case A:t=p(e.mods,3);break;case T:t=p(e.mods,4);break;default:t="."}return v(r,t)}function v(e,r){for(var n=0;n<r.length;n++){var t=r[n];switch(t){case".":break;case"-":e=e.substr(0,e.length-1);break;default:e+=t}}return e}function b(e){return f(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"accusative",(2<arguments.length?arguments[2]:void 0)||n(e),R)}function y(e){return f(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"accusative",(2<arguments.length?arguments[2]:void 0)||t(e),M)}function S(e){return f(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"accusative",(2<arguments.length?arguments[2]:void 0)||o(e),_)}function P(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.forEach(function(r){var t,o,s;s=n[o=r],o in(t=e)?Object.defineProperty(t,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[o]=s})}return e}function x(e,r){for(var n=e.toLowerCase(),t=0;t<r.length;t++)if(r[t]===n)return!0;return!1}function I(e,r,n){if(1<n.length){if(x(e,N))return!0;for(var t=0;r>t;t++)if(x(n[t],W))return!0}return!1}var C={lastname:{exceptions:{androgynous:["бова","регин","дарвин","пэйлин","грин","цин","шенгелая"]},suffixes:{androgynous:["ан","ко","дзе","швили","ян","к","ер","ц","г","йн","дт","ен","ич","о","ун"],female:["ова","ая","ына","ина","ева","ска","ёва"],male:["кий","ов","ын","ев","ин","ёв","хий","ний","ый","ой"]}},firstname:{exceptions:{androgynous:["анри","алвард","валери","женя","закия","захария","иона","кири","ким","муса","райхон","саша","сева","ардак","арман","асыл","баглан","бакыт","бахыт","еркежан","жанат","жаркын","куаныш","манат","мереке","рауан","сымбат","тлеухан","умит","улжалгас","ырыс","айбала","акбала","ирза","арши","амиль"],male:["аба","абиба","савва","лёва","вова","-ага","агга","серега","алиада","муктада","абида","алда","маджуда","нурлыхуда","гиа","элиа","гарсиа","вавила","гавриила","генка","лука","дима","зосима","тима","фима","фома","кузьма","жора","миша","ермила","данила","гаврила","абдалла","аталла","абдилла","атилла","кайролла","абула","свитлана","бена","гена","агелина","джанна","кришна","степа","дра","назера","валера","эстера","двойра","калистра","заратустра","юра","иса","аиса","халиса","холиса","валенса","мусса","ата","паата","алета","никита","мота","шота","фаста","коста","маритта","малюта","васюта","вафа","мустафа","ганифа","лев","яков","константин","марсель","рамиль","эмиль","бактыгуль","даниэль","игорь","арминэ","изя","кузя","гия","мазия","кирикия","ркия","еркия","эркия","гулия","аксания","закария","зекерия","гарсия","шендля","филя","вилля","толя","коля","ваня","саня","загиря","боря","цайся","вася","ося","петя","витя","митя","костя","илья","абдала","абдель","фидель","фридель","абдилла","аталла","абла","лазарь","ава","вовка","семён"],female:["судаба","сураба","любава","джанлука","варвара","наташа","зайнаб","любов","сольвейг","шакед","аннаид","ингрид","синди","аллаберди","лали","натали","лили","нелли","элли","эмили","амили","адели","гулькай","алтынай","гюнай","гюльчитай","нурангиз","лиз","элиз","ботагоз","юлдуз","диляфруз","габи","сажи","фанни","мери","элдари","эльдари","хилари","хиллари","аннемари","розмари","товсари","ансари","одри","тери","ири","катя","катри","мэри","сатаней","ефтений","верунчик","гюзел","этел","рэйчел","джил","мерил","нинелл","бурул","ахлам","майрам","махаррам","мириам","дилярам","асем","мерьем","мирьем","эркаим","гулаим","айгерим","марьям","мирьям","эван","гульжиган","айдан","айжан","вивиан","гульжиан","лилиан","мариан","саиман","джоан","чулпан","лоран","моран","гульшан","аделин","жаклин","карин","каролин","каталин","катрин","керстин","кэтрин","мэрилин","рузалин","хелин","цеткин","ширин","элисон","дурсун","кристин","гульжиян","марьян","ренато","зейнеп","санабар","дильбар","гулизар","гульзар","пилар","дагмар","элинар","нилуфар","анхар","гаухар","естер","эстер","дженнифер","линор","элинор","элеонор","айнур","гульнур","шамсинур","элнур","ильсияр","нигяр","сигитас","агнес","анес","долорес","инес","анаис","таис","эллис","элис","кларис","амнерис","айрис","дорис","беатрис","грейс","грэйс","ботагос","маргос","джулианс","арус","диляфрус","саодат","зулхижат","хамат","патимат","хатимат","альжанат","маймунат","гульшат","рут","иргаш","айнаш","агнеш","зауреш","тэрбиш","ануш","азгануш","гаруш","николь","адась","адула","ахмадула","гейбадула","лив","ираги","пегги","абдурефи","адерми","лакшми","мими","наоми","изабель","абигейль","зебо","аширбу","судаба","айсулу","айши","жанет","гузаль","сапият","зауре","кармен","мадлен","алсу","айсу","амели","-бану","ассоль","николь"]},suffixes:{androgynous:["щи","ки"],male:["аба","б","ав","ев","ов","во","г","д","ж","з","би","ди","жи","ли","гани","ит","до","айт","юм","дула","ив","ги","улла","улль","фи","аль","ми","бель","була","йль","яй","бо","бу","кр","ыль","ыт","вва","вель","вни","аба","бала","улу","рза","ши","паша","го","но","ет","ят","ре","ри","ай","ей","ий","ой","ый","к","л","ам","ем","им","ом","ум","ым","ям","ан","бен","вен","ген","ден","ин","сейн","он","ун","ян","ио","ло","ро","то","шо","п","ар","др","ер","ир","ор","тр","ур","ыр","яр","ас","ес","ис","йс","кс","мс","ос","нс","рс","ус","юс","яс","ат","кт","нт","рт","ст","ут","ф","х","ш","ы","сь","тау","ен","коль","рау","обе","убе","иль","ево","ово","шу","ду","пуль","нко","су","вль","оль","ёв","ём","ец","сс","льс","хт","рн","дт"],female:["иба","люба","лава","ева","га","да","еа","иза","иа","ика","нка","ска","ела","ила","илла","эла","има","на","ра","са","та","фа","еса","сса","гуль","куль","нуэль","гюль","нэ","ая","ея","ия","йя","ля","мя","оя","ря","ся","вья","лья","мья","нья","рья","сья","тья","фья","зя","нша","ха","тка","нь","чь","мь","ерь","овка","евка","мба","зь","лка","сала","бла","арь","ума","пи","дель","не","жка","си","ибе","абе","елла","ие","фе","фя"]}},middlename:{suffixes:{female:["на","кызы","гызы"],male:["ич","оглы","улы","уулу"]}}},w=1,E=2,O=4,L=1,F=2,B=3,k=4,A=5,T=6,M={exceptions:[{gender:"androgynous",test:["бонч","абдул","белиц","гасан","дюссар","дюмон","книппер","корвин","ван","шолом","тер","призван","мелик","вар","фон"],mods:[".",".",".",".","."],tags:["first_word"]},{gender:"androgynous",test:["дюма","тома","дега","люка","ферма","гамарра","петипа","шандра","скаля","каруана"],mods:[".",".",".",".","."]},{gender:"androgynous",test:["гусь","ремень","камень","онук","богода","нечипас","долгопалец","маненок","рева","кива"],mods:[".",".",".",".","."]},{gender:"androgynous",test:["вий","сой","цой","хой"],mods:["-я","-ю","-я","-ем","-е"]}],suffixes:[{gender:"female",test:["б","в","г","д","ж","з","й","к","л","м","н","п","р","с","т","ф","х","ц","ч","ш","щ","ъ","ь"],mods:[".",".",".",".","."]},{gender:"androgynous",test:["орота"],mods:[".",".",".",".","."]},{gender:"female",test:["ска","цка"],mods:["-ой","-ой","-ую","-ой","-ой"]},{gender:"female",test:["цкая","ская","ная","ая"],mods:["--ой","--ой","--ую","--ой","--ой"]},{gender:"female",test:["яя"],mods:["--ей","--ей","--юю","--ей","--ей"]},{gender:"male",test:["иной","уй"],mods:["-я","-ю","-я","-ем","-е"]},{gender:"androgynous",test:["ца"],mods:["-ы","-е","-у","-ей","-е"]},{gender:"male",test:["рих"],mods:["а","у","а","ом","е"]},{gender:"androgynous",test:["ия"],mods:["-и","-и","-ю","-ей","-и"]},{gender:"androgynous",test:["иа","аа","оа","уа","ыа","еа","юа","эа"],mods:[".",".",".",".","."]},{gender:"androgynous",test:["о","е","э","и","ы","у","ю"],mods:[".",".",".",".","."]},{gender:"male",test:["их","ых"],mods:[".",".",".",".","."]},{gender:"female",test:["ова","ева","на","ёва"],mods:["-ой","-ой","-у","-ой","-ой"]},{gender:"androgynous",test:["га","ка","ха","ча","ща","жа","ша"],mods:["-и","-е","-у","-ой","-е"]},{gender:"androgynous",test:["а"],mods:["-ы","-е","-у","-ой","-е"]},{gender:"male",test:["ь"],mods:["-я","-ю","-я","-ем","-е"]},{gender:"androgynous",test:["я"],mods:["-и","-е","-ю","-ей","-е"]},{gender:"male",test:["обей"],mods:["--ья","--ью","--ья","--ьем","--ье"]},{gender:"male",test:["ей"],mods:["-я","-ю","-я","-ем","-е"]},{gender:"male",test:["ян","ан","йн"],mods:["а","у","а","ом","е"]},{gender:"male",test:["ынец","овец"],mods:["--ца","--цу","--ца","--цом","--це"]},{gender:"male",test:["нец","обец"],mods:["--ца","--цу","--ца","--цем","--це"]},{gender:"male",test:["ай"],mods:["-я","-ю","-я","-ем","-е"]},{gender:"male",test:["гой","кой"],mods:["-го","-му","-го","--им","-м"]},{gender:"male",test:["ой"],mods:["-го","-му","-го","--ым","-м"]},{gender:"male",test:["ах","ив","шток"],mods:["а","у","а","ом","е"]},{gender:"male",test:["ший","щий","жий","ний"],mods:["--его","--ему","--его","-м","--ем"]},{gender:"male",test:["ый","кий","хий"],mods:["--ого","--ому","--ого","-м","--ом"]},{gender:"male",test:["ий"],mods:["-я","-ю","-я","-ем","-и"]},{gender:"male",test:["ок"],mods:["--ка","--ку","--ка","--ком","--ке"]},{gender:"male",test:["иец","еец"],mods:["--йца","--йцу","--йца","--йцом","--йце"]},{gender:"male",test:["ец"],mods:["--ца","--цу","--ца","--цом","--це"]},{gender:"male",test:["ц","ч","ш","щ"],mods:["а","у","а","ем","е"]},{gender:"male",test:["ен","нн","он","ун","б","г","д","ж","з","к","л","м","п","р","с","т","ф","х"],mods:["а","у","а","ом","е"]},{gender:"male",test:["в","н"],mods:["а","у","а","ым","е"]}]},_={exceptions:[{gender:"androgynous",test:["борух"],mods:[".",".",".",".","."],tags:["first_word"]}],suffixes:[{gender:"male",test:["мич","ьич","кич"],mods:["а","у","а","ом","е"]},{gender:"male",test:["ич"],mods:["а","у","а","ем","е"]},{gender:"female",test:["на"],mods:["-ы","-е","-у","-ой","-е"]}]},R={exceptions:[{gender:"male",test:["лев"],mods:["--ьва","--ьву","--ьва","--ьвом","--ьве"]},{gender:"male",test:["пётр"],mods:["---етра","---етру","---етра","---етром","---етре"]},{gender:"male",test:["павел"],mods:["--ла","--лу","--ла","--лом","--ле"]},{gender:"male",test:["яша"],mods:["-и","-е","-у","-ей","-е"]},{gender:"male",test:["шота"],mods:[".",".",".",".","."]},{gender:"female",test:["агидель","жизель","нинель","рашель","рахиль"],mods:["-и","-и",".","ю","-и"]}],suffixes:[{gender:"androgynous",test:["лок"],mods:["--ка","--ку",".","--кос","--ке"]},{gender:"androgynous",test:["ки"],mods:["-ов","-ам",".","-ами","-ах"]},{gender:"androgynous",test:["щи"],mods:["-ев","-ам",".","-ами","-ах"]},{gender:"androgynous",test:["е","ё","и","о","у","ы","э","ю"],mods:[".",".",".",".","."]},{gender:"male",test:["уа","иа"],mods:[".",".",".",".","."]},{gender:"female",test:["б","в","г","д","ж","з","й","к","л","м","н","п","р","с","т","ф","х","ц","ч","ш","щ","ъ","иа","ль"],mods:[".",".",".",".","."]},{gender:"female",test:["ь"],mods:["-и","-и",".","ю","-и"]},{gender:"male",test:["ь"],mods:["-я","-ю","-я","-ем","-е"]},{gender:"androgynous",test:["га","ка","ха","ча","ща","жа"],mods:["-и","-е","-у","-ой","-е"]},{gender:"female",test:["ша"],mods:["-и","-е","-у","-ей","-е"]},{gender:"male",test:["ша","ча","жа"],mods:["-и","-е","-у","-ей","-е"]},{gender:"androgynous",test:["а"],mods:["-ы","-е","-у","-ой","-е"]},{gender:"female",test:["ия"],mods:["-и","-и","-ю","-ей","-и"]},{gender:"female",test:["ка","га","ха"],mods:["-и","-е","-у","-ой","-е"]},{gender:"female",test:["ца"],mods:["-ы","-е","-у","-ей","-е"]},{gender:"female",test:["а"],mods:["-ы","-е","-у","-ой","-е"]},{gender:"female",test:["я"],mods:["-и","-е","-ю","-ей","-е"]},{gender:"male",test:["ия"],mods:["-и","-и","-ю","-ей","-и"]},{gender:"male",test:["я"],mods:["-и","-е","-ю","-ей","-е"]},{gender:"male",test:["ий"],mods:["-я","-ю","-я","-ем","-и"]},{gender:"male",test:["ый","кий","хий"],mods:["--ого","--ому","--ого","-м","--ом"]},{gender:"male",test:["ей","й"],mods:["-я","-ю","-я","-ем","-е"]},{gender:"male",test:["ш","ж"],mods:["а","у","а","ем","е"]},{gender:"male",test:["ёл"],mods:["--ла","--лу","--ла","--лом","--ле"]},{gender:"male",test:["ёк"],mods:["--ька","--ьку","--ька","--ьком","--ьке"]},{gender:"male",test:["б","в","г","д","ж","з","к","л","м","н","п","р","с","т","ф","х","ц","ч"],mods:["а","у","а","ом","е"]},{gender:"androgynous",test:["ния","рия","вия"],mods:["-и","-и","-ю","-ем","-ем"]}]};u(M),u(_),u(R);var $=["форт-шевченко"],N=["-"," ","в","на","баден","бледно","буэнос","вице","гаврилов","йошкар","коста","лос","норд","нью","орехово","принс","сан","санкт","санта","северо","ситтард","темно","улан","усолье","усть","форт","царь","экс","юго","юрьев"],W=["село","поселок","аул","город","деревня","урочище"],U={exceptions:[{test:["сочи","тбилиси"],mods:["","","","",""]},{test:["село","озеро","место"],mods:["-а","-у","","м","-е"]},{test:["область"],mods:["-и","-и","","ю","-и"]},{test:["деревня"],mods:["-и","-е","-ю","-ей","-е"]},{test:["море"],mods:["-я","-ю","","м",""]},{test:["холм"],mods:["а","у","","ом","е"]}],suffixes:[{test:["чёк","чек"],mods:["--ка","--ку","","--ком","--ке"]},{test:["чик"],mods:["а","у","","ом","е"]},{test:["жний","хний","шний","щий"],mods:["--его","--ему","","-м","--ем"]},{test:["ще"],mods:["-а","-у","","м",""]},{test:["чье"],mods:["-я","-ю","","м",""]},{test:["ель"],mods:["-я","-ю","","-ем","-е"]},{test:["чь"],mods:["-и","-и","","ю","-и"]},{test:["чи"],mods:["-ей","-ам","","-ами","-ах"]},{test:["ые","ие"],mods:["-х","-м","","-ми","-х"]},{test:["ый","ий","ое"],mods:["--ого","--ому","","-м","--ом"]},{test:["ая"],mods:["--ой","--ой","--ую","--ой","--ой"]},{test:["гиев"],mods:["а","у","","ым","ом"]},{test:["ны"],mods:["-ов","-ам","","-ами","-ах"]},{test:["ша"],mods:["-и","-е","-у","-ей","-е"]},{test:["ры","цы","ды","ги"],mods:["-","-ам","","-ами","-ах"]},{test:["амень"],mods:["---ня","---ню","","---нем","---не"]},{test:["ьн","нц","мм"],mods:["а","у","","ом","е"]}]},j={exceptions:U.exceptions.map(function(e){return P({gender:O},e)}),suffixes:U.suffixes.map(function(e){return P({gender:O},e)})};u(j),e.incline=function(e,r){var n={};return n.gender||(n.gender=a(e)),e.first&&(n.first=b(e.first.trim(),r,n.gender)),e.last&&(n.last=y(e.last.trim(),r,n.gender)),e.middle&&(n.last=S(e.middle.trim(),r,n.gender)),n},e.inclineFirstname=b,e.inclineLastname=y,e.inclineMiddlename=S,e.getGender=a,e.getFirstnameGender=function(e){return l(n(e))},e.getLastnameGender=function(e){return l(t(e))},e.getMiddlenameGender=function(e){return l(o(e))},e.cityIn=function(e,r){return x(e,$)?e:e.split(/(\s|-)/g).map(function(e,n,t){if(I(e,n,t))return e;var o=m(e,O,j);return o?h(o,e,T):b(e,T,r)||e}).join("")},e.cityFrom=function(e,r){return x(e,$)?e:e.split(/(\s|-)/g).map(function(e,n,t){if(I(e,n,t))return e;var o=m(e,O,j);return o?h(o,e,F):b(e,F,r)||e}).join("")},e.cityTo=function(e){return e?e.split(/(\s|-)/g).map(function(e,n,t){if(I(e,n,t))return e;var o=e.toLowerCase();return r(o,"а")?v(e,"-у"):r(o,"ая")?v(e,"--ую"):r(o,"ия")?v(e,"--ию"):r(o,"я")?v(e,"-ю"):e}).join(""):e},Object.defineProperty(e,"__esModule",{value:!0})})},{}],2:[function(e,r,n){"use strict";function t(e,r,n){function t(){a&&(a(!0),o())}function o(){jQuery.fancybox.close()}var s=this,a=!1;s.close=o,s.submit=t,s.popupId="#nw-"+s.esCode+"-popup",n.setOpenListener("nw-"+s.esCode+"-popup",function(e,r){var n=angular.element(s.popupId),t=n.parents(".fancybox-wrap");t.hasClass("extra-service__popup")||t.addClass("extra-service__popup")})}angular.module("app").component("nwEsPopup",{templateUrl:"components/nw-es-popup/nw-es-popup.html",controller:"nwMealPopupController",bindToController:!0,controllerAs:"vm",bindings:{locked:"=",esCode:"<",es:"="},transclude:{"extra-service":"wrap"}}),angular.module("app").controller("nwMealPopupController",["$scope","backend","fancyboxTools",t])},{}],3:[function(e,r,n){"use strict";function t(e){var r=this;r.isCommonService=e.isCommonServiceCode}var o=angular.module("app");o.component("nwExtraServicesList",{templateUrl:"components/nw-extra-services-list/nw-extra-services-list.html",controller:"extraServicesListController",controllerAs:"vm",bindings:{es:"=es",list:"=list",availableBundlesByPassengerSegments:"<",locked:"=locked"}}),o.controller("extraServicesListController",["utils",t])},{}],4:[function(e,r,n){"use strict";function t(e,r,n,t){function o(){h.locked||n.checkServiceRemovalProhibited("meal")||(h.service.active=!h.service.active,h.service.active?a():n.removeExtraService({code:"meal"}),h.closePopup())}function s(e,r){h.selectedFlight=e,h.selectedPassenger=r,i()}function a(){h.selectedFlight=g(),h.selectedPassenger=p(h.selectedFlight),i()}function i(){h.mealMenu=h.service.itemsByPassengerSegments[h.selectedPassenger][h.selectedFlight],h.mealMenuSubgroup=!1}function c(e,r,t){h.locked||n.modifyExtraService({code:"meal",passenger_id:h.orderInfo.passengers[h.selectedPassenger].id,segment_id:h.orderInfo.plainFlights[h.selectedFlight].id,subgroup:h.service.subgroups[e],amount:(r.alreadySelectedCount||0)+t,rfisc:r.rfisc})}function d(e,r){h.locked||n.checkServiceRemovalProhibited("meal",e,r)||n.removeExtraService({code:"meal",passenger_id:h.orderInfo.passengers[e].id,segment_id:h.orderInfo.plainFlights[r].id})}function l(e,r){var n,t=0,o=0;return h.orderInfo.groupedEditableExtraServices&&h.orderInfo.groupedEditableExtraServices.meal&&h.orderInfo.groupedEditableExtraServices.meal[e]&&h.orderInfo.groupedEditableExtraServices.meal[e][r]&&h.orderInfo.groupedEditableExtraServices.meal[e][r].length&&h.orderInfo.groupedEditableExtraServices.meal[e][r].forEach(function(e){e.amount&&(t+=e.amount),e.totalPrice&&(o=Big(o).plus(e.totalPrice).toFixed(2),n=e.currency)}),t?{count:t,cost:o,currency:n}:!1}function u(){v.scrollTo(0)}function f(){v.scrollTo(v[0].scrollWidth)}function m(){var r=v[0].scrollLeft,n=v[0].scrollWidth,t=v[0].clientWidth,o=n-t-r;h.canScrollRight=0!==o,h.canScrollLeft=0!==r,e.$apply()}function g(){var e;for(e=0;e<h.orderInfo.plainFlights.length;e++)if(h.service.availableBySegments[e])return e;return-1}function p(e){var r;if(h.service.availableByPassengerSegments)for(r=0;r<h.orderInfo.passengers.length;r++)if(h.service.availableByPassengerSegments[r][e])return r;return-1}var h=this,v=r.find("div.passengersTableContainer");h.switchService=o,h.selectFlightPassenger=s,h.selectFirstAvailablePassengerFlight=a,h.mealCountChangeHandler=c,h.removePassengerFlightMeal=d,h.getSelectedPassengerFlightMeal=l,h.scrollToStart=u,h.scrollToEnd=f,h.hasAlias=n.hasAlias,h.getAvailablePassengersCount=t.getAvailablePassengersCount,h.checkServiceRemovalProhibited=n.checkServiceRemovalProhibited,h.closePopup=h.closePopup(),h.canScrollRight=!0,h.canScrollLeft=!1,h.selectedFlight=0,h.selectedPassenger=0,n.getParam("site.externalStorageBaseUrl")?h.mealImagesPath=n.getParam("site.externalStorageBaseUrl")+"/img/content/meal":h.mealImagesPath="./themes/websky/assets/static/img/content/meal",n.addOrderInfoListener(function(e){h.orderInfo=e},!1,!0),e.$watch("vm.service",function(){i()}),v.on("scroll",m),h.service.active&&i()}var o=angular.module("app");o.component("nwMeal",{templateUrl:"components/nw-meal/nw-meal.html",controller:["$scope","$element","backend","utils",t],controllerAs:"vm",bindings:{service:"=service",locked:"=locked",closePopup:"&"}})},{}],5:[function(e,r,n){"use strict";function t(e,r,n,t,o,s){function a(){P.locked||o.checkServiceRemovalProhibited("seat")||(P.service.active=!P.service.active,P.service.active?l():(P.modifyError=!1,o.removeExtraService({code:"seat"}).then(i,function(e){e.error&&(P.modifyError=e.error)}))),P.closePopup()}function i(){P.seatMap=!1,P.selectedFlight=-1,P.selectedPassenger=-1}function c(e){I=e?"0px":jQuery("#seatMapCont .mCSB_container").css("top")}function d(e,r){c(P.selectedFlight!==e),P.selectedFlight=e,P.selectedPassenger=r,u()}function l(){P.selectedFlight=g(),P.selectedPassenger=p(P.selectedFlight),u()}function u(){-1!==P.selectedPassenger&&-1!==P.selectedFlight&&(P.loadingSeatMap=!0,P.seatMapError=!1,o.seatMap(P.orderInfo.passengers[P.selectedPassenger].id,P.orderInfo.plainFlights[P.selectedFlight].id).then(function(e){P.seatMap=e,P.loadingSeatMap=!1,n(function(){jQuery("#seatMapCont .mCSB_container").css("top",I)})},function(e){P.seatMapError=e.error,P.loadingSeatMap=!1}))}function f(e,r,n){P.locked||e.available&&r&&(c(),P.modifyError=!1,o.modifyExtraService({code:"seat",passenger_id:P.orderInfo.passengers[P.selectedPassenger].id,segment_id:P.orderInfo.plainFlights[P.selectedFlight].id,value:n+e.number,subgroup:P.service.commonSubgroup,rfisc:e.rfisc||""}).then(u,function(e){e.error&&(P.modifyError=e.error)}))}function m(){P.sunInfoByFlights=[],P.orderInfo.plainFlights.forEach(function(e,r){o.sunInfo(e.origincity,e.departuredate,e.departuretime,e.destinationcity,e.arrivaldate,e.arrivaltime).then(function(e){P.sunInfoByFlights[r]=e})})}function g(){var e;for(e=0;e<P.orderInfo.plainFlights.length;e++)if(P.service.availableBySegments[e])return e;return-1}function p(e){var r;if(P.service.availableByPassengerSegments)for(r=0;r<P.orderInfo.passengers.length;r++)if(P.service.availableByPassengerSegments[r][e])return r;return-1}function h(){x.scrollTo(0)}function v(){x.scrollTo(x[0].scrollWidth)}function b(){var r=x[0].scrollLeft,n=x[0].scrollWidth,t=x[0].clientWidth,o=n-t-r;P.canScrollRight=0!==o,P.canScrollLeft=0!==r,e.$apply()}function y(e){var r=s.getAvailablePassengersCount(e);return r+P.orderInfo.passengers.filter(function(e){return!e.hasSeats}).length}function S(e,r){P.locked||o.checkServiceRemovalProhibited("seat",e,r)||(P.modifyError=!1,o.removeExtraService({code:"seat",passenger_id:P.orderInfo.passengers[e].id,segment_id:P.orderInfo.plainFlights[r].id}).then(function(){P.selectedFlight===r&&u()},function(e){e.error&&(P.modifyError=e.error)}))}var P=this,x=r.find("div.passengersTableContainer"),I="0px";P.switchService=a,P.selectFlightPassenger=d,P.selectFirstAvailablePassengerFlight=l,P.setPassengerFlightSeat=f,P.closePopup=P.closePopup(),P.hasAlias=o.hasAlias,P.scrollToStart=h,P.scrollToEnd=v,P.getAvailablePassengersCount=s.getAvailablePassengersCount,P.getAvailablePassengersCountWrap=y,P.removePassengerFlightSeat=S,P.checkServiceRemovalProhibited=o.checkServiceRemovalProhibited,P.canScrollRight=!0,P.canScrollLeft=!1,P.isBookingScreen=t.isBookingScreen(),o.addOrderInfoListener(function(e){P.orderInfo=e},!1,!0),m(),x.on("scroll",b),P.service.active&&l()}angular.module("app").component("nwSeat",{templateUrl:"components/nw-seat/nw-seat.html",controller:["$scope","$element","$timeout","redirect","backend","utils",t],controllerAs:"vm",bindings:{service:"=service",locked:"=locked",closePopup:"&"}})},{}],6:[function(e,r,n){"use strict";function t(e,r,n,t,o,s,a,i){function c(e){f.loading=!0,t.retryRegister(e).then(function(e){e.pnr&&e.lastName?r.location="./order?pnr="+e.pnr+"&lastName="+e.lastName:(e.eraseAeroexpressBecauseOfCurrency||e.eraseInsuranceBecauseOfCurrency)&&a.openHandler("popupChangeCurrencyError",!1,{eraseAeroexpressBecauseOfCurrency:e.eraseAeroexpressBecauseOfCurrency,eraseInsuranceBecauseOfCurrency:e.eraseInsuranceBecauseOfCurrency,mode:"retryRegister",submitCallback:c}),f.loading=!1},function(e){f.loading=!1,f.errorMessage=e.error})}function d(){f.orderInfo.header&&f.orderInfo.header.regnum&&f.orderInfo.header.lastName&&(f.loading=!0,t.bindOrder(f.orderInfo.header.regnum,f.orderInfo.header.lastName).then(function(){f.loading=!1,f.orderInfo.bindAlowed=!1,f.showBindOrderSuccessMessage=!0,n(function(){f.showBindOrderSuccessMessage=!1},1e4)},function(){f.loading=!1,f.showBindOrderFailMessage=!0,n(function(){f.showBindOrderFailMessage=!1},1e4)}))}function l(){t.clearSession().then(function(){s.goToSearchOrder()})}function u(){t.clearLastSearchParams().then(function(){r.location=t.getAlias("web.site.firstStepUrl")})}var f=this;f.loading=!0,f.errorMessage=!1,f.choosePayMethodFailMsg=!1,f.tabId=i(),f.openExchange=s.goToExchange,f.openRefund=s.goToRefund,f.openAddServices=s.goToAddServices,f.suffixCount=o.suffixCount,f.retryPayment=c,f.bindOrder=d,f.clearSession=l,f.newBooking=u,e.$on("popupChoosePayMethodChoosePayMethodFailMsg",function(e,r){f.choosePayMethodFailMsg=r}),e.$on("popupChoosePayMethodPending",function(e,r){f.popupChoosePayMethodPending=r}),f.$onInit=function(){var e=o.getParamFromLocation("result");"success"===e?!f.orderInfo.header||"being_paid"!==f.orderInfo.header.status&&"being_paid_for_exchange"!==f.orderInfo.header.status?f.loading=!1:t.waitPayment(f.orderInfo.header.regnum,f.orderInfo.header.lastName).then(function(){r.location="./order?pnr="+f.orderInfo.header.regnum+"&lastName="+f.orderInfo.header.lastName+"&result=success"},function(){f.loading=!1}):(!f.orderInfo.hasFailedServices&&f.orderInfo.paymentRedirectTo&&(f.showPaymentFrame=!0),f.loading=!1),!f.orderInfo.hasFailedServices||e||!f.orderInfo.header||"being_paid"!==f.orderInfo.header.status&&"booked"!==f.orderInfo.header.status||n(function(){a.openHandler("popupRemovedServicesWarningByOrder",!1,{submitCallback:function(){f.orderInfo.paymentRedirectTo&&(f.showPaymentFrame=!0),f.ignoreFailedServices=!0},disableOutsideCloseClick:!0})}),t.getParam("ffp.enable")&&(f.orderInfo.hasBonusCard||f.orderInfo.ffpSumm)&&t.ffpBonus().then(function(e){f.ffpBonus=e.total||0})}}var o=angular.module("app");o.component("orderWithEs",{templateUrl:"components/order-with-es/order-with-es.html",controller:"orderWithEsController",controllerAs:"vm",transclude:{"extra-services":"nwExtraServicesList",payment:"div"},bindings:{orderInfo:"="}}),o.controller("orderWithEsController",["$scope","$window","$timeout","backend","utils","redirect","fancyboxTools","uniqueTabIdGenerator",t])},{}],7:[function(e,r,n){"use strict";function t(e,r,n){function t(e){e&&_.forEach(e,function(e){_.forEach(e.flights,function(e){var n=e.originport?e.originport:e.origincity,t=e.destinationport?e.destinationport:e.destinationcity,o=!1;_.forEach(u.redefineRules,function(s){_.forEach(s.routes,function(a){if(n===a.from&&t===a.to||a.from===t&&a.to===n){console.log("we redefine some rules here, check the replacWith directive"),o=!0;var i={brand:e.brand,brandAvailableProps:e.brandAvailableProps,brandUnavailableProps:e.brandUnavailableProps,brandPaidProps:e.brandPaidProps},c=r.getBrandConfig();c.filter(function(e){return e.code===i.brand})[0];_.forEach(s.brands,function(r){if(i.brand===r.brand){_.forEach(r.props,function(r){switch(r.available){case"yes":e.brandAvailableProps.push(r.name);break;case"no":e.brandUnavailableProps.push(r.name);break;case"paid":e.brandPaidProps.push(r.name)}})}})}})})})})}function o(e){u.needToRestoreBrandsInfo=!1,e&&"boolean"==typeof u.originalBrands&&(u.originalBrands=angular.copy(r.getBrandConfig()));var n=!1;s(e)&&(n=!0),n?a(e.brandsList):"boolean"!=typeof u.originalBrands&&e.brandsList&&(e.brandsList=e.brandsList.map(function(e,r){return u.originalBrands.filter(function(r){return r.code===e.code})[0]}),u.needToRestoreBrandsInfo=!0)}function s(e){var r=!1;return _.forEach(u.redefineRules,function(n){_.forEach(n.routes,function(n){_.forEach(e.segmentRows,function(e){_.forEach(e,function(e){var t=e.flightsInfo.originport?e.flightsInfo.originport:e.flightsInfo.origincity,o=e.flightsInfo.destinationport?e.flightsInfo.destinationport:e.flightsInfo.destinationcity;(t===n.from&&o===n.to||t===n.to&&o===n.from)&&(r=!0)})})})}),r}function a(e){_.forEach(u.redefineRules,function(r){_.forEach(r.brands,function(r){_.forEach(e.slice(),function(e){e.code===r.brand&&i(e,r)})})})}function i(e,r){console.log("we redefine some rules here, head to web.brandConfig.redefine"),console.log(e,r),_.forEach(e.props,function(e){r.props[e.code]&&_.extend(e,r.props[e.code])})}function c(){u.selectedVariantsInfo&&u.needToRestoreBrandsInfo&&(console.log("restoreBrandsInfo"),_.forEach(u.selectedVariantsInfo,d))}function d(e){var r=l(e.brand),n=[],t=[],o=[];_.forEach(r.props,function(e){switch(e.available){case"yes":e.shortDesc?n.push(e.shortDesc):n.push(e.name);break;case"paid":t.push(e.name);break;case"no":o.push(e.name);break;default:return}}),e.brandAvailableProps=n.slice(),e.brandPaidProps=t.slice(),e.brandUnavailableProps=o.slice()}function l(e){return u.originalBrands.filter(function(r){return r.code===e})[0]}var u=e.$parent.vm;u.originalBrands=!1,u.needToRestoreBrandsInfo=!1,r.ready.then(function(){try{var s=JSON.parse(r.getAlias("web.brandConfig.redefine"))}catch(a){console.error("redefine rules parse error",a)}u.redefineRules=s,e.$watch(angular.bind(this,function(){return u.selectedVariantsInfo}),c),e.$watch(angular.bind(this,function(){return u.searchResult}),function(e){"/search-order"!==n.path()&&o(e)}),e.$watch(angular.bind(this,function(){return u.orderInfo?u.orderInfo.flights:void 0}),function(e){t(e)})})}var o=angular.module("app");o.directive("replaceWith",function(){return{scope:!1,controllerAs:"replaceWith",bindToController:!0,scopeAs:"vm",controller:"isRouteController"}}),o.controller("isRouteController",["$scope","backend","$location",t])},{}],8:[function(e,r,n){"use strict";var t=e("lvovich/dist/lvovich.min");angular.module("app").filter("toCity",function(){return function(e){return"в "+t.cityTo(e)};
})},{"lvovich/dist/lvovich.min":1}],9:[function(e,r,n){"use strict";e("./screens/add-services/AddServicesScreenController"),e("./screens/search-order/search-order"),e("./directives/replaceWith"),e("./components/nw-es-popup/nw-es-popup"),e("./components/order-with-es/order-with-es"),e("./components/nw-extra-services-list/nw-extra-services-list"),e("./components/nw-meal/nw-meal"),e("./components/nw-seat/nw-seat"),e("./filters/toCity"),angular.module("app").config(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),angular.module("app").run(["$rootScope","redirect","backend",function(e,r,n){e.$on("$locationChangeStart",function(e){var n=location.href.split("#")[1];n=n.split("/");var t=n[1],o=n[2],s=n[3];"add-services"===t&&o&&s&&(s=decodeURIComponent(s),r.goToSearchOrder(o,s))})}])},{"./components/nw-es-popup/nw-es-popup":2,"./components/nw-extra-services-list/nw-extra-services-list":3,"./components/nw-meal/nw-meal":4,"./components/nw-seat/nw-seat":5,"./components/order-with-es/order-with-es":6,"./directives/replaceWith":7,"./filters/toCity":8,"./screens/add-services/AddServicesScreenController":10,"./screens/search-order/search-order":11}],10:[function(e,r,n){"use strict";angular.module("app").controller("AddServicesScreenController",["$scope","$routeParams","$window","redirect","backend","utils","fancyboxTools",function(e,r,n,t,o,s,a){function i(e){!m.agree||m.modifyServicesLoading||m.orderServicesLoading||(m.selectedPaymentForm&&m.selectedPaymentType?c(e):m.showNeedSelectPaymentFormMesage=!0)}function c(e,r,n){m.confirmLoading=!0,m.confirmError&&delete m.confirmError,o.startPaymentForExtraServices(m.selectedPaymentForm,m.selectedPaymentType,e,r,n,m.card).then(function(s){s.pnr&&s.lastName?t.goToConfirmOrder():s.eraseAeroexpressBecauseOfCurrency||s.eraseInsuranceBecauseOfCurrency?a.openHandler("popupChangeCurrencyError",!1,{eraseAeroexpressBecauseOfCurrency:s.eraseAeroexpressBecauseOfCurrency,eraseInsuranceBecauseOfCurrency:s.eraseInsuranceBecauseOfCurrency,mode:"addServices",submitCallback:i}):s.removedSvcs&&s.removedSvcs.length&&a.openHandler("popupRemovedServicesWarning",!1,{submitCallback:function(){c(e,r,n)},closeCallback:function(){o.updateOrderServices(!0)},removedSvcs:s.removedSvcs,svcsToIssue:s.svcsToIssue,noExtraServicesLeft:s.noExtraServicesLeft,disableOutsideCloseClick:!0}),m.confirmLoading=!1},function(e){"web.noBookedConfirmedExtraServices"===e.error?m.fatalError=e.error:m.confirmError=e.error,m.confirmLoading=!1})}function d(){m.showNeedSelectPaymentFormMesage=!1}function l(){return n.location.reload(),!1}function u(){o.clearSession().then(function(){t.goToSearchOrder()})}function f(){m.submitButtonHover=!m.submitButtonHover}var m=this;m.loading=!0,m.searchOrderLoading=!0,m.orderServicesLoading=!0,m.openOrder=t.goToSearchOrder,m.submitPayment=i,m.paymentFormChangeHandler=d,m.reloadPage=l,m.clearSession=u,m.swithcSubmitButtonHoverState=f,e.$on("plasticCardForPaymentChangeEvent",function(e,r){m.card=r}),o.ready.then(function(){angular.element("title").text(o.getAliasWithPrefix("web.pageTitle.","addServices")),m.loading=!1,o.clearOrderInfoListeners(),o.clearUpdateOrderServicesListeners(),o.addOrderInfoListener(function(e){m.orderInfo=e}),o.addUpdateOrderServicesListener(function(e){m.orderInfo=e[1],m.priceVariant=e[2],m.isFreePricevariant=s.isFreePricevariant(e[2]),m.isFreePricevariant&&(m.showNeedSelectPaymentFormMesage=!1),m.es=s.reformatAvailableExtraServices(e[0],m.orderInfo,m.es),m.esList=s.getAvailableExtraServicesList(e[0],m.es),m.searchOrderLoading=!1,m.orderServicesLoading=!1,o.getParam("ffp.enable")&&(m.orderInfo.hasBonusCard||m.orderInfo.ffpSumm)&&o.ffpBonus().then(function(e){m.ffpBonus=e.total||0})},function(e){m.searchOrderLoading=!1,m.orderServicesLoading=!1,m.errorMessage=e.error}),o.updateOrderServices(!0).then(function(){m.loading=!0,o.switchDefaultSelectedServices(m.esList,m.es,m.orderInfo).then(function(){m.loading=!1},function(e){m.errorMessage=e.error,m.loading=!1})}),o.addExtraServiceListener(function(e){m.modifyServicesLoading=!e,m.orderServicesLoading=!0}),o.addExtraServiceErrorListener(function(e,r){r&&"seat"===r.code||(m.modifyServicesError=e.error),m.modifyServicesLoading=!1,m.orderServicesLoading=!0})})}])},{}],11:[function(e,r,n){"use strict";function t(e,r,n,t,o,s,a){function i(e){!v.agree||v.modifyServicesLoading||v.orderServicesLoading||(v.selectedPaymentForm&&v.selectedPaymentType?c(e):v.showNeedSelectPaymentFormMesage=!0)}function c(e,r,o){v.confirmLoading=!0,v.confirmError&&delete v.confirmError,n.startPaymentForExtraServices(v.selectedPaymentForm,v.selectedPaymentType,e,r,o,v.card).then(function(s){s.pnr&&s.lastName?t.goToConfirmOrder():s.eraseAeroexpressBecauseOfCurrency||s.eraseInsuranceBecauseOfCurrency?a.openHandler("popupChangeCurrencyError",!1,{eraseAeroexpressBecauseOfCurrency:s.eraseAeroexpressBecauseOfCurrency,eraseInsuranceBecauseOfCurrency:s.eraseInsuranceBecauseOfCurrency,mode:"addServices",submitCallback:i}):s.removedSvcs&&s.removedSvcs.length&&a.openHandler("popupRemovedServicesWarning",!1,{submitCallback:function(){c(e,r,o)},closeCallback:function(){n.updateOrderServices(!0)},removedSvcs:s.removedSvcs,svcsToIssue:s.svcsToIssue,noExtraServicesLeft:s.noExtraServicesLeft,disableOutsideCloseClick:!0}),v.confirmLoading=!1},function(e){"web.noBookedConfirmedExtraServices"===e.error?v.fatalError=e.error:v.confirmError=e.error,v.confirmLoading=!1})}function d(){n.clearSession(),n.clearOrderInfo(),v.orderInfo=!1,v.showSearchForm=!0,v.partiallyAddedPassengers=[]}function l(){v.submitTouched=!0,n.getParam("site.useSearchOrderAgreeCheckbox")&&!v.searchOrderAgree||!v.searchOrderForm.$valid||(v.searchLoading=!0,v.errorMessage=!1,n.searchOrderByParams(v.searchParams,!!v.partiallyAddedPassengers.length).then(function(e){v.searchParams.flight&&v.searchParams.date?v.searchParams={flight:v.searchParams.flight,date:v.searchParams.date}:e.needToSpecifyDocument||(v.searchParams={}),v.needToSpecifyDocument=e.needToSpecifyDocument,v.showSearchForm=!1,v.submitTouched=!1,u(),e.orderCompletelyInitialized?(v.partiallyAddedPassengers=[],f()):(e.partiallyAddedPassengers&&(v.partiallyAddedPassengers=e.partiallyAddedPassengers),v.needToSpecifyDocument&&(v.showSearchForm=!0)),v.searchLoading=!1},m))}function u(){n.addUpdateOrderServicesListener(function(e){v.orderInfo=e[1],v.priceVariant=e[2],v.isFreePricevariant=s.isFreePricevariant(e[2]),v.isFreePricevariant&&(v.showNeedSelectPaymentFormMesage=!1),v.es=s.reformatAvailableExtraServices(e[0],v.orderInfo,v.es),v.esList=s.getAvailableExtraServicesList(e[0],v.es),v.searchOrderLoading=!1,v.orderServicesLoading=!1,n.getParam("ffp.enable")&&(v.orderInfo.hasBonusCard||v.orderInfo.ffpSumm)&&n.ffpBonus().then(function(e){v.ffpBonus=e.total||0})},function(e){v.searchOrderLoading=!1,v.orderServicesLoading=!1,v.errorMessage=e.error}),n.updateOrderServices(!0).then(function(){v.loading=!0,n.switchDefaultSelectedServices(v.esList,v.es,v.orderInfo).then(function(){v.loading=!1},function(e){v.errorMessage=e.error,v.loading=!1})}),n.addExtraServiceListener(function(e){v.modifyServicesLoading=!e,v.orderServicesLoading=!0}),n.addExtraServiceErrorListener(function(e,r){r&&"seat"===r.code||(v.modifyServicesError=e.error),v.modifyServicesLoading=!1,v.orderServicesLoading=!0})}function f(e){n.updateOrderInfo().then(function(r){r.passengers&&(v.orderInfo=r,v.showSearchForm=!1,"function"==typeof e&&e()),v.loading=!1},m)}function m(e){v.loading=!1,v.searchLoading=!1,"web.messages.emptyOrder"!==e.error&&(v.errorMessage=e.error)}function g(){n.finishSeparatePassengersSearch().then(f,m)}function p(){v.showSearchForm=!0}function h(){v.submitButtonHover=!v.submitButtonHover}var v=this;v.loading=!0,v.searchOrderLoading=!0,v.orderServicesLoading=!0,v.showSearchForm=!0,v.searchParams={},v.partiallyAddedPassengers=[],v.submitPayment=i,v.submitSearch=l,v.confirmHandler=g,v.clear=d,v.addPassenger=p,v.swithcSubmitButtonHoverState=h,n.ready.then(function(){angular.element("title").text(n.getAliasWithPrefix("web.pageTitle.","searchOrder")),v.passengerLastNameRegexp=n.applicationConstants.passengerLastNameRegexp,v.pnrOrTicketRegexp=n.applicationConstants.pnrOrTicketRegexp,v.ticketRegexp=n.applicationConstants.ticketRegexp,n.clearOrderInfoListeners(),n.clearUpdateOrderServicesListeners(),r.pnrOrTicketNumber&&r.lastName&&"LAST_NAME_PNR_TICKET"===n.getParam("site.searchOrdersBy")?(v.searchParams.pnrOrTicketNumber=r.pnrOrTicketNumber,v.searchParams.lastName=r.lastName,v.loading=!1,o(l)):(f(),u()),n.addOrderInfoListener(function(e){v.orderInfo=e})})}angular.module("app").controller("SearchOrderScreenController",["$scope","$routeParams","backend","redirect","$timeout","utils","fancyboxTools",t])},{}]},{},[9]);
//# sourceMappingURL=controllers-nordwind.js.map
