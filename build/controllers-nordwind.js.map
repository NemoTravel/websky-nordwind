{"version":3,"sources":["controllers-nordwind.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","define","amd","lvovich","this","substring","firstname","lastname","d","middlename","m","middle","trim","first","last","s","toLowerCase","exceptions","l","substr","suffixes","Object","keys","filter","Array","isArray","some","forEach","g","w","gender","j","y","v","h","x","b","split","O","firstWord","push","L","join","arguments","k","tags","find","indexOf","test","A","mods","E","_","G","F","P","M","C","S","getOwnPropertySymbols","concat","getOwnPropertyDescriptor","enumerable","defineProperty","value","configurable","writable","z","B","I","T","androgynous","female","male","D","W","q","map","incline","inclineFirstname","inclineLastname","inclineMiddlename","getGender","getFirstnameGender","getLastnameGender","getMiddlenameGender","cityIn","cityFrom","cityTo","2","nwMealPopupController","$scope","backend","fancyboxTools","submit","submitCallback","close","jQuery","fancybox","vm","isSingleItemInInsurance","popupId","esCode","setOpenListener","link","params","popup","angular","element","popupWrapper","parents","hasClass","addClass","component","templateUrl","controller","bindToController","controllerAs","bindings","locked","es","transclude","extra-service","3","extraServicesListController","utils","switchInsurance","insuranceES","active","items","modifyExtraService","getInsuranceSubmitParams","removeExtraService","onlineMode","item","passenger_id","ins","tins","productCode","isCommonService","isCommonServiceCode","orderInfo","getOrderInfo","findWhere","app","list","availableBundlesByPassengerSegments","4","InsuranceController","switchService","service","switchServiceItem","itemNum","paxKey","selected","itemsByPassengers","passengers","id","5","MealController","$element","checkServiceRemovalProhibited","selectFirstAvailablePassengerFlight","closePopup","selectFlightPassenger","flightNum","passengerNum","selectedFlight","selectedPassenger","updateMealMenu","getFirstAvailableFlightNum","getFirstAvailablePassengerNum","mealMenu","itemsByPassengerSegments","mealMenuSubgroup","mealCountChangeHandler","subgroupNum","mealItem","delta","segment_id","plainFlights","subgroup","subgroups","amount","alreadySelectedCount","rfisc","removePassengerFlightMeal","getSelectedPassengerFlightMeal","currency","count","cost","groupedEditableExtraServices","meal","totalPrice","Big","plus","toFixed","scrollToStart","passengersTableContainer","scrollTo","scrollToEnd","scrollWidth","mobileTableScrollHandler","scrollLeft","clientWidth","scrollRight","canScrollRight","canScrollLeft","$apply","availableBySegments","availableByPassengerSegments","hasAlias","getAvailablePassengersCount","getParam","mealImagesPath","addOrderInfoListener","$watch","on","6","SeatController","$timeout","redirect","modifyError","then","clearFlightPassenger","resp","error","seatMap","setSeatMapContainerTopPosition","reset","seatMapContainerTopPosition","css","updateSeatMap","loadingSeatMap","seatMapError","setPassengerFlightSeat","chair","cabinAllowed","rowNumber","available","number","commonSubgroup","updateSunInfoByFlights","sunInfoByFlights","flight","sunInfo","origincity","departuredate","departuretime","destinationcity","arrivaldate","arrivaltime","getAvailablePassengersCountWrap","pax","hasSeats","removePassengerFlightSeat","isBookingScreen","7","orderWithEsController","$window","uniqueTabIdGenerator","retryPayment","removeInsuranceAeroexpress","loading","retryRegister","pnr","lastName","location","eraseAeroexpressBecauseOfCurrency","eraseInsuranceBecauseOfCurrency","openHandler","mode","errorMessage","bindOrder","header","regnum","bindAlowed","showBindOrderSuccessMessage","showBindOrderFailMessage","clearSession","goToSearchOrder","newBooking","clearLastSearchParams","getAlias","choosePayMethodFailMsg","tabId","openExchange","goToExchange","openRefund","goToRefund","openAddServices","goToAddServices","suffixCount","$on","event","data","popupChoosePayMethodPending","$onInit","resultParam","getParamFromLocation","status","waitPayment","hasFailedServices","paymentRedirectTo","showPaymentFrame","ignoreFailedServices","disableOutsideCloseClick","hasBonusCard","ffpSumm","ffpBonus","total","extra-services","payment","8","isRouteController","$location","onNewSearchOrderFlights","flights","flightSegment","userFlight","origin","originport","destination","destinationport","redefineBrands","redefineRules","redefineRule","routes","from","to","console","log","flightBrand","brand","brandAvailableProps","brandUnavailableProps","brandPaidProps","originalBrands","getBrandConfig","brands","props","prop","name","onNewSearchResult","newSearchResult","needToRestoreBrandsInfo","copy","replaceInfo","needToRedefine","replaceInfoInBrandList","brandsList","needRedefine","segmentRows","segment","segmentFlight","flightsInfo","rules","replaceWithBrand","slice","replaceBrandInfo","brandProp","extend","restoreBrandsInfo","selectedVariantsInfo","rearrangeBrandProps","selectedVariant","originalBrand","getOriginalBrand","availableProps","paidProps","unavailableProps","shortDesc","brandCode","$parent","ready","JSON","parse","bind","searchResult","path","newFlights","directive","scope","scopeAs","9","city","lvovich/dist/lvovich.min","10","config","$compileProvider","debugInfoEnabled","run","$rootScope","href","route","decodeURIComponent","./components/nw-es-popup/nw-es-popup","./components/nw-extra-services-list/nw-extra-services-list","./components/nw-insurance/nw-insurance","./components/nw-meal/nw-meal","./components/nw-seat/nw-seat","./components/order-with-es/order-with-es","./directives/replaceWith","./filters/toCity","./screens/add-services/AddServicesScreenController","./screens/search-order/search-order","11","$routeParams","submitPayment","agree","modifyServicesLoading","orderServicesLoading","selectedPaymentForm","selectedPaymentType","submitPaymentConfirm","showNeedSelectPaymentFormMesage","email","phone","confirmLoading","confirmError","startPaymentForExtraServices","card","goToConfirmOrder","removedSvcs","closeCallback","updateOrderServices","svcsToIssue","noExtraServicesLeft","fatalError","paymentFormChangeHandler","reloadPage","reload","swithcSubmitButtonHoverState","submitButtonHover","searchOrderLoading","openOrder","text","getAliasWithPrefix","clearOrderInfoListeners","clearUpdateOrderServicesListeners","addUpdateOrderServicesListener","priceVariant","isFreePricevariant","reformatAvailableExtraServices","esList","getAvailableExtraServicesList","switchDefaultSelectedServices","addExtraServiceListener","state","addExtraServiceErrorListener","req","modifyServicesError","12","SearchOrderScreenController","clear","clearOrderInfo","showSearchForm","partiallyAddedPassengers","submitSearch","submitTouched","searchOrderAgree","searchOrderForm","$valid","searchLoading","searchOrderByParams","searchParams","date","needToSpecifyDocument","initAddServicesListeners","orderCompletelyInitialized","updateOrderInfoHandler","errorHandler","cb","updateOrderInfo","confirmHandler","finishSeparatePassengersSearch","addPassenger","passengerLastNameRegexp","applicationConstants","pnrOrTicketRegexp","ticketRegexp","pnrOrTicketNumber"],"mappings":"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","file":"controllers-nordwind.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?t(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],t):t(e.lvovich={})}(this,function(e){\"use strict\";function a(e,t){var n=e.length;return e.substring(n-t.length,n)===t}var t={lastname:{exceptions:{androgynous:[\"бова\",\"регин\",\"дарвин\",\"пэйлин\",\"грин\",\"цин\",\"шенгелая\"]},suffixes:{androgynous:[\"ан\",\"ко\",\"дзе\",\"швили\",\"ян\",\"к\",\"ер\",\"ц\",\"г\",\"йн\",\"дт\",\"ен\",\"ич\",\"о\",\"ун\"],female:[\"ова\",\"ая\",\"ына\",\"ина\",\"ева\",\"ска\",\"ёва\"],male:[\"кий\",\"ов\",\"ын\",\"ев\",\"ин\",\"ёв\",\"хий\",\"ний\",\"ый\",\"ой\"]}},firstname:{exceptions:{androgynous:[\"анри\",\"алвард\",\"валери\",\"женя\",\"закия\",\"захария\",\"иона\",\"кири\",\"ким\",\"муса\",\"райхон\",\"саша\",\"сева\",\"ардак\",\"арман\",\"асыл\",\"баглан\",\"бакыт\",\"бахыт\",\"еркежан\",\"жанат\",\"жаркын\",\"куаныш\",\"манат\",\"мереке\",\"рауан\",\"сымбат\",\"тлеухан\",\"умит\",\"улжалгас\",\"ырыс\",\"айбала\",\"акбала\",\"ирза\",\"арши\",\"амиль\"],male:[\"аба\",\"абиба\",\"савва\",\"лёва\",\"вова\",\"-ага\",\"агга\",\"серега\",\"алиада\",\"муктада\",\"абида\",\"алда\",\"маджуда\",\"нурлыхуда\",\"гиа\",\"элиа\",\"гарсиа\",\"вавила\",\"гавриила\",\"генка\",\"лука\",\"дима\",\"зосима\",\"тима\",\"фима\",\"фома\",\"кузьма\",\"жора\",\"миша\",\"ермила\",\"данила\",\"гаврила\",\"абдалла\",\"аталла\",\"абдилла\",\"атилла\",\"кайролла\",\"абула\",\"свитлана\",\"бена\",\"гена\",\"агелина\",\"джанна\",\"кришна\",\"степа\",\"дра\",\"назера\",\"валера\",\"эстера\",\"двойра\",\"калистра\",\"заратустра\",\"юра\",\"иса\",\"аиса\",\"халиса\",\"холиса\",\"валенса\",\"мусса\",\"ата\",\"паата\",\"алета\",\"никита\",\"мота\",\"шота\",\"фаста\",\"коста\",\"маритта\",\"малюта\",\"васюта\",\"вафа\",\"мустафа\",\"ганифа\",\"лев\",\"яков\",\"константин\",\"марсель\",\"рамиль\",\"эмиль\",\"бактыгуль\",\"даниэль\",\"игорь\",\"арминэ\",\"изя\",\"кузя\",\"гия\",\"мазия\",\"кирикия\",\"ркия\",\"еркия\",\"эркия\",\"гулия\",\"аксания\",\"закария\",\"зекерия\",\"гарсия\",\"шендля\",\"филя\",\"вилля\",\"толя\",\"коля\",\"ваня\",\"саня\",\"загиря\",\"боря\",\"цайся\",\"вася\",\"ося\",\"петя\",\"витя\",\"митя\",\"костя\",\"илья\",\"абдала\",\"абдель\",\"фидель\",\"фридель\",\"абдилла\",\"аталла\",\"абла\",\"лазарь\",\"ава\",\"вовка\",\"семён\"],female:[\"судаба\",\"сураба\",\"любава\",\"джанлука\",\"варвара\",\"наташа\",\"зайнаб\",\"любов\",\"сольвейг\",\"шакед\",\"аннаид\",\"ингрид\",\"синди\",\"аллаберди\",\"лали\",\"натали\",\"лили\",\"нелли\",\"элли\",\"эмили\",\"амили\",\"адели\",\"гулькай\",\"алтынай\",\"гюнай\",\"гюльчитай\",\"нурангиз\",\"лиз\",\"элиз\",\"ботагоз\",\"юлдуз\",\"диляфруз\",\"габи\",\"сажи\",\"фанни\",\"мери\",\"элдари\",\"эльдари\",\"хилари\",\"хиллари\",\"аннемари\",\"розмари\",\"товсари\",\"ансари\",\"одри\",\"тери\",\"ири\",\"катя\",\"катри\",\"мэри\",\"сатаней\",\"ефтений\",\"верунчик\",\"гюзел\",\"этел\",\"рэйчел\",\"джил\",\"мерил\",\"нинелл\",\"бурул\",\"ахлам\",\"майрам\",\"махаррам\",\"мириам\",\"дилярам\",\"асем\",\"мерьем\",\"мирьем\",\"эркаим\",\"гулаим\",\"айгерим\",\"марьям\",\"мирьям\",\"эван\",\"гульжиган\",\"айдан\",\"айжан\",\"вивиан\",\"гульжиан\",\"лилиан\",\"мариан\",\"саиман\",\"джоан\",\"чулпан\",\"лоран\",\"моран\",\"гульшан\",\"аделин\",\"жаклин\",\"карин\",\"каролин\",\"каталин\",\"катрин\",\"керстин\",\"кэтрин\",\"мэрилин\",\"рузалин\",\"хелин\",\"цеткин\",\"ширин\",\"элисон\",\"дурсун\",\"кристин\",\"гульжиян\",\"марьян\",\"ренато\",\"зейнеп\",\"санабар\",\"дильбар\",\"гулизар\",\"гульзар\",\"пилар\",\"дагмар\",\"элинар\",\"нилуфар\",\"анхар\",\"гаухар\",\"естер\",\"эстер\",\"дженнифер\",\"линор\",\"элинор\",\"элеонор\",\"айнур\",\"гульнур\",\"шамсинур\",\"элнур\",\"ильсияр\",\"нигяр\",\"сигитас\",\"агнес\",\"анес\",\"долорес\",\"инес\",\"анаис\",\"таис\",\"эллис\",\"элис\",\"кларис\",\"амнерис\",\"айрис\",\"дорис\",\"беатрис\",\"грейс\",\"грэйс\",\"ботагос\",\"маргос\",\"джулианс\",\"арус\",\"диляфрус\",\"саодат\",\"зулхижат\",\"хамат\",\"патимат\",\"хатимат\",\"альжанат\",\"маймунат\",\"гульшат\",\"рут\",\"иргаш\",\"айнаш\",\"агнеш\",\"зауреш\",\"тэрбиш\",\"ануш\",\"азгануш\",\"гаруш\",\"николь\",\"адась\",\"адула\",\"ахмадула\",\"гейбадула\",\"лив\",\"ираги\",\"пегги\",\"абдурефи\",\"адерми\",\"лакшми\",\"мими\",\"наоми\",\"изабель\",\"абигейль\",\"зебо\",\"аширбу\",\"судаба\",\"айсулу\",\"айши\",\"жанет\",\"гузаль\",\"сапият\",\"зауре\",\"кармен\",\"мадлен\",\"алсу\",\"айсу\",\"амели\",\"-бану\",\"ассоль\",\"николь\"]},suffixes:{androgynous:[\"щи\",\"ки\"],male:[\"аба\",\"б\",\"ав\",\"ев\",\"ов\",\"во\",\"г\",\"д\",\"ж\",\"з\",\"би\",\"ди\",\"жи\",\"ли\",\"гани\",\"ит\",\"до\",\"айт\",\"юм\",\"дула\",\"ив\",\"ги\",\"улла\",\"улль\",\"фи\",\"аль\",\"ми\",\"бель\",\"була\",\"йль\",\"яй\",\"бо\",\"бу\",\"кр\",\"ыль\",\"ыт\",\"вва\",\"вель\",\"вни\",\"аба\",\"бала\",\"улу\",\"рза\",\"ши\",\"паша\",\"го\",\"но\",\"ет\",\"ят\",\"ре\",\"ри\",\"ай\",\"ей\",\"ий\",\"ой\",\"ый\",\"к\",\"л\",\"ам\",\"ем\",\"им\",\"ом\",\"ум\",\"ым\",\"ям\",\"ан\",\"бен\",\"вен\",\"ген\",\"ден\",\"ин\",\"сейн\",\"он\",\"ун\",\"ян\",\"ио\",\"ло\",\"ро\",\"то\",\"шо\",\"п\",\"ар\",\"др\",\"ер\",\"ир\",\"ор\",\"тр\",\"ур\",\"ыр\",\"яр\",\"ас\",\"ес\",\"ис\",\"йс\",\"кс\",\"мс\",\"ос\",\"нс\",\"рс\",\"ус\",\"юс\",\"яс\",\"ат\",\"кт\",\"нт\",\"рт\",\"ст\",\"ут\",\"ф\",\"х\",\"ш\",\"ы\",\"сь\",\"тау\",\"ен\",\"коль\",\"рау\",\"обе\",\"убе\",\"иль\",\"ево\",\"ово\",\"шу\",\"ду\",\"пуль\",\"нко\",\"су\",\"вль\",\"оль\",\"ёв\",\"ём\",\"ец\",\"сс\",\"льс\",\"хт\",\"рн\",\"дт\"],female:[\"иба\",\"люба\",\"лава\",\"ева\",\"га\",\"да\",\"еа\",\"иза\",\"иа\",\"ика\",\"нка\",\"ска\",\"ела\",\"ила\",\"илла\",\"эла\",\"има\",\"на\",\"ра\",\"са\",\"та\",\"фа\",\"еса\",\"сса\",\"гуль\",\"куль\",\"нуэль\",\"гюль\",\"нэ\",\"ая\",\"ея\",\"ия\",\"йя\",\"ля\",\"мя\",\"оя\",\"ря\",\"ся\",\"вья\",\"лья\",\"мья\",\"нья\",\"рья\",\"сья\",\"тья\",\"фья\",\"зя\",\"нша\",\"ха\",\"тка\",\"нь\",\"чь\",\"мь\",\"ерь\",\"овка\",\"евка\",\"мба\",\"зь\",\"лка\",\"сала\",\"бла\",\"арь\",\"ума\",\"пи\",\"дель\",\"не\",\"жка\",\"си\",\"ибе\",\"абе\",\"елла\",\"ие\",\"фе\",\"фя\"]}},middlename:{suffixes:{female:[\"на\",\"кызы\",\"гызы\"],male:[\"ич\",\"оглы\",\"улы\",\"уулу\"]}}},n=1,s=2,m=4;function r(e){return f(e,t.firstname)}function o(e){return f(e,t.lastname)}function d(e){return f(e,t.middlename)}function u(e,t){return e===m?t:t===m?e:e===t?e:null}function i(e){return c(function(e){var t=m;if(e.middle&&(t=u(t,d(e.middle.trim()))),e.first&&(t=u(t,r(e.first.trim()))),e.last){var n=o(e.last.trim());null!==n&&(t=u(t,n))}return t}(e))}function f(e,t){if(!e||!t)return null;var s=e.toLowerCase();if(t.exceptions){var n=l(t.exceptions,function(e){return e.substr(!n||n<0?0:+n,(t=\"-\").length)===t?a(s,e.substr(1)):e===s;var t,n});if(n)return n}return t.suffixes?l(t.suffixes,function(e){return a(s,e)}):null}function l(n,s){var e=Object.keys(n).filter(function(e){var t=n[e];return Array.isArray(t)&&t.some(s)});return 1!==e.length?(Object.keys(n).forEach(function(e){var t=n[e];Array.isArray(t)&&t.some(s)}),null):g(e[0])}function g(e){switch(e){case\"male\":case n:return n;case\"female\":case s:return s;case\"androgynous\":case m:return m;default:return null}}function c(e){switch(e){case\"male\":case n:return\"male\";case\"female\":case s:return\"female\";case\"androgynous\":case m:return\"androgynous\";default:return null}}var y=1,v=2,p=3,h=4,x=5,b=6;function w(e){Array.isArray(e.exceptions)&&e.exceptions.forEach(function(e){e.gender=g(e.gender)}),Array.isArray(e.suffixes)&&e.suffixes.forEach(function(e){e.gender=g(e.gender)})}function j(e,t,n,s){for(var r=function(e){switch(e){case\"nominative\":case y:return y;case\"genitive\":case v:return v;case\"dative\":case p:return p;case\"accusative\":case h:return h;case\"instrumental\":case x:return x;case\"prepositional\":case b:return b;default:return null}}(t),o=g(n),d=e.split(\"-\"),a=[],m=0;m<d.length;m++){var u=d[m],i=O(u,o,s,{firstWord:0===m&&1<d.length});a.push(i?L(i,u,r):u)}return a.join(\"-\")}function O(e,t,n){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(!e)return null;var r=e.toLowerCase(),o=[];if(Object.keys(s).forEach(function(e){s[e]&&o.push(e)}),n.exceptions){var d=k(n.exceptions,t,function(e){return e===r},o);if(d)return d}return n.suffixes?k(n.suffixes,t,function(e){return a(r,e)},o):null}function k(e,t,n){for(var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],r=0;r<e.length;r++){var o=e[r];if((!o.tags||o.tags.find(function(e){return-1!=s.indexOf(e)}))&&((o.gender===m||t===o.gender)&&o.test))for(var d=0;d<o.test.length;d++)if(n(o.test[d]))return o}return null}function A(e,t){return e&&t<=e.length?e[t]:\".\"}function L(e,t,n){var s;switch(n){case y:s=\".\";break;case v:s=A(e.mods,0);break;case p:s=A(e.mods,1);break;case h:s=A(e.mods,2);break;case x:s=A(e.mods,3);break;case b:s=A(e.mods,4);break;default:s=\".\"}return E(t,s)}function E(e,t){for(var n=0;n<t.length;n++){var s=t[n];switch(s){case\".\":break;case\"-\":e=e.substr(0,e.length-1);break;default:e+=s}}return e}var P={exceptions:[{gender:\"androgynous\",test:[\"бонч\",\"абдул\",\"белиц\",\"гасан\",\"дюссар\",\"дюмон\",\"книппер\",\"корвин\",\"ван\",\"шолом\",\"тер\",\"призван\",\"мелик\",\"вар\",\"фон\"],mods:[\".\",\".\",\".\",\".\",\".\"],tags:[\"first_word\"]},{gender:\"androgynous\",test:[\"дюма\",\"тома\",\"дега\",\"люка\",\"ферма\",\"гамарра\",\"петипа\",\"шандра\",\"скаля\",\"каруана\"],mods:[\".\",\".\",\".\",\".\",\".\"]},{gender:\"androgynous\",test:[\"гусь\",\"ремень\",\"камень\",\"онук\",\"богода\",\"нечипас\",\"долгопалец\",\"маненок\",\"рева\",\"кива\"],mods:[\".\",\".\",\".\",\".\",\".\"]},{gender:\"androgynous\",test:[\"вий\",\"сой\",\"цой\",\"хой\"],mods:[\"-я\",\"-ю\",\"-я\",\"-ем\",\"-е\"]}],suffixes:[{gender:\"female\",test:[\"б\",\"в\",\"г\",\"д\",\"ж\",\"з\",\"й\",\"к\",\"л\",\"м\",\"н\",\"п\",\"р\",\"с\",\"т\",\"ф\",\"х\",\"ц\",\"ч\",\"ш\",\"щ\",\"ъ\",\"ь\"],mods:[\".\",\".\",\".\",\".\",\".\"]},{gender:\"androgynous\",test:[\"орота\"],mods:[\".\",\".\",\".\",\".\",\".\"]},{gender:\"female\",test:[\"ска\",\"цка\"],mods:[\"-ой\",\"-ой\",\"-ую\",\"-ой\",\"-ой\"]},{gender:\"female\",test:[\"цкая\",\"ская\",\"ная\",\"ая\"],mods:[\"--ой\",\"--ой\",\"--ую\",\"--ой\",\"--ой\"]},{gender:\"female\",test:[\"яя\"],mods:[\"--ей\",\"--ей\",\"--юю\",\"--ей\",\"--ей\"]},{gender:\"male\",test:[\"иной\",\"уй\"],mods:[\"-я\",\"-ю\",\"-я\",\"-ем\",\"-е\"]},{gender:\"androgynous\",test:[\"ца\"],mods:[\"-ы\",\"-е\",\"-у\",\"-ей\",\"-е\"]},{gender:\"male\",test:[\"рих\"],mods:[\"а\",\"у\",\"а\",\"ом\",\"е\"]},{gender:\"androgynous\",test:[\"ия\"],mods:[\"-и\",\"-и\",\"-ю\",\"-ей\",\"-и\"]},{gender:\"androgynous\",test:[\"иа\",\"аа\",\"оа\",\"уа\",\"ыа\",\"еа\",\"юа\",\"эа\"],mods:[\".\",\".\",\".\",\".\",\".\"]},{gender:\"androgynous\",test:[\"о\",\"е\",\"э\",\"и\",\"ы\",\"у\",\"ю\"],mods:[\".\",\".\",\".\",\".\",\".\"]},{gender:\"male\",test:[\"их\",\"ых\"],mods:[\".\",\".\",\".\",\".\",\".\"]},{gender:\"female\",test:[\"ова\",\"ева\",\"на\",\"ёва\"],mods:[\"-ой\",\"-ой\",\"-у\",\"-ой\",\"-ой\"]},{gender:\"androgynous\",test:[\"га\",\"ка\",\"ха\",\"ча\",\"ща\",\"жа\",\"ша\"],mods:[\"-и\",\"-е\",\"-у\",\"-ой\",\"-е\"]},{gender:\"androgynous\",test:[\"а\"],mods:[\"-ы\",\"-е\",\"-у\",\"-ой\",\"-е\"]},{gender:\"male\",test:[\"ь\"],mods:[\"-я\",\"-ю\",\"-я\",\"-ем\",\"-е\"]},{gender:\"androgynous\",test:[\"я\"],mods:[\"-и\",\"-е\",\"-ю\",\"-ей\",\"-е\"]},{gender:\"male\",test:[\"обей\"],mods:[\"--ья\",\"--ью\",\"--ья\",\"--ьем\",\"--ье\"]},{gender:\"male\",test:[\"ей\"],mods:[\"-я\",\"-ю\",\"-я\",\"-ем\",\"-е\"]},{gender:\"male\",test:[\"ян\",\"ан\",\"йн\"],mods:[\"а\",\"у\",\"а\",\"ом\",\"е\"]},{gender:\"male\",test:[\"ынец\",\"овец\"],mods:[\"--ца\",\"--цу\",\"--ца\",\"--цом\",\"--це\"]},{gender:\"male\",test:[\"нец\",\"обец\"],mods:[\"--ца\",\"--цу\",\"--ца\",\"--цем\",\"--це\"]},{gender:\"male\",test:[\"ай\"],mods:[\"-я\",\"-ю\",\"-я\",\"-ем\",\"-е\"]},{gender:\"male\",test:[\"гой\",\"кой\"],mods:[\"-го\",\"-му\",\"-го\",\"--им\",\"-м\"]},{gender:\"male\",test:[\"ой\"],mods:[\"-го\",\"-му\",\"-го\",\"--ым\",\"-м\"]},{gender:\"male\",test:[\"ах\",\"ив\",\"шток\"],mods:[\"а\",\"у\",\"а\",\"ом\",\"е\"]},{gender:\"male\",test:[\"ший\",\"щий\",\"жий\",\"ний\"],mods:[\"--его\",\"--ему\",\"--его\",\"-м\",\"--ем\"]},{gender:\"male\",test:[\"ый\",\"кий\",\"хий\"],mods:[\"--ого\",\"--ому\",\"--ого\",\"-м\",\"--ом\"]},{gender:\"male\",test:[\"ий\"],mods:[\"-я\",\"-ю\",\"-я\",\"-ем\",\"-и\"]},{gender:\"male\",test:[\"ок\"],mods:[\"--ка\",\"--ку\",\"--ка\",\"--ком\",\"--ке\"]},{gender:\"male\",test:[\"иец\",\"еец\"],mods:[\"--йца\",\"--йцу\",\"--йца\",\"--йцом\",\"--йце\"]},{gender:\"male\",test:[\"ец\"],mods:[\"--ца\",\"--цу\",\"--ца\",\"--цом\",\"--це\"]},{gender:\"male\",test:[\"ц\",\"ч\",\"ш\",\"щ\"],mods:[\"а\",\"у\",\"а\",\"ем\",\"е\"]},{gender:\"male\",test:[\"ен\",\"нн\",\"он\",\"ун\",\"б\",\"г\",\"д\",\"ж\",\"з\",\"к\",\"л\",\"м\",\"п\",\"р\",\"с\",\"т\",\"ф\",\"х\"],mods:[\"а\",\"у\",\"а\",\"ом\",\"е\"]},{gender:\"male\",test:[\"в\",\"н\"],mods:[\"а\",\"у\",\"а\",\"ым\",\"е\"]}]},C={exceptions:[{gender:\"androgynous\",test:[\"борух\"],mods:[\".\",\".\",\".\",\".\",\".\"],tags:[\"first_word\"]}],suffixes:[{gender:\"male\",test:[\"мич\",\"ьич\",\"кич\"],mods:[\"а\",\"у\",\"а\",\"ом\",\"е\"]},{gender:\"male\",test:[\"ич\"],mods:[\"а\",\"у\",\"а\",\"ем\",\"е\"]},{gender:\"female\",test:[\"на\"],mods:[\"-ы\",\"-е\",\"-у\",\"-ой\",\"-е\"]}]},G={exceptions:[{gender:\"male\",test:[\"лев\"],mods:[\"--ьва\",\"--ьву\",\"--ьва\",\"--ьвом\",\"--ьве\"]},{gender:\"male\",test:[\"пётр\"],mods:[\"---етра\",\"---етру\",\"---етра\",\"---етром\",\"---етре\"]},{gender:\"male\",test:[\"павел\"],mods:[\"--ла\",\"--лу\",\"--ла\",\"--лом\",\"--ле\"]},{gender:\"male\",test:[\"яша\"],mods:[\"-и\",\"-е\",\"-у\",\"-ей\",\"-е\"]},{gender:\"male\",test:[\"шота\"],mods:[\".\",\".\",\".\",\".\",\".\"]},{gender:\"female\",test:[\"агидель\",\"жизель\",\"нинель\",\"рашель\",\"рахиль\"],mods:[\"-и\",\"-и\",\".\",\"ю\",\"-и\"]}],suffixes:[{gender:\"androgynous\",test:[\"лок\"],mods:[\"--ка\",\"--ку\",\".\",\"--кос\",\"--ке\"]},{gender:\"androgynous\",test:[\"ки\"],mods:[\"-ов\",\"-ам\",\".\",\"-ами\",\"-ах\"]},{gender:\"androgynous\",test:[\"щи\"],mods:[\"-ев\",\"-ам\",\".\",\"-ами\",\"-ах\"]},{gender:\"androgynous\",test:[\"е\",\"ё\",\"и\",\"о\",\"у\",\"ы\",\"э\",\"ю\"],mods:[\".\",\".\",\".\",\".\",\".\"]},{gender:\"male\",test:[\"уа\",\"иа\"],mods:[\".\",\".\",\".\",\".\",\".\"]},{gender:\"female\",test:[\"б\",\"в\",\"г\",\"д\",\"ж\",\"з\",\"й\",\"к\",\"л\",\"м\",\"н\",\"п\",\"р\",\"с\",\"т\",\"ф\",\"х\",\"ц\",\"ч\",\"ш\",\"щ\",\"ъ\",\"иа\",\"ль\"],mods:[\".\",\".\",\".\",\".\",\".\"]},{gender:\"female\",test:[\"ь\"],mods:[\"-и\",\"-и\",\".\",\"ю\",\"-и\"]},{gender:\"male\",test:[\"ь\"],mods:[\"-я\",\"-ю\",\"-я\",\"-ем\",\"-е\"]},{gender:\"androgynous\",test:[\"га\",\"ка\",\"ха\",\"ча\",\"ща\",\"жа\"],mods:[\"-и\",\"-е\",\"-у\",\"-ой\",\"-е\"]},{gender:\"female\",test:[\"ша\"],mods:[\"-и\",\"-е\",\"-у\",\"-ей\",\"-е\"]},{gender:\"male\",test:[\"ша\",\"ча\",\"жа\"],mods:[\"-и\",\"-е\",\"-у\",\"-ей\",\"-е\"]},{gender:\"androgynous\",test:[\"а\"],mods:[\"-ы\",\"-е\",\"-у\",\"-ой\",\"-е\"]},{gender:\"female\",test:[\"ия\"],mods:[\"-и\",\"-и\",\"-ю\",\"-ей\",\"-и\"]},{gender:\"female\",test:[\"ка\",\"га\",\"ха\"],mods:[\"-и\",\"-е\",\"-у\",\"-ой\",\"-е\"]},{gender:\"female\",test:[\"ца\"],mods:[\"-ы\",\"-е\",\"-у\",\"-ей\",\"-е\"]},{gender:\"female\",test:[\"а\"],mods:[\"-ы\",\"-е\",\"-у\",\"-ой\",\"-е\"]},{gender:\"female\",test:[\"я\"],mods:[\"-и\",\"-е\",\"-ю\",\"-ей\",\"-е\"]},{gender:\"male\",test:[\"ия\"],mods:[\"-и\",\"-и\",\"-ю\",\"-ей\",\"-и\"]},{gender:\"male\",test:[\"я\"],mods:[\"-и\",\"-е\",\"-ю\",\"-ей\",\"-е\"]},{gender:\"male\",test:[\"ий\"],mods:[\"-я\",\"-ю\",\"-я\",\"-ем\",\"-и\"]},{gender:\"male\",test:[\"ый\",\"кий\",\"хий\"],mods:[\"--ого\",\"--ому\",\"--ого\",\"-м\",\"--ом\"]},{gender:\"male\",test:[\"ей\",\"й\"],mods:[\"-я\",\"-ю\",\"-я\",\"-ем\",\"-е\"]},{gender:\"male\",test:[\"ш\",\"ж\"],mods:[\"а\",\"у\",\"а\",\"ем\",\"е\"]},{gender:\"male\",test:[\"ёл\"],mods:[\"--ла\",\"--лу\",\"--ла\",\"--лом\",\"--ле\"]},{gender:\"male\",test:[\"ёк\"],mods:[\"--ька\",\"--ьку\",\"--ька\",\"--ьком\",\"--ьке\"]},{gender:\"male\",test:[\"б\",\"в\",\"г\",\"д\",\"ж\",\"з\",\"к\",\"л\",\"м\",\"н\",\"п\",\"р\",\"с\",\"т\",\"ф\",\"х\",\"ц\",\"ч\"],mods:[\"а\",\"у\",\"а\",\"ом\",\"е\"]},{gender:\"androgynous\",test:[\"ния\",\"рия\",\"вия\"],mods:[\"-и\",\"-и\",\"-ю\",\"-ем\",\"-ем\"]}]};function _(e){return j(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"accusative\",(2<arguments.length?arguments[2]:void 0)||r(e),G)}function F(e){return j(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"accusative\",(2<arguments.length?arguments[2]:void 0)||o(e),P)}function M(e){return j(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"accusative\",(2<arguments.length?arguments[2]:void 0)||d(e),C)}function S(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},t=Object.keys(o);\"function\"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.forEach(function(e){var t,n,s;s=o[n=e],n in(t=r)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s})}return r}w(P),w(C),w(G);var D=[\"форт-шевченко\"],I=[\"-\",\" \",\"в\",\"на\",\"баден\",\"бледно\",\"буэнос\",\"вице\",\"гаврилов\",\"йошкар\",\"коста\",\"лос\",\"норд\",\"нью\",\"орехово\",\"принс\",\"сан\",\"санкт\",\"санта\",\"северо\",\"ситтард\",\"темно\",\"улан\",\"усолье\",\"усть\",\"форт\",\"царь\",\"экс\",\"юго\",\"юрьев\"],T=[\"село\",\"поселок\",\"аул\",\"город\",\"деревня\",\"урочище\"],W={exceptions:[{test:[\"сочи\",\"тбилиси\"],mods:[\"\",\"\",\"\",\"\",\"\"]},{test:[\"село\",\"озеро\",\"место\"],mods:[\"-а\",\"-у\",\"\",\"м\",\"-е\"]},{test:[\"область\"],mods:[\"-и\",\"-и\",\"\",\"ю\",\"-и\"]},{test:[\"деревня\"],mods:[\"-и\",\"-е\",\"-ю\",\"-ей\",\"-е\"]},{test:[\"море\"],mods:[\"-я\",\"-ю\",\"\",\"м\",\"\"]},{test:[\"холм\"],mods:[\"а\",\"у\",\"\",\"ом\",\"е\"]}],suffixes:[{test:[\"чёк\",\"чек\"],mods:[\"--ка\",\"--ку\",\"\",\"--ком\",\"--ке\"]},{test:[\"чик\"],mods:[\"а\",\"у\",\"\",\"ом\",\"е\"]},{test:[\"жний\",\"хний\",\"шний\",\"щий\"],mods:[\"--его\",\"--ему\",\"\",\"-м\",\"--ем\"]},{test:[\"ще\"],mods:[\"-а\",\"-у\",\"\",\"м\",\"\"]},{test:[\"чье\"],mods:[\"-я\",\"-ю\",\"\",\"м\",\"\"]},{test:[\"ель\"],mods:[\"-я\",\"-ю\",\"\",\"-ем\",\"-е\"]},{test:[\"чь\"],mods:[\"-и\",\"-и\",\"\",\"ю\",\"-и\"]},{test:[\"чи\"],mods:[\"-ей\",\"-ам\",\"\",\"-ами\",\"-ах\"]},{test:[\"ые\",\"ие\"],mods:[\"-х\",\"-м\",\"\",\"-ми\",\"-х\"]},{test:[\"ый\",\"ий\",\"ое\"],mods:[\"--ого\",\"--ому\",\"\",\"-м\",\"--ом\"]},{test:[\"ая\"],mods:[\"--ой\",\"--ой\",\"--ую\",\"--ой\",\"--ой\"]},{test:[\"гиев\"],mods:[\"а\",\"у\",\"\",\"ым\",\"ом\"]},{test:[\"ны\"],mods:[\"-ов\",\"-ам\",\"\",\"-ами\",\"-ах\"]},{test:[\"ша\"],mods:[\"-и\",\"-е\",\"-у\",\"-ей\",\"-е\"]},{test:[\"ры\",\"цы\",\"ды\",\"ги\"],mods:[\"-\",\"-ам\",\"\",\"-ами\",\"-ах\"]},{test:[\"амень\"],mods:[\"---ня\",\"---ню\",\"\",\"---нем\",\"---не\"]},{test:[\"ьн\",\"нц\",\"мм\"],mods:[\"а\",\"у\",\"\",\"ом\",\"е\"]}]},q={exceptions:W.exceptions.map(function(e){return S({gender:m},e)}),suffixes:W.suffixes.map(function(e){return S({gender:m},e)})};function z(e,t){for(var n=e.toLowerCase(),s=0;s<t.length;s++)if(t[s]===n)return!0;return!1}function B(e,t,n){if(1<n.length){if(z(e,I))return!0;for(var s=0;s<t;s++)if(z(n[s],T))return!0}return!1}w(q),e.incline=function(e,t){var n={};return n.gender||(n.gender=i(e)),e.first&&(n.first=_(e.first.trim(),t,n.gender)),e.last&&(n.last=F(e.last.trim(),t,n.gender)),e.middle&&(n.last=M(e.middle.trim(),t,n.gender)),n},e.inclineFirstname=_,e.inclineLastname=F,e.inclineMiddlename=M,e.getGender=i,e.getFirstnameGender=function(e){return c(r(e))},e.getLastnameGender=function(e){return c(o(e))},e.getMiddlenameGender=function(e){return c(d(e))},e.cityIn=function(e,r){return z(e,D)?e:e.split(/(\\s|-)/g).map(function(e,t,n){if(B(e,t,n))return e;var s=O(e,m,q);return s?L(s,e,b):_(e,b,r)||e}).join(\"\")},e.cityFrom=function(e,r){return z(e,D)?e:e.split(/(\\s|-)/g).map(function(e,t,n){if(B(e,t,n))return e;var s=O(e,m,q);return s?L(s,e,v):_(e,v,r)||e}).join(\"\")},e.cityTo=function(e){return e?e.split(/(\\s|-)/g).map(function(e,t,n){if(B(e,t,n))return e;var s=e.toLowerCase();return a(s,\"а\")?E(e,\"-у\"):a(s,\"ая\")?E(e,\"--ую\"):a(s,\"ия\")?E(e,\"--ию\"):a(s,\"я\")?E(e,\"-ю\"):e}).join(\"\"):e},Object.defineProperty(e,\"__esModule\",{value:!0})});\n\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\n\nangular.module('app').component('nwEsPopup', {\n  templateUrl: 'components/nw-es-popup/nw-es-popup.html',\n  controller: 'nwMealPopupController',\n  bindToController: true,\n  controllerAs: 'vm',\n  bindings: {\n    locked: '=',\n    esCode: '<',\n    es: '='\n  },\n  transclude: {\n    'extra-service': 'wrap'\n  }\n});\nangular.module('app').controller('nwMealPopupController', ['$scope', 'backend', 'fancyboxTools', nwMealPopupController]);\n\nfunction nwMealPopupController($scope, backend, fancyboxTools) {\n  var vm = this;\n  var submitCallback = false;\n  vm.isSingleItemInInsurance = false;\n  vm.close = close;\n  vm.submit = submit;\n  vm.popupId = '#nw-' + vm.esCode + '-popup';\n  fancyboxTools.setOpenListener('nw-' + vm.esCode + '-popup', function (link, params) {\n    var popup = angular.element(vm.popupId);\n    var popupWrapper = popup.parents('.fancybox-wrap'); // нужно прописать класс, чтобы проставить ширину попапа\n\n    if (!popupWrapper.hasClass('extra-service__popup')) {\n      popupWrapper.addClass('extra-service__popup');\n    }\n  });\n\n  function submit() {\n    if (submitCallback) {\n      submitCallback(true);\n      close();\n    }\n  }\n\n  function close() {\n    jQuery.fancybox.close();\n  }\n}\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\n\nvar app = angular.module('app');\napp.component('nwExtraServicesList', {\n  templateUrl: 'components/nw-extra-services-list/nw-extra-services-list.html',\n  controller: 'extraServicesListController',\n  controllerAs: 'vm',\n  bindings: {\n    es: '=es',\n    list: '=list',\n    availableBundlesByPassengerSegments: '<',\n    locked: '=locked'\n  }\n});\napp.controller('extraServicesListController', ['utils', 'backend', extraServicesListController]);\n\nfunction extraServicesListController(utils, backend) {\n  var vm = this;\n  vm.isCommonService = utils.isCommonServiceCode;\n  vm.switchInsurance = switchInsurance;\n  vm.orderInfo = backend.getOrderInfo(); // не нужно показывать попап, по клику на страховку, если\n  // в заказе только один пассажир, просто вызываем modifyExtraServices\n\n  var insuranceES = _.findWhere(vm.es, {\n    'code': 'insurance'\n  });\n\n  vm.isSingleItemInInsurance = insuranceES && insuranceES.items.length === 1;\n\n  function switchInsurance() {\n    if (!vm.locked) {\n      insuranceES.active = !insuranceES.active;\n\n      if (insuranceES.active) {\n        if (insuranceES.items.length === 1) {\n          backend.modifyExtraService(getInsuranceSubmitParams(insuranceES.items[0]));\n        }\n      } else {\n        backend.removeExtraService({\n          code: insuranceES.onlineMode ? \"insuranceOnline\" : \"insurance\"\n        });\n      }\n    }\n  }\n\n  function getInsuranceSubmitParams(item, passenger_id) {\n    var params = {\n      code: \"insurance\",\n      ins: item.ins,\n      tins: item.tins\n    };\n\n    if (passenger_id) {\n      params.passenger_id = passenger_id;\n    }\n\n    if (insuranceES.onlineMode) {\n      params.code = \"insuranceOnline\";\n      params.productCode = item.productCode;\n    }\n\n    return params;\n  }\n}\n\n},{}],4:[function(require,module,exports){\n\"use strict\";\n\nangular.module(\"wes\").component(\"nwInsurance\", {\n  templateUrl: \"components/nw-insurance/nw-insurance.html\",\n  controller: [\"backend\", InsuranceController],\n  controllerAs: \"vm\",\n  bindings: {\n    service: \"=service\",\n    locked: \"=locked\"\n  }\n});\n\nfunction InsuranceController(backend) {\n  var vm = this;\n  vm.switchService = switchService;\n  vm.switchServiceItem = switchServiceItem;\n  vm.orderInfo = backend.getOrderInfo();\n\n  function switchService() {\n    if (!vm.locked) {\n      vm.service.active = !vm.service.active;\n\n      if (vm.service.active) {\n        if (vm.service.items.length === 1) {\n          backend.modifyExtraService(getInsuranceSubmitParams(vm.service.items[0]));\n        }\n      } else {\n        backend.removeExtraService({\n          code: vm.service.onlineMode ? \"insuranceOnline\" : \"insurance\"\n        });\n      }\n    }\n  }\n\n  function switchServiceItem(itemNum, paxKey) {\n    if (!vm.locked) {\n      if (paxKey === \"common\") {\n        backend[vm.service.items[itemNum].selected ? \"modifyExtraService\" : \"removeExtraService\"](getInsuranceSubmitParams(vm.service.items[itemNum]));\n      } else {\n        backend[vm.service.itemsByPassengers[paxKey][itemNum].selected ? \"modifyExtraService\" : \"removeExtraService\"](getInsuranceSubmitParams(vm.service.itemsByPassengers[paxKey][itemNum], vm.orderInfo.passengers[paxKey].id));\n      }\n    }\n  }\n\n  function getInsuranceSubmitParams(item, passenger_id) {\n    var params = {\n      code: \"insurance\",\n      ins: item.ins,\n      tins: item.tins\n    };\n\n    if (passenger_id) {\n      params.passenger_id = passenger_id;\n    }\n\n    if (vm.service.onlineMode) {\n      params.code = \"insuranceOnline\";\n      params.productCode = item.productCode;\n    }\n\n    return params;\n  }\n}\n\n},{}],5:[function(require,module,exports){\n\"use strict\";\n\nvar app = angular.module(\"app\");\napp.component(\"nwMeal\", {\n  templateUrl: \"components/nw-meal/nw-meal.html\",\n  controller: [\"$scope\", \"$element\", \"backend\", \"utils\", MealController],\n  controllerAs: \"vm\",\n  bindings: {\n    service: \"=service\",\n    locked: \"=locked\",\n    closePopup: \"&\"\n  }\n});\n\nfunction MealController($scope, $element, backend, utils) {\n  var vm = this,\n      passengersTableContainer = $element.find(\"div.passengersTableContainer\");\n  vm.switchService = switchService;\n  vm.selectFlightPassenger = selectFlightPassenger;\n  vm.selectFirstAvailablePassengerFlight = selectFirstAvailablePassengerFlight;\n  vm.mealCountChangeHandler = mealCountChangeHandler;\n  vm.removePassengerFlightMeal = removePassengerFlightMeal;\n  vm.getSelectedPassengerFlightMeal = getSelectedPassengerFlightMeal;\n  vm.scrollToStart = scrollToStart;\n  vm.scrollToEnd = scrollToEnd;\n  vm.hasAlias = backend.hasAlias;\n  vm.getAvailablePassengersCount = utils.getAvailablePassengersCount;\n  vm.checkServiceRemovalProhibited = backend.checkServiceRemovalProhibited;\n  vm.closePopup = vm.closePopup();\n  vm.canScrollRight = true;\n  vm.canScrollLeft = false;\n  vm.selectedFlight = 0;\n  vm.selectedPassenger = 0;\n\n  if (backend.getParam(\"site.externalStorageBaseUrl\")) {\n    vm.mealImagesPath = backend.getParam(\"site.externalStorageBaseUrl\") + \"/img/content/meal\";\n  } else {\n    vm.mealImagesPath = \"./themes/websky/assets/static/img/content/meal\";\n  }\n\n  backend.addOrderInfoListener(function (orderInfo) {\n    vm.orderInfo = orderInfo;\n  }, false, true);\n  $scope.$watch(\"vm.service\", function () {\n    updateMealMenu();\n  });\n  passengersTableContainer.on(\"scroll\", mobileTableScrollHandler);\n\n  if (vm.service.active) {\n    updateMealMenu();\n  }\n\n  function switchService() {\n    if (!vm.locked && !backend.checkServiceRemovalProhibited(\"meal\")) {\n      vm.service.active = !vm.service.active;\n\n      if (vm.service.active) {\n        selectFirstAvailablePassengerFlight();\n      } else {\n        backend.removeExtraService({\n          code: \"meal\"\n        });\n      }\n\n      vm.closePopup();\n    }\n  }\n\n  function selectFlightPassenger(flightNum, passengerNum) {\n    vm.selectedFlight = flightNum;\n    vm.selectedPassenger = passengerNum;\n    updateMealMenu();\n  }\n\n  function selectFirstAvailablePassengerFlight() {\n    vm.selectedFlight = getFirstAvailableFlightNum();\n    vm.selectedPassenger = getFirstAvailablePassengerNum(vm.selectedFlight);\n    updateMealMenu();\n  }\n\n  function updateMealMenu() {\n    vm.mealMenu = vm.service.itemsByPassengerSegments[vm.selectedPassenger][vm.selectedFlight];\n    vm.mealMenuSubgroup = false;\n  }\n\n  function mealCountChangeHandler(subgroupNum, mealItem, delta) {\n    if (!vm.locked) {\n      backend.modifyExtraService({\n        code: \"meal\",\n        passenger_id: vm.orderInfo.passengers[vm.selectedPassenger].id,\n        segment_id: vm.orderInfo.plainFlights[vm.selectedFlight].id,\n        subgroup: vm.service.subgroups[subgroupNum],\n        amount: (mealItem.alreadySelectedCount || 0) + delta,\n        rfisc: mealItem.rfisc\n      });\n    }\n  }\n\n  function removePassengerFlightMeal(passengerNum, flightNum) {\n    if (!vm.locked && !backend.checkServiceRemovalProhibited(\"meal\", passengerNum, flightNum)) {\n      backend.removeExtraService({\n        code: \"meal\",\n        passenger_id: vm.orderInfo.passengers[passengerNum].id,\n        segment_id: vm.orderInfo.plainFlights[flightNum].id\n      });\n    }\n  }\n\n  function getSelectedPassengerFlightMeal(passengerNum, flightNum) {\n    var count = 0,\n        cost = 0,\n        currency;\n\n    if (vm.orderInfo.groupedEditableExtraServices && vm.orderInfo.groupedEditableExtraServices.meal && vm.orderInfo.groupedEditableExtraServices.meal[passengerNum] && vm.orderInfo.groupedEditableExtraServices.meal[passengerNum][flightNum] && vm.orderInfo.groupedEditableExtraServices.meal[passengerNum][flightNum].length) {\n      vm.orderInfo.groupedEditableExtraServices.meal[passengerNum][flightNum].forEach(function (item) {\n        if (item.amount) {\n          count += item.amount;\n        }\n\n        if (item.totalPrice) {\n          cost = Big(cost).plus(item.totalPrice).toFixed(2);\n          currency = item.currency;\n        }\n      });\n    }\n\n    if (count) {\n      return {\n        count: count,\n        cost: cost,\n        currency: currency\n      };\n    } else {\n      return false;\n    }\n  }\n\n  function scrollToStart() {\n    passengersTableContainer.scrollTo(0);\n  }\n\n  function scrollToEnd() {\n    passengersTableContainer.scrollTo(passengersTableContainer[0].scrollWidth);\n  }\n\n  function mobileTableScrollHandler() {\n    var scrollLeft = passengersTableContainer[0].scrollLeft,\n        scrollWidth = passengersTableContainer[0].scrollWidth,\n        clientWidth = passengersTableContainer[0].clientWidth,\n        scrollRight = scrollWidth - clientWidth - scrollLeft;\n    vm.canScrollRight = scrollRight !== 0;\n    vm.canScrollLeft = scrollLeft !== 0;\n    $scope.$apply();\n  }\n\n  function getFirstAvailableFlightNum() {\n    var i;\n\n    for (i = 0; i < vm.orderInfo.plainFlights.length; i++) {\n      if (vm.service.availableBySegments[i]) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  function getFirstAvailablePassengerNum(flightNum) {\n    var i;\n\n    if (vm.service.availableByPassengerSegments) {\n      for (i = 0; i < vm.orderInfo.passengers.length; i++) {\n        if (vm.service.availableByPassengerSegments[i][flightNum]) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n}\n\n},{}],6:[function(require,module,exports){\n\"use strict\";\n\nangular.module(\"app\").component(\"nwSeat\", {\n  templateUrl: \"components/nw-seat/nw-seat.html\",\n  controller: [\"$scope\", \"$element\", \"$timeout\", \"redirect\", \"backend\", \"utils\", SeatController],\n  controllerAs: \"vm\",\n  bindings: {\n    service: \"=service\",\n    locked: \"=locked\",\n    closePopup: \"&\"\n  }\n});\n\nfunction SeatController($scope, $element, $timeout, redirect, backend, utils) {\n  var vm = this,\n      passengersTableContainer = $element.find(\"div.passengersTableContainer\"),\n      seatMapContainerTopPosition = \"0px\";\n  vm.switchService = switchService;\n  vm.selectFlightPassenger = selectFlightPassenger;\n  vm.selectFirstAvailablePassengerFlight = selectFirstAvailablePassengerFlight;\n  vm.setPassengerFlightSeat = setPassengerFlightSeat;\n  vm.closePopup = vm.closePopup();\n  vm.hasAlias = backend.hasAlias;\n  vm.scrollToStart = scrollToStart;\n  vm.scrollToEnd = scrollToEnd;\n  vm.getAvailablePassengersCount = utils.getAvailablePassengersCount;\n  vm.getAvailablePassengersCountWrap = getAvailablePassengersCountWrap;\n  vm.removePassengerFlightSeat = removePassengerFlightSeat;\n  vm.checkServiceRemovalProhibited = backend.checkServiceRemovalProhibited;\n  vm.canScrollRight = true;\n  vm.canScrollLeft = false;\n  vm.isBookingScreen = redirect.isBookingScreen();\n  backend.addOrderInfoListener(function (orderInfo) {\n    vm.orderInfo = orderInfo;\n  }, false, true);\n  updateSunInfoByFlights();\n  passengersTableContainer.on(\"scroll\", mobileTableScrollHandler);\n\n  if (vm.service.active) {\n    selectFirstAvailablePassengerFlight();\n  }\n\n  function switchService() {\n    if (!vm.locked && !backend.checkServiceRemovalProhibited(\"seat\")) {\n      vm.service.active = !vm.service.active;\n\n      if (vm.service.active) {\n        selectFirstAvailablePassengerFlight();\n      } else {\n        vm.modifyError = false;\n        backend.removeExtraService({\n          code: \"seat\"\n        }).then(clearFlightPassenger, function (resp) {\n          if (resp.error) {\n            vm.modifyError = resp.error;\n          }\n        });\n      }\n    }\n\n    vm.closePopup();\n  }\n\n  function clearFlightPassenger() {\n    vm.seatMap = false;\n    vm.selectedFlight = -1;\n    vm.selectedPassenger = -1;\n  }\n\n  function setSeatMapContainerTopPosition(reset) {\n    if (reset) {\n      seatMapContainerTopPosition = \"0px\";\n    } else {\n      seatMapContainerTopPosition = jQuery(\"#seatMapCont .mCSB_container\").css(\"top\");\n    }\n  }\n\n  function selectFlightPassenger(flightNum, passengerNum) {\n    // Нужно запомнить положение карты мест для переключения между пассажирами одного сегмента\n    setSeatMapContainerTopPosition(vm.selectedFlight !== flightNum);\n    vm.selectedFlight = flightNum;\n    vm.selectedPassenger = passengerNum;\n    updateSeatMap();\n  }\n\n  function selectFirstAvailablePassengerFlight() {\n    vm.selectedFlight = getFirstAvailableFlightNum();\n    vm.selectedPassenger = getFirstAvailablePassengerNum(vm.selectedFlight);\n    updateSeatMap();\n  }\n\n  function updateSeatMap() {\n    if (vm.selectedPassenger !== -1 && vm.selectedFlight !== -1) {\n      vm.loadingSeatMap = true;\n      vm.seatMapError = false;\n      backend.seatMap(vm.orderInfo.passengers[vm.selectedPassenger].id, vm.orderInfo.plainFlights[vm.selectedFlight].id).then(function (resp) {\n        vm.seatMap = resp;\n        vm.loadingSeatMap = false;\n        $timeout(function () {\n          jQuery(\"#seatMapCont .mCSB_container\").css(\"top\", seatMapContainerTopPosition);\n        });\n      }, function (resp) {\n        vm.seatMapError = resp.error;\n        vm.loadingSeatMap = false;\n      });\n    }\n  }\n\n  function setPassengerFlightSeat(chair, cabinAllowed, rowNumber) {\n    if (!vm.locked) {\n      if (chair.available && cabinAllowed) {\n        setSeatMapContainerTopPosition();\n        vm.modifyError = false;\n        backend.modifyExtraService({\n          code: \"seat\",\n          passenger_id: vm.orderInfo.passengers[vm.selectedPassenger].id,\n          segment_id: vm.orderInfo.plainFlights[vm.selectedFlight].id,\n          value: rowNumber + chair.number,\n          subgroup: vm.service.commonSubgroup,\n          rfisc: chair.rfisc || \"\"\n        }).then(updateSeatMap, function (resp) {\n          if (resp.error) {\n            vm.modifyError = resp.error;\n          }\n        });\n      }\n    }\n  }\n\n  function updateSunInfoByFlights() {\n    vm.sunInfoByFlights = [];\n    vm.orderInfo.plainFlights.forEach(function (flight, flightNum) {\n      backend.sunInfo(flight.origincity, flight.departuredate, flight.departuretime, flight.destinationcity, flight.arrivaldate, flight.arrivaltime).then(function (resp) {\n        vm.sunInfoByFlights[flightNum] = resp;\n      });\n    });\n  }\n\n  function getFirstAvailableFlightNum() {\n    var i;\n\n    for (i = 0; i < vm.orderInfo.plainFlights.length; i++) {\n      // vm.service.availableBySegments[i]\n      if (vm.service.availableBySegments[i]) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  function getFirstAvailablePassengerNum(flightNum) {\n    var i;\n\n    if (vm.service.availableByPassengerSegments) {\n      for (i = 0; i < vm.orderInfo.passengers.length; i++) {\n        if (vm.service.availableByPassengerSegments[i][flightNum]) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n\n  function scrollToStart() {\n    passengersTableContainer.scrollTo(0);\n  }\n\n  function scrollToEnd() {\n    passengersTableContainer.scrollTo(passengersTableContainer[0].scrollWidth);\n  }\n\n  function mobileTableScrollHandler() {\n    var scrollLeft = passengersTableContainer[0].scrollLeft,\n        scrollWidth = passengersTableContainer[0].scrollWidth,\n        clientWidth = passengersTableContainer[0].clientWidth,\n        scrollRight = scrollWidth - clientWidth - scrollLeft;\n    vm.canScrollRight = scrollRight !== 0;\n    vm.canScrollLeft = scrollLeft !== 0;\n    $scope.$apply();\n  }\n\n  function getAvailablePassengersCountWrap(availableByPassengerSegments) {\n    var count = utils.getAvailablePassengersCount(availableByPassengerSegments);\n    return count + vm.orderInfo.passengers.filter(function (pax) {\n      return !pax.hasSeats;\n    }).length;\n  }\n\n  function removePassengerFlightSeat(passengerNum, flightNum) {\n    if (!vm.locked && !backend.checkServiceRemovalProhibited(\"seat\", passengerNum, flightNum)) {\n      vm.modifyError = false;\n      backend.removeExtraService({\n        code: \"seat\",\n        passenger_id: vm.orderInfo.passengers[passengerNum].id,\n        segment_id: vm.orderInfo.plainFlights[flightNum].id\n      }).then(function () {\n        if (vm.selectedFlight === flightNum) {\n          updateSeatMap();\n        }\n      }, function (resp) {\n        if (resp.error) {\n          vm.modifyError = resp.error;\n        }\n      });\n    }\n  }\n}\n\n},{}],7:[function(require,module,exports){\n\"use strict\";\n\nvar app = angular.module('app');\napp.component('orderWithEs', {\n  templateUrl: 'components/order-with-es/order-with-es.html',\n  controller: 'orderWithEsController',\n  controllerAs: 'vm',\n  transclude: {\n    'extra-services': 'nwExtraServicesList',\n    'payment': 'div'\n  },\n  bindings: {\n    orderInfo: '='\n  }\n});\napp.controller('orderWithEsController', ['$scope', '$window', '$timeout', 'backend', 'utils', 'redirect', 'fancyboxTools', 'uniqueTabIdGenerator', orderWithEsController]);\n\nfunction orderWithEsController($scope, $window, $timeout, backend, utils, redirect, fancyboxTools, uniqueTabIdGenerator) {\n  var vm = this;\n  vm.loading = true;\n  vm.errorMessage = false;\n  vm.choosePayMethodFailMsg = false;\n  vm.tabId = uniqueTabIdGenerator();\n  vm.openExchange = redirect.goToExchange;\n  vm.openRefund = redirect.goToRefund;\n  vm.openAddServices = redirect.goToAddServices;\n  vm.suffixCount = utils.suffixCount;\n  vm.retryPayment = retryPayment;\n  vm.bindOrder = bindOrder;\n  vm.clearSession = clearSession;\n  vm.newBooking = newBooking;\n  $scope.$on(\"popupChoosePayMethodChoosePayMethodFailMsg\", function (event, data) {\n    vm.choosePayMethodFailMsg = data;\n  });\n  $scope.$on(\"popupChoosePayMethodPending\", function (event, data) {\n    vm.popupChoosePayMethodPending = data;\n  });\n\n  vm.$onInit = function () {\n    var resultParam = utils.getParamFromLocation(\"result\");\n\n    if (resultParam === \"success\") {\n      if (vm.orderInfo.header && (vm.orderInfo.header.status === \"being_paid\" || vm.orderInfo.header.status === \"being_paid_for_exchange\")) {\n        backend.waitPayment(vm.orderInfo.header.regnum, vm.orderInfo.header.lastName).then(function () {\n          $window.location = \"./order?pnr=\" + vm.orderInfo.header.regnum + \"&lastName=\" + vm.orderInfo.header.lastName + \"&result=success\";\n          return;\n        }, function () {\n          vm.loading = false;\n        });\n      } else {\n        vm.loading = false;\n      }\n    } else {\n      // Платежный фрэйм открывается независимо от статуса заказа\n      // Необходимое условие для оплаты онлайн страховок\n      if (!vm.orderInfo.hasFailedServices && vm.orderInfo.paymentRedirectTo) {\n        vm.showPaymentFrame = true;\n      }\n\n      vm.loading = false;\n    }\n\n    if (vm.orderInfo.hasFailedServices && !resultParam && vm.orderInfo.header && (vm.orderInfo.header.status === \"being_paid\" || vm.orderInfo.header.status === \"booked\")) {\n      $timeout(function () {\n        fancyboxTools.openHandler(\"popupRemovedServicesWarningByOrder\", false, {\n          submitCallback: function submitCallback() {\n            if (vm.orderInfo.paymentRedirectTo) {\n              vm.showPaymentFrame = true;\n            }\n\n            vm.ignoreFailedServices = true;\n          },\n          disableOutsideCloseClick: true\n        });\n      });\n    }\n\n    if (backend.getParam(\"ffp.enable\") && (vm.orderInfo.hasBonusCard || vm.orderInfo.ffpSumm)) {\n      backend.ffpBonus().then(function (resp) {\n        vm.ffpBonus = resp.total || 0;\n      });\n    }\n  };\n\n  function retryPayment(removeInsuranceAeroexpress) {\n    vm.loading = true;\n    backend.retryRegister(removeInsuranceAeroexpress).then(function (resp) {\n      if (resp.pnr && resp.lastName) {\n        $window.location = \"./order?pnr=\" + resp.pnr + \"&lastName=\" + resp.lastName;\n      } else if (resp.eraseAeroexpressBecauseOfCurrency || resp.eraseInsuranceBecauseOfCurrency) {\n        fancyboxTools.openHandler(\"popupChangeCurrencyError\", false, {\n          eraseAeroexpressBecauseOfCurrency: resp.eraseAeroexpressBecauseOfCurrency,\n          eraseInsuranceBecauseOfCurrency: resp.eraseInsuranceBecauseOfCurrency,\n          mode: \"retryRegister\",\n          submitCallback: retryPayment\n        });\n      }\n\n      vm.loading = false;\n    }, function (resp) {\n      vm.loading = false;\n      vm.errorMessage = resp.error;\n    });\n  }\n\n  function bindOrder() {\n    if (!vm.orderInfo.header || !vm.orderInfo.header.regnum || !vm.orderInfo.header.lastName) {\n      return;\n    }\n\n    vm.loading = true;\n    backend.bindOrder(vm.orderInfo.header.regnum, vm.orderInfo.header.lastName).then(function () {\n      vm.loading = false;\n      vm.orderInfo.bindAlowed = false;\n      vm.showBindOrderSuccessMessage = true;\n      $timeout(function () {\n        vm.showBindOrderSuccessMessage = false;\n      }, 10000);\n    }, function () {\n      vm.loading = false;\n      vm.showBindOrderFailMessage = true;\n      $timeout(function () {\n        vm.showBindOrderFailMessage = false;\n      }, 10000);\n    });\n  }\n\n  function clearSession() {\n    backend.clearSession().then(function () {\n      redirect.goToSearchOrder();\n    });\n  }\n\n  function newBooking() {\n    backend.clearLastSearchParams().then(function () {\n      $window.location = backend.getAlias(\"web.site.firstStepUrl\");\n    });\n  }\n}\n\n},{}],8:[function(require,module,exports){\n\"use strict\";\n\nvar app = angular.module('app');\napp.directive('replaceWith', function () {\n  return {\n    scope: false,\n    controllerAs: 'replaceWith',\n    bindToController: true,\n    scopeAs: 'vm',\n    controller: 'isRouteController'\n  };\n});\napp.controller('isRouteController', ['$scope', 'backend', '$location', isRouteController]);\n\nfunction isRouteController($scope, backend, $location) {\n  var vm = $scope.$parent.vm;\n  vm.originalBrands = false;\n  vm.needToRestoreBrandsInfo = false;\n  backend.ready.then(function () {\n    try {\n      var redefineRules = JSON.parse(backend.getAlias('web.brandConfig.redefine'));\n    } catch (e) {\n      console.error('redefine rules parse error', e);\n    }\n\n    vm.redefineRules = redefineRules;\n    $scope.$watch(angular.bind(this, function () {\n      return vm.selectedVariantsInfo;\n    }), restoreBrandsInfo);\n    $scope.$watch(angular.bind(this, function () {\n      return vm.searchResult;\n    }), function (newSearchResult) {\n      if ($location.path() === '/search-order') {\n        return;\n      }\n\n      onNewSearchResult(newSearchResult);\n    });\n    $scope.$watch(angular.bind(this, function () {\n      if (vm.orderInfo) {\n        return vm.orderInfo.flights;\n      }\n    }), function (newFlights) {\n      onNewSearchOrderFlights(newFlights);\n    });\n  });\n\n  function onNewSearchOrderFlights(flights) {\n    if (!flights) {\n      return;\n    }\n\n    _.forEach(flights, function (flightSegment) {\n      _.forEach(flightSegment.flights, function (userFlight) {\n        var origin = userFlight.originport ? userFlight.originport : userFlight.origincity;\n        var destination = userFlight.destinationport ? userFlight.destinationport : userFlight.destinationcity;\n        var redefineBrands = false;\n\n        _.forEach(vm.redefineRules, function (redefineRule) {\n          _.forEach(redefineRule.routes, function (flight) {\n            if (origin === flight.from && destination === flight.to || flight.from === destination && flight.to === origin) {\n              console.log('we redefine some rules here, check the replacWith directive');\n              redefineBrands = true;\n              var flightBrand = {\n                brand: userFlight.brand,\n                brandAvailableProps: userFlight.brandAvailableProps,\n                brandUnavailableProps: userFlight.brandUnavailableProps,\n                brandPaidProps: userFlight.brandPaidProps\n              };\n              var originalBrands = backend.getBrandConfig();\n              var originalBrand = originalBrands.filter(function (brand) {\n                return brand.code === flightBrand.brand;\n              })[0];\n\n              _.forEach(redefineRule.brands, function (brand) {\n                if (flightBrand.brand === brand.brand) {\n                  var available = [];\n                  var unavailable = [];\n                  var paid = [];\n\n                  _.forEach(brand.props, function (prop) {\n                    switch (prop.available) {\n                      case 'yes':\n                        userFlight.brandAvailableProps.push(prop.name);\n                        break;\n\n                      case 'no':\n                        userFlight.brandUnavailableProps.push(prop.name);\n                        break;\n\n                      case 'paid':\n                        userFlight.brandPaidProps.push(prop.name);\n                        break;\n\n                      default:\n                        break;\n                    }\n                  });\n                }\n              });\n            }\n          });\n        });\n      });\n    });\n  }\n\n  function onNewSearchResult(newSearchResult) {\n    vm.needToRestoreBrandsInfo = false;\n\n    if (newSearchResult && typeof vm.originalBrands === 'boolean') {\n      // Нужно закэшировать оригинальные бренды\n      // т.к. потом они заменятся а поскольку в js не примитивы передаются по ссылке\n      // нужно будет восстанавливать из этого массива значения если\n      // выбраны направления которые не переопределяются\n      vm.originalBrands = angular.copy(backend.getBrandConfig());\n    }\n\n    var replaceInfo = false;\n\n    if (needToRedefine(newSearchResult)) {\n      replaceInfo = true;\n    }\n\n    if (replaceInfo) {\n      replaceInfoInBrandList(newSearchResult.brandsList);\n    } else {\n      if (typeof vm.originalBrands !== 'boolean' && newSearchResult.brandsList) {\n        // Восстанавливаем кэшированное значение\n        newSearchResult.brandsList = newSearchResult.brandsList.map(function (e, i) {\n          return vm.originalBrands.filter(function (item) {\n            return item.code === e.code;\n          })[0];\n        });\n        vm.needToRestoreBrandsInfo = true;\n      }\n    }\n  }\n\n  function needToRedefine(newSearchResult) {\n    var needRedefine = false;\n\n    _.forEach(vm.redefineRules, function (redefineRule) {\n      _.forEach(redefineRule.routes, function (flight) {\n        _.forEach(newSearchResult.segmentRows, function (segment) {\n          _.forEach(segment, function (segmentFlight) {\n            // если есть конкретный аэропорт вылета, искать по нему\n            var origin = segmentFlight.flightsInfo.originport ? segmentFlight.flightsInfo.originport : segmentFlight.flightsInfo.origincity;\n            var destination = segmentFlight.flightsInfo.destinationport ? segmentFlight.flightsInfo.destinationport : segmentFlight.flightsInfo.destinationcity;\n\n            if (origin === flight.from && destination === flight.to || origin === flight.to && destination === flight.from) {\n              needRedefine = true;\n            }\n          });\n        });\n      });\n    });\n\n    return needRedefine;\n  }\n\n  function replaceInfoInBrandList(brandsList) {\n    _.forEach(vm.redefineRules, function (rules) {\n      _.forEach(rules.brands, function (replaceWithBrand) {\n        _.forEach(brandsList.slice(), function (brand) {\n          if (brand.code === replaceWithBrand.brand) {\n            replaceBrandInfo(brand, replaceWithBrand);\n          }\n        });\n      });\n    });\n  }\n\n  function replaceBrandInfo(brand, replaceWithBrand) {\n    console.log('we redefine some rules here, head to web.brandConfig.redefine');\n    console.log(brand, replaceWithBrand);\n\n    _.forEach(brand.props, function (brandProp) {\n      if (replaceWithBrand.props[brandProp.code]) {\n        _.extend(brandProp, replaceWithBrand.props[brandProp.code]);\n      }\n    });\n  }\n\n  function restoreBrandsInfo() {\n    if (!vm.selectedVariantsInfo) {\n      return;\n    }\n\n    if (!vm.needToRestoreBrandsInfo) {\n      return;\n    }\n\n    console.log('restoreBrandsInfo'); // console.log(vm.selectedVariantsInfo);\n    // console.log(vm.originalBrands);\n\n    _.forEach(vm.selectedVariantsInfo, rearrangeBrandProps);\n  }\n\n  function rearrangeBrandProps(selectedVariant) {\n    var originalBrand = getOriginalBrand(selectedVariant.brand);\n    var availableProps = [];\n    var paidProps = [];\n    var unavailableProps = [];\n\n    _.forEach(originalBrand.props, function (prop) {\n      switch (prop.available) {\n        case 'yes':\n          if (prop.shortDesc) {\n            availableProps.push(prop.shortDesc);\n          } else {\n            availableProps.push(prop.name);\n          }\n\n          break;\n\n        case 'paid':\n          paidProps.push(prop.name);\n          break;\n\n        case 'no':\n          unavailableProps.push(prop.name);\n          break;\n\n        default:\n          return;\n      }\n    });\n\n    selectedVariant.brandAvailableProps = availableProps.slice();\n    selectedVariant.brandPaidProps = paidProps.slice();\n    selectedVariant.brandUnavailableProps = unavailableProps.slice();\n  }\n\n  function getOriginalBrand(brandCode) {\n    return vm.originalBrands.filter(function (brand) {\n      return brand.code === brandCode;\n    })[0];\n  }\n}\n\n},{}],9:[function(require,module,exports){\n\"use strict\";\n\nvar lvovich = require('lvovich/dist/lvovich.min');\n\nangular.module('app').filter('toCity', function () {\n  return function (city) {\n    return 'в ' + lvovich.cityTo(city);\n  };\n});\n\n},{\"lvovich/dist/lvovich.min\":1}],10:[function(require,module,exports){\n\"use strict\";\n\nrequire(\"./screens/add-services/AddServicesScreenController\");\n\nrequire(\"./screens/search-order/search-order\");\n\nrequire(\"./directives/replaceWith\");\n\nrequire(\"./components/nw-es-popup/nw-es-popup\");\n\nrequire(\"./components/order-with-es/order-with-es\");\n\nrequire(\"./components/nw-extra-services-list/nw-extra-services-list\");\n\nrequire(\"./components/nw-meal/nw-meal\");\n\nrequire(\"./components/nw-seat/nw-seat\");\n\nrequire(\"./components/nw-insurance/nw-insurance\");\n\nrequire(\"./filters/toCity\"); // TODO: remove it!!\n\n\nangular.module(\"app\").config([\"$compileProvider\", function ($compileProvider) {\n  $compileProvider.debugInfoEnabled(true);\n}]);\nangular.module(\"app\").run([\"$rootScope\", \"redirect\", \"backend\", function ($rootScope, redirect, backend) {\n  $rootScope.$on(\"$locationChangeStart\", function (e) {\n    var href = location.href.split(\"#\")[1];\n    href = href.split(\"/\");\n    var route = href[1],\n        pnr = href[2],\n        lastName = href[3];\n\n    if (route === \"add-services\" && pnr && lastName) {\n      lastName = decodeURIComponent(lastName);\n      redirect.goToSearchOrder(pnr, lastName);\n    }\n  });\n}]);\n\n},{\"./components/nw-es-popup/nw-es-popup\":2,\"./components/nw-extra-services-list/nw-extra-services-list\":3,\"./components/nw-insurance/nw-insurance\":4,\"./components/nw-meal/nw-meal\":5,\"./components/nw-seat/nw-seat\":6,\"./components/order-with-es/order-with-es\":7,\"./directives/replaceWith\":8,\"./filters/toCity\":9,\"./screens/add-services/AddServicesScreenController\":11,\"./screens/search-order/search-order\":12}],11:[function(require,module,exports){\n\"use strict\";\n'use strict';\n\nangular.module('app').controller('AddServicesScreenController', ['$scope', '$routeParams', '$window', 'redirect', 'backend', 'utils', 'fancyboxTools', function ($scope, $routeParams, $window, redirect, backend, utils, fancyboxTools) {\n  var vm = this;\n  vm.loading = true;\n  vm.searchOrderLoading = true;\n  vm.orderServicesLoading = true;\n  vm.openOrder = redirect.goToSearchOrder;\n  vm.submitPayment = submitPayment;\n  vm.paymentFormChangeHandler = paymentFormChangeHandler;\n  vm.reloadPage = reloadPage;\n  vm.clearSession = clearSession;\n  vm.swithcSubmitButtonHoverState = swithcSubmitButtonHoverState;\n  $scope.$on('plasticCardForPaymentChangeEvent', function (event, data) {\n    vm.card = data;\n  });\n  backend.ready.then(function () {\n    angular.element('title').text(backend.getAliasWithPrefix('web.pageTitle.', 'addServices'));\n    vm.loading = false;\n    backend.clearOrderInfoListeners();\n    backend.clearUpdateOrderServicesListeners();\n    backend.addOrderInfoListener(function (orderInfo) {\n      vm.orderInfo = orderInfo;\n    });\n    backend.addUpdateOrderServicesListener(function (resp) {\n      vm.orderInfo = resp[1];\n      vm.priceVariant = resp[2];\n      vm.isFreePricevariant = utils.isFreePricevariant(resp[2]);\n\n      if (vm.isFreePricevariant) {\n        vm.showNeedSelectPaymentFormMesage = false;\n      }\n\n      vm.es = utils.reformatAvailableExtraServices(resp[0], vm.orderInfo, vm.es);\n      vm.esList = utils.getAvailableExtraServicesList(resp[0], vm.es);\n      vm.searchOrderLoading = false;\n      vm.orderServicesLoading = false;\n\n      if (backend.getParam('ffp.enable') && (vm.orderInfo.hasBonusCard || vm.orderInfo.ffpSumm)) {\n        backend.ffpBonus().then(function (resp) {\n          vm.ffpBonus = resp.total || 0;\n        });\n      }\n    }, function (resp) {\n      vm.searchOrderLoading = false;\n      vm.orderServicesLoading = false;\n      vm.errorMessage = resp.error;\n    });\n    backend.updateOrderServices(true).then(function () {\n      vm.loading = true;\n      backend.switchDefaultSelectedServices(vm.esList, vm.es, vm.orderInfo).then(function () {\n        vm.loading = false;\n      }, function (resp) {\n        vm.errorMessage = resp.error;\n        vm.loading = false;\n      });\n    });\n    backend.addExtraServiceListener(function (state) {\n      vm.modifyServicesLoading = !state;\n      vm.orderServicesLoading = true;\n    });\n    backend.addExtraServiceErrorListener(function (resp, req) {\n      if (!req || req.code !== 'seat') {\n        vm.modifyServicesError = resp.error;\n      }\n\n      vm.modifyServicesLoading = false;\n      vm.orderServicesLoading = true;\n    });\n  });\n\n  function submitPayment(removeInsuranceAeroexpress) {\n    if (vm.agree && !vm.modifyServicesLoading && !vm.orderServicesLoading) {\n      if (vm.selectedPaymentForm && vm.selectedPaymentType) {\n        submitPaymentConfirm(removeInsuranceAeroexpress);\n      } else {\n        vm.showNeedSelectPaymentFormMesage = true;\n      }\n    }\n  }\n\n  function submitPaymentConfirm(removeInsuranceAeroexpress, email, phone) {\n    vm.confirmLoading = true;\n\n    if (vm.confirmError) {\n      delete vm.confirmError;\n    }\n\n    backend.startPaymentForExtraServices(vm.selectedPaymentForm, vm.selectedPaymentType, removeInsuranceAeroexpress, email, phone, vm.card).then(function (resp) {\n      if (resp.pnr && resp.lastName) {\n        redirect.goToConfirmOrder();\n      } else if (resp.eraseAeroexpressBecauseOfCurrency || resp.eraseInsuranceBecauseOfCurrency) {\n        fancyboxTools.openHandler('popupChangeCurrencyError', false, {\n          eraseAeroexpressBecauseOfCurrency: resp.eraseAeroexpressBecauseOfCurrency,\n          eraseInsuranceBecauseOfCurrency: resp.eraseInsuranceBecauseOfCurrency,\n          mode: 'addServices',\n          submitCallback: submitPayment\n        });\n      } else if (resp.removedSvcs && resp.removedSvcs.length) {\n        fancyboxTools.openHandler('popupRemovedServicesWarning', false, {\n          submitCallback: function submitCallback() {\n            submitPaymentConfirm(removeInsuranceAeroexpress, email, phone);\n          },\n          closeCallback: function closeCallback() {\n            backend.updateOrderServices(true);\n          },\n          removedSvcs: resp.removedSvcs,\n          svcsToIssue: resp.svcsToIssue,\n          noExtraServicesLeft: resp.noExtraServicesLeft,\n          disableOutsideCloseClick: true\n        });\n      }\n\n      vm.confirmLoading = false;\n    }, function (resp) {\n      if (resp.error === 'web.noBookedConfirmedExtraServices') {\n        vm.fatalError = resp.error;\n      } else {\n        vm.confirmError = resp.error;\n      }\n\n      vm.confirmLoading = false;\n    });\n  }\n\n  function paymentFormChangeHandler() {\n    vm.showNeedSelectPaymentFormMesage = false;\n  }\n\n  function reloadPage() {\n    $window.location.reload();\n    return false;\n  }\n\n  function clearSession() {\n    backend.clearSession().then(function () {\n      redirect.goToSearchOrder();\n    });\n  }\n\n  function swithcSubmitButtonHoverState() {\n    vm.submitButtonHover = !vm.submitButtonHover;\n  }\n}]);\n\n},{}],12:[function(require,module,exports){\n\"use strict\";\n\"use strict\";\n\nangular.module('app').controller('SearchOrderScreenController', ['$scope', '$routeParams', 'backend', 'redirect', '$timeout', 'utils', 'fancyboxTools', SearchOrderScreenController]);\n\nfunction SearchOrderScreenController($scope, $routeParams, backend, redirect, $timeout, utils, fancyboxTools) {\n  var vm = this;\n  vm.loading = true;\n  vm.searchOrderLoading = true;\n  vm.orderServicesLoading = true;\n  vm.showSearchForm = true;\n  vm.searchParams = {};\n  vm.partiallyAddedPassengers = [];\n  vm.submitPayment = submitPayment;\n  vm.submitSearch = submitSearch;\n  vm.confirmHandler = confirmHandler;\n  vm.clear = clear;\n  vm.addPassenger = addPassenger;\n  vm.swithcSubmitButtonHoverState = swithcSubmitButtonHoverState;\n  backend.ready.then(function () {\n    angular.element('title').text(backend.getAliasWithPrefix('web.pageTitle.', 'searchOrder'));\n    vm.passengerLastNameRegexp = backend.applicationConstants.passengerLastNameRegexp;\n    vm.pnrOrTicketRegexp = backend.applicationConstants.pnrOrTicketRegexp;\n    vm.ticketRegexp = backend.applicationConstants.ticketRegexp;\n    backend.clearOrderInfoListeners();\n    backend.clearUpdateOrderServicesListeners();\n\n    if ($routeParams.pnrOrTicketNumber && $routeParams.lastName && backend.getParam('site.searchOrdersBy') === 'LAST_NAME_PNR_TICKET') {\n      vm.searchParams.pnrOrTicketNumber = $routeParams.pnrOrTicketNumber;\n      vm.searchParams.lastName = $routeParams.lastName;\n      vm.loading = false;\n      $timeout(submitSearch);\n    } else {\n      updateOrderInfoHandler();\n      initAddServicesListeners();\n    } // add-services logic\n\n\n    backend.addOrderInfoListener(function (orderInfo) {\n      vm.orderInfo = orderInfo;\n    });\n  });\n\n  function submitPayment(removeInsuranceAeroexpress) {\n    if (vm.agree && !vm.modifyServicesLoading && !vm.orderServicesLoading) {\n      if (vm.selectedPaymentForm && vm.selectedPaymentType) {\n        submitPaymentConfirm(removeInsuranceAeroexpress);\n      } else {\n        vm.showNeedSelectPaymentFormMesage = true;\n      }\n    }\n  }\n\n  function submitPaymentConfirm(removeInsuranceAeroexpress, email, phone) {\n    vm.confirmLoading = true;\n\n    if (vm.confirmError) {\n      delete vm.confirmError;\n    }\n\n    backend.startPaymentForExtraServices(vm.selectedPaymentForm, vm.selectedPaymentType, removeInsuranceAeroexpress, email, phone, vm.card).then(function (resp) {\n      if (resp.pnr && resp.lastName) {\n        redirect.goToConfirmOrder();\n      } else if (resp.eraseAeroexpressBecauseOfCurrency || resp.eraseInsuranceBecauseOfCurrency) {\n        fancyboxTools.openHandler('popupChangeCurrencyError', false, {\n          eraseAeroexpressBecauseOfCurrency: resp.eraseAeroexpressBecauseOfCurrency,\n          eraseInsuranceBecauseOfCurrency: resp.eraseInsuranceBecauseOfCurrency,\n          mode: 'addServices',\n          submitCallback: submitPayment\n        });\n      } else if (resp.removedSvcs && resp.removedSvcs.length) {\n        fancyboxTools.openHandler('popupRemovedServicesWarning', false, {\n          submitCallback: function submitCallback() {\n            submitPaymentConfirm(removeInsuranceAeroexpress, email, phone);\n          },\n          closeCallback: function closeCallback() {\n            backend.updateOrderServices(true);\n          },\n          removedSvcs: resp.removedSvcs,\n          svcsToIssue: resp.svcsToIssue,\n          noExtraServicesLeft: resp.noExtraServicesLeft,\n          disableOutsideCloseClick: true\n        });\n      }\n\n      vm.confirmLoading = false;\n    }, function (resp) {\n      if (resp.error === 'web.noBookedConfirmedExtraServices') {\n        vm.fatalError = resp.error;\n      } else {\n        vm.confirmError = resp.error;\n      }\n\n      vm.confirmLoading = false;\n    });\n  }\n\n  function paymentFormChangeHandler() {\n    vm.showNeedSelectPaymentFormMesage = false;\n  }\n\n  function reloadPage() {\n    $window.location.reload();\n    return false;\n  }\n\n  function clearSession() {\n    backend.clearSession().then(function () {\n      redirect.goToSearchOrder();\n    });\n  }\n\n  function clear() {\n    backend.clearSession();\n    backend.clearOrderInfo();\n    vm.orderInfo = false;\n    vm.showSearchForm = true;\n    vm.partiallyAddedPassengers = [];\n  }\n\n  function submitSearch() {\n    vm.submitTouched = true;\n\n    if ((!backend.getParam('site.useSearchOrderAgreeCheckbox') || vm.searchOrderAgree) && vm.searchOrderForm.$valid) {\n      vm.searchLoading = true;\n      vm.errorMessage = false;\n      backend.searchOrderByParams(vm.searchParams, !!vm.partiallyAddedPassengers.length).then(function (resp) {\n        if (vm.searchParams.flight && vm.searchParams.date) {\n          vm.searchParams = {\n            flight: vm.searchParams.flight,\n            date: vm.searchParams.date\n          };\n        } else if (!resp.needToSpecifyDocument) {\n          vm.searchParams = {};\n        }\n\n        vm.needToSpecifyDocument = resp.needToSpecifyDocument;\n        vm.showSearchForm = false;\n        vm.submitTouched = false;\n        initAddServicesListeners();\n\n        if (resp.orderCompletelyInitialized) {\n          vm.partiallyAddedPassengers = []; // call updateOrderInfo with callback\n          // because need to redirect to add-services\n          // only if adding extra services allowed\n\n          updateOrderInfoHandler();\n        } else {\n          if (resp.partiallyAddedPassengers) {\n            vm.partiallyAddedPassengers = resp.partiallyAddedPassengers;\n          }\n\n          if (vm.needToSpecifyDocument) {\n            vm.showSearchForm = true;\n          }\n        }\n\n        vm.searchLoading = false;\n      }, errorHandler);\n    }\n  }\n\n  function initAddServicesListeners() {\n    backend.addUpdateOrderServicesListener(function (resp) {\n      vm.orderInfo = resp[1];\n      vm.priceVariant = resp[2];\n      vm.isFreePricevariant = utils.isFreePricevariant(resp[2]);\n\n      if (vm.isFreePricevariant) {\n        vm.showNeedSelectPaymentFormMesage = false;\n      }\n\n      vm.es = utils.reformatAvailableExtraServices(resp[0], vm.orderInfo, vm.es);\n      vm.esList = utils.getAvailableExtraServicesList(resp[0], vm.es);\n      vm.searchOrderLoading = false;\n      vm.orderServicesLoading = false;\n\n      if (backend.getParam('ffp.enable') && (vm.orderInfo.hasBonusCard || vm.orderInfo.ffpSumm)) {\n        backend.ffpBonus().then(function (resp) {\n          vm.ffpBonus = resp.total || 0;\n        });\n      }\n    }, function (resp) {\n      vm.searchOrderLoading = false;\n      vm.orderServicesLoading = false;\n      vm.errorMessage = resp.error;\n    });\n    backend.updateOrderServices(true).then(function () {\n      vm.loading = true;\n      backend.switchDefaultSelectedServices(vm.esList, vm.es, vm.orderInfo).then(function () {\n        vm.loading = false;\n      }, function (resp) {\n        vm.errorMessage = resp.error;\n        vm.loading = false;\n      });\n    });\n    backend.addExtraServiceListener(function (state) {\n      vm.modifyServicesLoading = !state;\n      vm.orderServicesLoading = true;\n    });\n    backend.addExtraServiceErrorListener(function (resp, req) {\n      if (!req || req.code !== 'seat') {\n        vm.modifyServicesError = resp.error;\n      }\n\n      vm.modifyServicesLoading = false;\n      vm.orderServicesLoading = true;\n    });\n  }\n\n  function updateOrderInfoHandler(cb) {\n    backend.updateOrderInfo().then(function (orderInfo) {\n      if (orderInfo.passengers) {\n        vm.orderInfo = orderInfo;\n        vm.showSearchForm = false;\n\n        if (typeof cb === 'function') {\n          cb();\n        }\n      }\n\n      vm.loading = false;\n    }, errorHandler);\n  }\n\n  function errorHandler(resp) {\n    vm.loading = false;\n    vm.searchLoading = false;\n\n    if (resp.error !== 'web.messages.emptyOrder') {\n      vm.errorMessage = resp.error;\n    }\n  }\n\n  function confirmHandler() {\n    backend.finishSeparatePassengersSearch().then(updateOrderInfoHandler, errorHandler);\n  }\n\n  function addPassenger() {\n    vm.showSearchForm = true;\n  }\n\n  function swithcSubmitButtonHoverState() {\n    vm.submitButtonHover = !vm.submitButtonHover;\n  }\n}\n\n},{}]},{},[10]);\n"]}