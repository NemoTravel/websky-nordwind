{"version":3,"sources":["controllers-nordwind.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","define","amd","lvovich","this","substring","firstname","lastname","d","middlename","m","middle","trim","first","last","s","toLowerCase","exceptions","l","substr","suffixes","Object","keys","filter","Array","isArray","some","forEach","g","w","gender","j","y","v","h","x","b","split","O","firstWord","push","L","join","arguments","k","tags","find","indexOf","test","A","mods","E","_","G","F","P","M","C","S","getOwnPropertySymbols","concat","getOwnPropertyDescriptor","enumerable","defineProperty","value","configurable","writable","z","B","I","T","androgynous","female","male","D","W","q","map","incline","inclineFirstname","inclineLastname","inclineMiddlename","getGender","getFirstnameGender","getLastnameGender","getMiddlenameGender","cityIn","cityFrom","cityTo","2","AeroexpressController","$q","backend","switchService","vm","locked","service","active","removeExtraService","addExtraPassenger","extraPassengers","optionsByExtraPassengers","getItemsForExtraPassenger","availableDocumentsByExtraPassengers","removeExtraPassenger","num","splice","passengerData","items","item","passengerItem","angular","copy","firstName","lastName","dateOfBirth","documentType","documentNumber","selected","isPassengerItemSelected","orderInfo","issued","isPassengerItemIssued","selectedDate","getPassengerItemSelectedDate","dates","issuedDate","getPassengerItemIssuedDate","documentTypeChangeHandler","passengerNum","isExtraPassenger","selectedDoc","findWhere","documents","aeroexpressDocumentType","passengers","regexps","extraPassengerDateOfBirthChangeHandler","getAvailableDocumentsForAeroexpress","birthDate","departureDate","then","resp","isAllPassengerItemDatesFree","freeDatesObj","availableDatesList","isFree","date","orderAeroexpressService","all_extra_services","departure_code","arrival_code","status","isIssued","passenger","departure_date","editable_extra_services","isExtraPassengerFreeForAllDates","moment","subtract","getParam","isAfter","ready","todayDate","sessionParams","addOrderInfoListener","orderAeroexpressItem","documentCode","aeroexpressDocumentNumber","optionsByPassengers","free","passengersFree","documentPatternsListByPassengers","all","availableDocumentsByOrderPassengers","respItem","documentPatternsListByExtraPassengers","component","templateUrl","controller","controllerAs","bindings","3","BaggageController","$element","$scope","utils","checkServiceRemovalProhibited","removeByPassenger","passenger_id","id","baggageCountChangeHandler","subgroupNum","baggageItem","delta","routePartNum","modifyExtraService","segment_id","plainFlights","routeParts","mainFlightNum","subgroup","subgroups","amount","alreadySelectedCount","rfisc","getSelectedBaggageByRoutePartsAndPassengers","routePart","availableExtraServicesByPassengersAndSubgroups","selectedNum","itemNum","selectRoutePartPassenger","selectedRoutePartNum","selectedPassenger","changeBaggageBySelect","selectedBaggageNum","selectedBaggageByRoutePartsAndPassengers","selectedBaggage","newBaggageNum","selectedBaggageByRoutePartsAndPassengersView","newBaggage","newParams","passengerId","mainSegmentId","subgroupCode","getSelectedPassengerRoutePartBaggage","currency","count","cost","totalPrice","Big","plus","toFixed","scrollToStart","passengersTableContainer","scrollTo","scrollToEnd","scrollWidth","mobileTableScrollHandler","scrollLeft","clientWidth","scrollRight","canScrollRight","canScrollLeft","$apply","removePassengerFlightBaggage","flightNum","optionsByRoutePartsAndPassengers","createOptionsForUiSelect","title","getAlias","$watch","on","4","nwMealPopupController","fancyboxTools","submit","submitCallback","close","isSingleItemInInsurance","popupId","esCode","setOpenListener","link","params","popup","element","popupWrapper","parents","hasClass","addClass","bindToController","es","transclude","extra-service","5","extraServicesListController","switchInsurance","insuranceES","getInsuranceSubmitParams","onlineMode","ins","tins","productCode","isCommonService","isCommonServiceCode","getOrderInfo","app","list","availableBundlesByPassengerSegments","6","InsuranceController","switchServiceItem","paxKey","itemsByPassengers","selectFirstAvailablePassengerFlight","selectedFlight","getFirstAvailableFlightNum","console","log","availableBySegments","7","MealController","closePopup","selectFlightPassenger","updateMealMenu","getFirstAvailablePassengerNum","mealMenu","itemsByPassengerSegments","mealMenuSubgroup","mealCountChangeHandler","mealItem","removePassengerFlightMeal","getSelectedPassengerFlightMeal","groupedEditableExtraServices","meal","availableByPassengerSegments","hasAlias","getAvailablePassengersCount","mealImagesPath","8","PopupAeroexpressScheduleController","openHandler","attr","arrivalCode","departureCode","loading","$","aeroexpressSchedule","arrival","departure","schedule","9","SeatController","$timeout","redirect","modifyError","clearFlightPassenger","error","seatMap","setSeatMapContainerTopPosition","reset","seatMapContainerTopPosition","jQuery","css","updateSeatMap","loadingSeatMap","seatMapError","setPassengerFlightSeat","chair","cabinAllowed","rowNumber","available","number","commonSubgroup","updateSunInfoByFlights","sunInfoByFlights","flight","sunInfo","origincity","departuredate","departuretime","destinationcity","arrivaldate","arrivaltime","getAvailablePassengersCountWrap","pax","hasSeats","removePassengerFlightSeat","isBookingScreen","10","orderWithEsController","$window","uniqueTabIdGenerator","retryPayment","removeInsuranceAeroexpress","retryRegister","pnr","location","eraseAeroexpressBecauseOfCurrency","eraseInsuranceBecauseOfCurrency","mode","errorMessage","bindOrder","header","regnum","bindAlowed","showBindOrderSuccessMessage","showBindOrderFailMessage","clearSession","goToSearchOrder","newBooking","clearLastSearchParams","choosePayMethodFailMsg","tabId","openExchange","goToExchange","openRefund","goToRefund","openAddServices","goToAddServices","suffixCount","$on","event","data","popupChoosePayMethodPending","$onInit","resultParam","getParamFromLocation","waitPayment","hasFailedServices","paymentRedirectTo","showPaymentFrame","ignoreFailedServices","disableOutsideCloseClick","hasBonusCard","ffpSumm","ffpBonus","total","extra-services","payment","11","isRouteController","$location","onNewSearchOrderFlights","flights","flightSegment","userFlight","origin","originport","destination","destinationport","redefineBrands","redefineRules","redefineRule","routes","from","to","flightBrand","brand","brandAvailableProps","brandUnavailableProps","brandPaidProps","originalBrands","getBrandConfig","brands","props","prop","name","onNewSearchResult","newSearchResult","needToRestoreBrandsInfo","replaceInfo","needToRedefine","replaceInfoInBrandList","brandsList","needRedefine","segmentRows","segment","segmentFlight","flightsInfo","rules","replaceWithBrand","slice","replaceBrandInfo","brandProp","extend","restoreBrandsInfo","selectedVariantsInfo","rearrangeBrandProps","selectedVariant","originalBrand","getOriginalBrand","availableProps","paidProps","unavailableProps","shortDesc","brandCode","$parent","JSON","parse","bind","searchResult","path","newFlights","directive","scope","scopeAs","12","city","lvovich/dist/lvovich.min","13","config","$compileProvider","debugInfoEnabled","run","$rootScope","href","route","decodeURIComponent","./components/nw-aeroexpress/nw-aeroexpress","./components/nw-baggage/nw-baggage","./components/nw-es-popup/nw-es-popup","./components/nw-extra-services-list/nw-extra-services-list","./components/nw-insurance/nw-insurance","./components/nw-meal/nw-meal","./components/nw-popup-aeroexpress-schedule/nwPopupAeroexpressSchedule","./components/nw-seat/nw-seat","./components/order-with-es/order-with-es","./directives/replaceWith","./filters/toCity","./screens/add-services/AddServicesScreenController","./screens/search-order/search-order","14","$routeParams","submitPayment","agree","modifyServicesLoading","orderServicesLoading","selectedPaymentForm","selectedPaymentType","submitPaymentConfirm","showNeedSelectPaymentFormMesage","email","phone","confirmLoading","confirmError","startPaymentForExtraServices","card","goToConfirmOrder","removedSvcs","closeCallback","updateOrderServices","svcsToIssue","noExtraServicesLeft","fatalError","paymentFormChangeHandler","reloadPage","reload","swithcSubmitButtonHoverState","submitButtonHover","searchOrderLoading","openOrder","text","getAliasWithPrefix","clearOrderInfoListeners","clearUpdateOrderServicesListeners","addUpdateOrderServicesListener","priceVariant","isFreePricevariant","reformatAvailableExtraServices","esList","getAvailableExtraServicesList","switchDefaultSelectedServices","addExtraServiceListener","state","addExtraServiceErrorListener","req","modifyServicesError","15","SearchOrderScreenController","clear","clearOrderInfo","showSearchForm","partiallyAddedPassengers","submitSearch","submitTouched","searchOrderAgree","searchOrderForm","$valid","searchLoading","searchOrderByParams","searchParams","needToSpecifyDocument","initAddServicesListeners","orderCompletelyInitialized","updateOrderInfoHandler","errorHandler","cb","updateOrderInfo","confirmHandler","finishSeparatePassengersSearch","addPassenger","passengerLastNameRegexp","applicationConstants","pnrOrTicketRegexp","ticketRegexp","pnrOrTicketNumber"],"mappings":"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","file":"controllers-nordwind.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?t(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],t):t(e.lvovich={})}(this,function(e){\"use strict\";function a(e,t){var n=e.length;return e.substring(n-t.length,n)===t}var t={lastname:{exceptions:{androgynous:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"]},suffixes:{androgynous:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],female:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],male:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"]}},firstname:{exceptions:{androgynous:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],male:[\"\",\"\",\"\",\"\",\"\",\"-\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],female:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"-\",\"\",\"\"]},suffixes:{androgynous:[\"\",\"\"],male:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],female:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"]}},middlename:{suffixes:{female:[\"\",\"\",\"\"],male:[\"\",\"\",\"\",\"\"]}}},n=1,s=2,m=4;function r(e){return f(e,t.firstname)}function o(e){return f(e,t.lastname)}function d(e){return f(e,t.middlename)}function u(e,t){return e===m?t:t===m?e:e===t?e:null}function i(e){return c(function(e){var t=m;if(e.middle&&(t=u(t,d(e.middle.trim()))),e.first&&(t=u(t,r(e.first.trim()))),e.last){var n=o(e.last.trim());null!==n&&(t=u(t,n))}return t}(e))}function f(e,t){if(!e||!t)return null;var s=e.toLowerCase();if(t.exceptions){var n=l(t.exceptions,function(e){return e.substr(!n||n<0?0:+n,(t=\"-\").length)===t?a(s,e.substr(1)):e===s;var t,n});if(n)return n}return t.suffixes?l(t.suffixes,function(e){return a(s,e)}):null}function l(n,s){var e=Object.keys(n).filter(function(e){var t=n[e];return Array.isArray(t)&&t.some(s)});return 1!==e.length?(Object.keys(n).forEach(function(e){var t=n[e];Array.isArray(t)&&t.some(s)}),null):g(e[0])}function g(e){switch(e){case\"male\":case n:return n;case\"female\":case s:return s;case\"androgynous\":case m:return m;default:return null}}function c(e){switch(e){case\"male\":case n:return\"male\";case\"female\":case s:return\"female\";case\"androgynous\":case m:return\"androgynous\";default:return null}}var y=1,v=2,p=3,h=4,x=5,b=6;function w(e){Array.isArray(e.exceptions)&&e.exceptions.forEach(function(e){e.gender=g(e.gender)}),Array.isArray(e.suffixes)&&e.suffixes.forEach(function(e){e.gender=g(e.gender)})}function j(e,t,n,s){for(var r=function(e){switch(e){case\"nominative\":case y:return y;case\"genitive\":case v:return v;case\"dative\":case p:return p;case\"accusative\":case h:return h;case\"instrumental\":case x:return x;case\"prepositional\":case b:return b;default:return null}}(t),o=g(n),d=e.split(\"-\"),a=[],m=0;m<d.length;m++){var u=d[m],i=O(u,o,s,{firstWord:0===m&&1<d.length});a.push(i?L(i,u,r):u)}return a.join(\"-\")}function O(e,t,n){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(!e)return null;var r=e.toLowerCase(),o=[];if(Object.keys(s).forEach(function(e){s[e]&&o.push(e)}),n.exceptions){var d=k(n.exceptions,t,function(e){return e===r},o);if(d)return d}return n.suffixes?k(n.suffixes,t,function(e){return a(r,e)},o):null}function k(e,t,n){for(var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],r=0;r<e.length;r++){var o=e[r];if((!o.tags||o.tags.find(function(e){return-1!=s.indexOf(e)}))&&((o.gender===m||t===o.gender)&&o.test))for(var d=0;d<o.test.length;d++)if(n(o.test[d]))return o}return null}function A(e,t){return e&&t<=e.length?e[t]:\".\"}function L(e,t,n){var s;switch(n){case y:s=\".\";break;case v:s=A(e.mods,0);break;case p:s=A(e.mods,1);break;case h:s=A(e.mods,2);break;case x:s=A(e.mods,3);break;case b:s=A(e.mods,4);break;default:s=\".\"}return E(t,s)}function E(e,t){for(var n=0;n<t.length;n++){var s=t[n];switch(s){case\".\":break;case\"-\":e=e.substr(0,e.length-1);break;default:e+=s}}return e}var P={exceptions:[{gender:\"androgynous\",test:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],mods:[\".\",\".\",\".\",\".\",\".\"],tags:[\"first_word\"]},{gender:\"androgynous\",test:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],mods:[\".\",\".\",\".\",\".\",\".\"]},{gender:\"androgynous\",test:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],mods:[\".\",\".\",\".\",\".\",\".\"]},{gender:\"androgynous\",test:[\"\",\"\",\"\",\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]}],suffixes:[{gender:\"female\",test:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],mods:[\".\",\".\",\".\",\".\",\".\"]},{gender:\"androgynous\",test:[\"\"],mods:[\".\",\".\",\".\",\".\",\".\"]},{gender:\"female\",test:[\"\",\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"female\",test:[\"\",\"\",\"\",\"\"],mods:[\"--\",\"--\",\"--\",\"--\",\"--\"]},{gender:\"female\",test:[\"\"],mods:[\"--\",\"--\",\"--\",\"--\",\"--\"]},{gender:\"male\",test:[\"\",\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"androgynous\",test:[\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"male\",test:[\"\"],mods:[\"\",\"\",\"\",\"\",\"\"]},{gender:\"androgynous\",test:[\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"androgynous\",test:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],mods:[\".\",\".\",\".\",\".\",\".\"]},{gender:\"androgynous\",test:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],mods:[\".\",\".\",\".\",\".\",\".\"]},{gender:\"male\",test:[\"\",\"\"],mods:[\".\",\".\",\".\",\".\",\".\"]},{gender:\"female\",test:[\"\",\"\",\"\",\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"androgynous\",test:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"androgynous\",test:[\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"male\",test:[\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"androgynous\",test:[\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"male\",test:[\"\"],mods:[\"--\",\"--\",\"--\",\"--\",\"--\"]},{gender:\"male\",test:[\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"male\",test:[\"\",\"\",\"\"],mods:[\"\",\"\",\"\",\"\",\"\"]},{gender:\"male\",test:[\"\",\"\"],mods:[\"--\",\"--\",\"--\",\"--\",\"--\"]},{gender:\"male\",test:[\"\",\"\"],mods:[\"--\",\"--\",\"--\",\"--\",\"--\"]},{gender:\"male\",test:[\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"male\",test:[\"\",\"\"],mods:[\"-\",\"-\",\"-\",\"--\",\"-\"]},{gender:\"male\",test:[\"\"],mods:[\"-\",\"-\",\"-\",\"--\",\"-\"]},{gender:\"male\",test:[\"\",\"\",\"\"],mods:[\"\",\"\",\"\",\"\",\"\"]},{gender:\"male\",test:[\"\",\"\",\"\",\"\"],mods:[\"--\",\"--\",\"--\",\"-\",\"--\"]},{gender:\"male\",test:[\"\",\"\",\"\"],mods:[\"--\",\"--\",\"--\",\"-\",\"--\"]},{gender:\"male\",test:[\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"male\",test:[\"\"],mods:[\"--\",\"--\",\"--\",\"--\",\"--\"]},{gender:\"male\",test:[\"\",\"\"],mods:[\"--\",\"--\",\"--\",\"--\",\"--\"]},{gender:\"male\",test:[\"\"],mods:[\"--\",\"--\",\"--\",\"--\",\"--\"]},{gender:\"male\",test:[\"\",\"\",\"\",\"\"],mods:[\"\",\"\",\"\",\"\",\"\"]},{gender:\"male\",test:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],mods:[\"\",\"\",\"\",\"\",\"\"]},{gender:\"male\",test:[\"\",\"\"],mods:[\"\",\"\",\"\",\"\",\"\"]}]},C={exceptions:[{gender:\"androgynous\",test:[\"\"],mods:[\".\",\".\",\".\",\".\",\".\"],tags:[\"first_word\"]}],suffixes:[{gender:\"male\",test:[\"\",\"\",\"\"],mods:[\"\",\"\",\"\",\"\",\"\"]},{gender:\"male\",test:[\"\"],mods:[\"\",\"\",\"\",\"\",\"\"]},{gender:\"female\",test:[\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]}]},G={exceptions:[{gender:\"male\",test:[\"\"],mods:[\"--\",\"--\",\"--\",\"--\",\"--\"]},{gender:\"male\",test:[\"\"],mods:[\"---\",\"---\",\"---\",\"---\",\"---\"]},{gender:\"male\",test:[\"\"],mods:[\"--\",\"--\",\"--\",\"--\",\"--\"]},{gender:\"male\",test:[\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"male\",test:[\"\"],mods:[\".\",\".\",\".\",\".\",\".\"]},{gender:\"female\",test:[\"\",\"\",\"\",\"\",\"\"],mods:[\"-\",\"-\",\".\",\"\",\"-\"]}],suffixes:[{gender:\"androgynous\",test:[\"\"],mods:[\"--\",\"--\",\".\",\"--\",\"--\"]},{gender:\"androgynous\",test:[\"\"],mods:[\"-\",\"-\",\".\",\"-\",\"-\"]},{gender:\"androgynous\",test:[\"\"],mods:[\"-\",\"-\",\".\",\"-\",\"-\"]},{gender:\"androgynous\",test:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],mods:[\".\",\".\",\".\",\".\",\".\"]},{gender:\"male\",test:[\"\",\"\"],mods:[\".\",\".\",\".\",\".\",\".\"]},{gender:\"female\",test:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],mods:[\".\",\".\",\".\",\".\",\".\"]},{gender:\"female\",test:[\"\"],mods:[\"-\",\"-\",\".\",\"\",\"-\"]},{gender:\"male\",test:[\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"androgynous\",test:[\"\",\"\",\"\",\"\",\"\",\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"female\",test:[\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"male\",test:[\"\",\"\",\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"androgynous\",test:[\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"female\",test:[\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"female\",test:[\"\",\"\",\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"female\",test:[\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"female\",test:[\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"female\",test:[\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"male\",test:[\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"male\",test:[\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"male\",test:[\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"male\",test:[\"\",\"\",\"\"],mods:[\"--\",\"--\",\"--\",\"-\",\"--\"]},{gender:\"male\",test:[\"\",\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{gender:\"male\",test:[\"\",\"\"],mods:[\"\",\"\",\"\",\"\",\"\"]},{gender:\"male\",test:[\"\"],mods:[\"--\",\"--\",\"--\",\"--\",\"--\"]},{gender:\"male\",test:[\"\"],mods:[\"--\",\"--\",\"--\",\"--\",\"--\"]},{gender:\"male\",test:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],mods:[\"\",\"\",\"\",\"\",\"\"]},{gender:\"androgynous\",test:[\"\",\"\",\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]}]};function _(e){return j(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"accusative\",(2<arguments.length?arguments[2]:void 0)||r(e),G)}function F(e){return j(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"accusative\",(2<arguments.length?arguments[2]:void 0)||o(e),P)}function M(e){return j(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"accusative\",(2<arguments.length?arguments[2]:void 0)||d(e),C)}function S(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},t=Object.keys(o);\"function\"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.forEach(function(e){var t,n,s;s=o[n=e],n in(t=r)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s})}return r}w(P),w(C),w(G);var D=[\"-\"],I=[\"-\",\" \",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],T=[\"\",\"\",\"\",\"\",\"\",\"\"],W={exceptions:[{test:[\"\",\"\"],mods:[\"\",\"\",\"\",\"\",\"\"]},{test:[\"\",\"\",\"\"],mods:[\"-\",\"-\",\"\",\"\",\"-\"]},{test:[\"\"],mods:[\"-\",\"-\",\"\",\"\",\"-\"]},{test:[\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{test:[\"\"],mods:[\"-\",\"-\",\"\",\"\",\"\"]},{test:[\"\"],mods:[\"\",\"\",\"\",\"\",\"\"]}],suffixes:[{test:[\"\",\"\"],mods:[\"--\",\"--\",\"\",\"--\",\"--\"]},{test:[\"\"],mods:[\"\",\"\",\"\",\"\",\"\"]},{test:[\"\",\"\",\"\",\"\"],mods:[\"--\",\"--\",\"\",\"-\",\"--\"]},{test:[\"\"],mods:[\"-\",\"-\",\"\",\"\",\"\"]},{test:[\"\"],mods:[\"-\",\"-\",\"\",\"\",\"\"]},{test:[\"\"],mods:[\"-\",\"-\",\"\",\"-\",\"-\"]},{test:[\"\"],mods:[\"-\",\"-\",\"\",\"\",\"-\"]},{test:[\"\"],mods:[\"-\",\"-\",\"\",\"-\",\"-\"]},{test:[\"\",\"\"],mods:[\"-\",\"-\",\"\",\"-\",\"-\"]},{test:[\"\",\"\",\"\"],mods:[\"--\",\"--\",\"\",\"-\",\"--\"]},{test:[\"\"],mods:[\"--\",\"--\",\"--\",\"--\",\"--\"]},{test:[\"\"],mods:[\"\",\"\",\"\",\"\",\"\"]},{test:[\"\"],mods:[\"-\",\"-\",\"\",\"-\",\"-\"]},{test:[\"\"],mods:[\"-\",\"-\",\"-\",\"-\",\"-\"]},{test:[\"\",\"\",\"\",\"\"],mods:[\"-\",\"-\",\"\",\"-\",\"-\"]},{test:[\"\"],mods:[\"---\",\"---\",\"\",\"---\",\"---\"]},{test:[\"\",\"\",\"\"],mods:[\"\",\"\",\"\",\"\",\"\"]}]},q={exceptions:W.exceptions.map(function(e){return S({gender:m},e)}),suffixes:W.suffixes.map(function(e){return S({gender:m},e)})};function z(e,t){for(var n=e.toLowerCase(),s=0;s<t.length;s++)if(t[s]===n)return!0;return!1}function B(e,t,n){if(1<n.length){if(z(e,I))return!0;for(var s=0;s<t;s++)if(z(n[s],T))return!0}return!1}w(q),e.incline=function(e,t){var n={};return n.gender||(n.gender=i(e)),e.first&&(n.first=_(e.first.trim(),t,n.gender)),e.last&&(n.last=F(e.last.trim(),t,n.gender)),e.middle&&(n.last=M(e.middle.trim(),t,n.gender)),n},e.inclineFirstname=_,e.inclineLastname=F,e.inclineMiddlename=M,e.getGender=i,e.getFirstnameGender=function(e){return c(r(e))},e.getLastnameGender=function(e){return c(o(e))},e.getMiddlenameGender=function(e){return c(d(e))},e.cityIn=function(e,r){return z(e,D)?e:e.split(/(\\s|-)/g).map(function(e,t,n){if(B(e,t,n))return e;var s=O(e,m,q);return s?L(s,e,b):_(e,b,r)||e}).join(\"\")},e.cityFrom=function(e,r){return z(e,D)?e:e.split(/(\\s|-)/g).map(function(e,t,n){if(B(e,t,n))return e;var s=O(e,m,q);return s?L(s,e,v):_(e,v,r)||e}).join(\"\")},e.cityTo=function(e){return e?e.split(/(\\s|-)/g).map(function(e,t,n){if(B(e,t,n))return e;var s=e.toLowerCase();return a(s,\"\")?E(e,\"-\"):a(s,\"\")?E(e,\"--\"):a(s,\"\")?E(e,\"--\"):a(s,\"\")?E(e,\"-\"):e}).join(\"\"):e},Object.defineProperty(e,\"__esModule\",{value:!0})});\n\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\n\nangular.module(\"wes\").component(\"nwAeroexpress\", {\n  templateUrl: \"components/nw-aeroexpress/nw-aeroexpress.html\",\n  controller: [\"$q\", \"backend\", AeroexpressController],\n  controllerAs: \"vm\",\n  bindings: {\n    service: \"=service\",\n    locked: \"=locked\"\n  }\n});\n\nfunction AeroexpressController($q, backend) {\n  var vm = this;\n  vm.switchService = switchService;\n  vm.addExtraPassenger = addExtraPassenger;\n  vm.removeExtraPassenger = removeExtraPassenger;\n  vm.documentTypeChangeHandler = documentTypeChangeHandler;\n  vm.extraPassengerDateOfBirthChangeHandler = extraPassengerDateOfBirthChangeHandler;\n  vm.isExtraPassengerFreeForAllDates = isExtraPassengerFreeForAllDates;\n  vm.isIssued = isIssued;\n  vm.availableDocumentsByExtraPassengers = [];\n  backend.ready.then(function () {\n    vm.todayDate = backend.sessionParams.todayDate;\n  });\n  backend.addOrderInfoListener(function (orderInfo) {\n    vm.orderInfo = orderInfo;\n\n    if (orderInfo) {\n      if (orderInfo.passengers) {\n        vm.orderInfo.passengers.forEach(function (passenger) {\n          var orderAeroexpressService = _.findWhere(orderInfo.all_extra_services, {\n            code: \"aeroexpress\"\n          }),\n              orderAeroexpressItem;\n\n          if (_.findWhere(vm.service.documents, {\n            code: passenger.documentCode\n          })) {\n            passenger.aeroexpressDocumentType = passenger.documentCode;\n            passenger.aeroexpressDocumentNumber = passenger.documentNumber;\n          }\n\n          if (orderAeroexpressService && orderAeroexpressService.items && orderAeroexpressService.items.length) {\n            orderAeroexpressItem = _.findWhere(orderAeroexpressService.items, {\n              firstName: passenger.firstName,\n              lastName: passenger.lastName\n            });\n\n            if (orderAeroexpressItem) {\n              passenger.aeroexpressDocumentType = orderAeroexpressItem.documentType;\n              passenger.aeroexpressDocumentNumber = orderAeroexpressItem.documentNumber;\n            }\n          }\n        });\n        vm.optionsByPassengers = vm.orderInfo.passengers.map(function (passenger, passengerNum) {\n          return vm.service.items.map(function (item) {\n            var passengerItem = angular.copy(item);\n            passengerItem.firstName = passenger.firstName;\n            passengerItem.lastName = passenger.lastName;\n            passengerItem.dateOfBirth = passenger.dateOfBirth;\n            passengerItem.documentType = passenger.documentCode;\n            passengerItem.documentNumber = passenger.documentNumber; //    \n\n            passengerItem.free = isAllPassengerItemDatesFree(vm.service.passengersFree[passengerNum], passengerItem.dates); //   ,     \n\n            passengerItem.dates = passengerItem.dates.filter(function (date) {\n              return !vm.service.passengersFree[passengerNum][date];\n            });\n            passengerItem.selected = isPassengerItemSelected(passengerItem, orderInfo);\n            passengerItem.issued = isPassengerItemIssued(passengerItem, orderInfo);\n\n            if (passengerItem.selected) {\n              passengerItem.selectedDate = getPassengerItemSelectedDate(passengerItem, orderInfo);\n            } else {\n              passengerItem.selectedDate = passengerItem.dates[0];\n            }\n\n            if (passengerItem.issued) {\n              passengerItem.issuedDate = getPassengerItemIssuedDate(passengerItem, orderInfo);\n            }\n\n            return passengerItem;\n          });\n        });\n        vm.documentPatternsListByPassengers = vm.orderInfo.passengers.map(function (passenger) {\n          if (passenger.aeroexpressDocumentType) {\n            return _.findWhere(vm.service.documents, {\n              code: passenger.aeroexpressDocumentType\n            }).regexps;\n          } else {\n            return [];\n          }\n        });\n        $q.all(orderInfo.passengers.map(function (passenger) {\n          return backend.getAvailableDocumentsForAeroexpress({\n            birthDate: passenger.dateOfBirth,\n            departureDate: vm.service.items[0].dates[0]\n          });\n        })).then(function (resp) {\n          vm.availableDocumentsByOrderPassengers = resp.map(function (respItem) {\n            return respItem.documents;\n          });\n        });\n      }\n\n      if (orderInfo.extraPassengers) {\n        vm.extraPassengers = angular.copy(orderInfo.extraPassengers);\n        vm.optionsByExtraPassengers = vm.extraPassengers.map(getItemsForExtraPassenger);\n        vm.documentPatternsListByExtraPassengers = vm.extraPassengers.map(function () {\n          return [];\n        });\n      }\n    }\n  }, false, true);\n\n  function switchService() {\n    if (!vm.locked) {\n      vm.service.active = !vm.service.active;\n\n      if (!vm.service.active) {\n        backend.removeExtraService({\n          code: \"aeroexpress\"\n        });\n      }\n    }\n  }\n\n  function addExtraPassenger() {\n    vm.extraPassengers.push({});\n    vm.optionsByExtraPassengers.push(getItemsForExtraPassenger());\n    vm.availableDocumentsByExtraPassengers.push([]);\n  }\n\n  function removeExtraPassenger(num) {\n    vm.extraPassengers.splice(num, 1);\n    vm.optionsByExtraPassengers.splice(num, 1);\n    vm.availableDocumentsByExtraPassengers.splice(num, 1);\n  }\n\n  function getItemsForExtraPassenger(passengerData) {\n    return vm.service.items.map(function (item) {\n      var passengerItem = angular.copy(item);\n\n      if (passengerData) {\n        passengerItem.firstName = passengerData.firstName;\n        passengerItem.lastName = passengerData.lastName;\n        passengerItem.dateOfBirth = passengerData.dateOfBirth;\n        passengerItem.documentType = passengerData.documentType;\n        passengerItem.documentNumber = passengerData.documentNumber;\n      }\n\n      passengerItem.selected = isPassengerItemSelected(passengerItem, vm.orderInfo);\n      passengerItem.issued = isPassengerItemIssued(passengerItem, vm.orderInfo);\n\n      if (passengerItem.selected) {\n        passengerItem.selectedDate = getPassengerItemSelectedDate(passengerItem, vm.orderInfo);\n      } else {\n        passengerItem.selectedDate = passengerItem.dates[0];\n      }\n\n      if (passengerItem.issued) {\n        passengerItem.issuedDate = getPassengerItemIssuedDate(passengerItem, vm.orderInfo);\n      }\n\n      return passengerItem;\n    });\n  }\n\n  function documentTypeChangeHandler(passengerNum, isExtraPassenger) {\n    var selectedDoc = _.findWhere(vm.service.documents, {\n      code: isExtraPassenger ? vm.extraPassengers[passengerNum].aeroexpressDocumentType : vm.orderInfo.passengers[passengerNum].aeroexpressDocumentType\n    });\n\n    vm[isExtraPassenger ? \"documentPatternsListByExtraPassengers\" : \"documentPatternsListByPassengers\"][passengerNum] = selectedDoc.regexps;\n  }\n\n  function extraPassengerDateOfBirthChangeHandler(passengerNum) {\n    var dateOfBirth = vm.extraPassengers[passengerNum].dateOfBirth;\n    return backend.getAvailableDocumentsForAeroexpress({\n      birthDate: dateOfBirth,\n      departureDate: vm.service.items[0].dates[0]\n    }).then(function (resp) {\n      vm.availableDocumentsByExtraPassengers[passengerNum] = resp.documents;\n    });\n  }\n\n  function isAllPassengerItemDatesFree(freeDatesObj, availableDatesList) {\n    var isFree = true;\n\n    if (freeDatesObj) {\n      availableDatesList.forEach(function (date) {\n        if (!freeDatesObj[date]) {\n          isFree = false;\n        }\n      });\n    }\n\n    return isFree;\n  }\n\n  function isPassengerItemIssued(passengerItem, orderInfo) {\n    var orderAeroexpressService = _.findWhere(orderInfo.all_extra_services, {\n      code: \"aeroexpress\"\n    });\n\n    if (orderAeroexpressService && orderAeroexpressService.items && orderAeroexpressService.items.length) {\n      return !!_.findWhere(orderAeroexpressService.items, {\n        departure_code: passengerItem.departure_code,\n        arrival_code: passengerItem.arrival_code,\n        firstName: passengerItem.firstName,\n        lastName: passengerItem.lastName,\n        status: \"ISSUED\"\n      });\n    }\n\n    return false;\n  }\n\n  function isIssued(passengerItem) {\n    var orderAeroexpressService = _.findWhere(vm.orderInfo.all_extra_services, {\n      code: \"aeroexpress\"\n    });\n\n    if (!orderAeroexpressService) {\n      return;\n    }\n\n    var passenger = _.findWhere(orderAeroexpressService.items, {\n      firstName: passengerItem.firstName,\n      lastName: passengerItem.lastName\n    });\n\n    return !!passenger;\n  }\n\n  function getPassengerItemIssuedDate(passengerItem, orderInfo) {\n    var orderAeroexpressService = _.findWhere(orderInfo.all_extra_services, {\n      code: \"aeroexpress\"\n    });\n\n    if (orderAeroexpressService && orderAeroexpressService.items && orderAeroexpressService.items.length) {\n      return _.findWhere(orderAeroexpressService.items, {\n        departure_code: passengerItem.departure_code,\n        arrival_code: passengerItem.arrival_code,\n        firstName: passengerItem.firstName,\n        lastName: passengerItem.lastName,\n        status: \"ISSUED\"\n      }).departure_date;\n    }\n  }\n\n  function isPassengerItemSelected(passengerItem, orderInfo) {\n    var orderAeroexpressService = _.findWhere(orderInfo.editable_extra_services, {\n      code: \"aeroexpress\"\n    });\n\n    if (orderAeroexpressService && orderAeroexpressService.items && orderAeroexpressService.items.length) {\n      return !!_.findWhere(orderAeroexpressService.items, {\n        departure_code: passengerItem.departure_code,\n        arrival_code: passengerItem.arrival_code,\n        firstName: passengerItem.firstName,\n        lastName: passengerItem.lastName\n      });\n    }\n\n    return false;\n  }\n\n  function getPassengerItemSelectedDate(passengerItem, orderInfo) {\n    var orderAeroexpressService = _.findWhere(orderInfo.editable_extra_services, {\n      code: \"aeroexpress\"\n    });\n\n    if (orderAeroexpressService && orderAeroexpressService.items && orderAeroexpressService.items.length) {\n      return _.findWhere(orderAeroexpressService.items, {\n        departure_code: passengerItem.departure_code,\n        arrival_code: passengerItem.arrival_code,\n        firstName: passengerItem.firstName,\n        lastName: passengerItem.lastName\n      }).departure_date;\n    }\n  }\n\n  function isExtraPassengerFreeForAllDates(passengerNum) {\n    var dateOfBirth = moment(vm.extraPassengers[passengerNum].dateOfBirth, \"DD.MM.YYYY\"),\n        i,\n        j;\n\n    for (i = 0; i < vm.optionsByExtraPassengers[passengerNum].length; i++) {\n      for (j = 0; j < vm.optionsByExtraPassengers[passengerNum][i].dates.length; j++) {\n        //     5     -  \n        if (moment(vm.optionsByExtraPassengers[passengerNum][i].dates[j], \"DD.MM.YYYY\").subtract(backend.getParam(\"extraServices.aeMinChildAge\"), \"years\").isAfter(dateOfBirth)) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  }\n}\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\n\nangular.module('wes').component('nwBaggage', {\n  templateUrl: 'components/nw-baggage/nw-baggage.html',\n  controller: ['$element', '$scope', 'backend', 'utils', BaggageController],\n  controllerAs: 'vm',\n  bindings: {\n    service: '=service',\n    locked: '=locked'\n  }\n});\n\nfunction BaggageController($element, $scope, backend, utils) {\n  var vm = this,\n      passengersTableContainer = $element.find('div.passengersTableContainer');\n  vm.switchService = switchService;\n  vm.baggageCountChangeHandler = baggageCountChangeHandler;\n  vm.selectRoutePartPassenger = selectRoutePartPassenger;\n  vm.changeBaggageBySelect = changeBaggageBySelect;\n  vm.removeByPassenger = removeByPassenger;\n  vm.getSelectedPassengerRoutePartBaggage = getSelectedPassengerRoutePartBaggage;\n  vm.scrollToStart = scrollToStart;\n  vm.scrollToEnd = scrollToEnd;\n  vm.removePassengerFlightBaggage = removePassengerFlightBaggage;\n  vm.checkServiceRemovalProhibited = backend.checkServiceRemovalProhibited;\n  vm.canScrollRight = true;\n  vm.canScrollLeft = false;\n  vm.selectedRoutePartNum = 0;\n  vm.selectedPassenger = 0;\n  vm.optionsByRoutePartsAndPassengers = vm.service.routeParts.map(function (routePart) {\n    return routePart.availableExtraServicesByPassengersAndSubgroups.map(function (subgroups) {\n      return subgroups.map(function (items) {\n        return utils.createOptionsForUiSelect(items, {\n          title: backend.getAlias('web.extraServices.baggage.noneSelected')\n        });\n      });\n    });\n  });\n  $scope.$watch('vm.service.routeParts', function () {\n    /* jshint maxlen: 200 */\n    vm.selectedBaggageByRoutePartsAndPassengers = getSelectedBaggageByRoutePartsAndPassengers(vm.service.routeParts);\n    vm.selectedBaggageByRoutePartsAndPassengersView = angular.copy(vm.selectedBaggageByRoutePartsAndPassengers);\n  });\n  backend.addOrderInfoListener(function (orderInfo) {\n    vm.orderInfo = orderInfo;\n  }, false, true);\n  passengersTableContainer.on('scroll', mobileTableScrollHandler);\n\n  function switchService() {\n    if (!vm.locked && !backend.checkServiceRemovalProhibited('baggage')) {\n      vm.service.active = !vm.service.active;\n\n      if (!vm.service.active) {\n        backend.removeExtraService({\n          code: 'baggage'\n        });\n      }\n    }\n  }\n\n  function removeByPassenger(passengerNum) {\n    if (!vm.locked) {\n      backend.removeExtraService({\n        code: 'baggage',\n        passenger_id: vm.orderInfo.passengers[passengerNum].id\n      });\n    }\n  }\n\n  function baggageCountChangeHandler(subgroupNum, baggageItem, delta, passengerNum, routePartNum) {\n    if (!vm.locked) {\n      backend.modifyExtraService({\n        code: vm.service.code,\n        passenger_id: vm.orderInfo.passengers[passengerNum].id,\n        segment_id: vm.orderInfo.plainFlights[vm.service.routeParts[routePartNum].mainFlightNum].id,\n        subgroup: vm.service.subgroups[subgroupNum].code,\n        amount: (baggageItem.alreadySelectedCount || 0) + delta,\n        rfisc: baggageItem.rfisc\n      });\n    }\n  }\n\n  function getSelectedBaggageByRoutePartsAndPassengers(routeParts) {\n    return routeParts.map(function (routePart) {\n      return routePart.availableExtraServicesByPassengersAndSubgroups.map(function (subgroups) {\n        return subgroups.map(function (items) {\n          var selectedNum;\n          items.forEach(function (item, itemNum) {\n            if (item.amount) {\n              selectedNum = itemNum;\n            }\n          });\n          return selectedNum;\n        });\n      });\n    });\n  }\n\n  function selectRoutePartPassenger(routePartNum, passengerNum) {\n    vm.selectedRoutePartNum = routePartNum;\n    vm.selectedPassenger = passengerNum;\n  }\n\n  function changeBaggageBySelect(passengerNum, routePartNum, subgroupNum) {\n    /* jshint maxlen: 200 */\n    var selectedBaggageNum = vm.selectedBaggageByRoutePartsAndPassengers[routePartNum][passengerNum][subgroupNum],\n        selectedBaggage = vm.service.routeParts[routePartNum].availableExtraServicesByPassengersAndSubgroups[passengerNum][subgroupNum][selectedBaggageNum],\n        newBaggageNum = vm.selectedBaggageByRoutePartsAndPassengersView[routePartNum][passengerNum][subgroupNum],\n        newBaggage = vm.service.routeParts[routePartNum].availableExtraServicesByPassengersAndSubgroups[passengerNum][subgroupNum][newBaggageNum],\n        newParams = false;\n\n    if (!vm.locked) {\n      if (newBaggage) {\n        newParams = {\n          code: 'baggage',\n          passenger_id: newBaggage.passengerId,\n          segment_id: newBaggage.mainSegmentId,\n          subgroup: newBaggage.subgroupCode,\n          amount: 1,\n          rfisc: newBaggage.rfisc\n        };\n      }\n\n      if (newParams) {\n        backend.modifyExtraService(newParams);\n      } else if (selectedBaggage) {\n        backend.removeExtraService({\n          code: 'baggage',\n          passenger_id: selectedBaggage.passengerId,\n          segment_id: selectedBaggage.mainSegmentId,\n          subgroup: selectedBaggage.subgroupCode,\n          rfisc: selectedBaggage.rfisc\n        });\n      }\n    }\n  }\n\n  function getSelectedPassengerRoutePartBaggage(passengerNum, routePartNum) {\n    var count = 0,\n        cost = 0,\n        currency,\n        routePart = vm.service.routeParts[routePartNum],\n        subgroups = routePart.availableExtraServicesByPassengersAndSubgroups[passengerNum];\n\n    if (subgroups && subgroups.length) {\n      subgroups.forEach(function (items) {\n        items.forEach(function (item) {\n          if (item.amount) {\n            count += item.amount;\n          }\n\n          if (item.totalPrice) {\n            cost = Big(cost).plus(item.totalPrice).toFixed(2);\n            currency = item.currency;\n          }\n        });\n      });\n    }\n\n    if (count) {\n      return {\n        count: count,\n        cost: cost,\n        currency: currency\n      };\n    } else {\n      return false;\n    }\n  }\n\n  function scrollToStart() {\n    passengersTableContainer.scrollTo(0);\n  }\n\n  function scrollToEnd() {\n    passengersTableContainer.scrollTo(passengersTableContainer[0].scrollWidth);\n  }\n\n  function mobileTableScrollHandler() {\n    var scrollLeft = passengersTableContainer[0].scrollLeft,\n        scrollWidth = passengersTableContainer[0].scrollWidth,\n        clientWidth = passengersTableContainer[0].clientWidth,\n        scrollRight = scrollWidth - clientWidth - scrollLeft;\n    vm.canScrollRight = scrollRight !== 0;\n    vm.canScrollLeft = scrollLeft !== 0;\n    $scope.$apply();\n  }\n\n  function removePassengerFlightBaggage(passengerNum, flightNum) {\n    if (!vm.locked && !backend.checkServiceRemovalProhibited('baggage', passengerNum, flightNum)) {\n      backend.removeExtraService({\n        code: 'baggage',\n        passenger_id: vm.orderInfo.passengers[passengerNum].id,\n        segment_id: vm.orderInfo.plainFlights[flightNum].id\n      });\n    }\n  }\n}\n\n},{}],4:[function(require,module,exports){\n\"use strict\";\n\nangular.module(\"app\").component(\"nwEsPopup\", {\n  templateUrl: \"components/nw-es-popup/nw-es-popup.html\",\n  controller: \"nwMealPopupController\",\n  bindToController: true,\n  controllerAs: \"vm\",\n  bindings: {\n    locked: \"=\",\n    esCode: \"<\",\n    es: \"=\"\n  },\n  transclude: {\n    \"extra-service\": \"wrap\"\n  }\n});\nangular.module(\"app\").controller(\"nwMealPopupController\", [\"$scope\", \"backend\", \"fancyboxTools\", nwMealPopupController]);\n\nfunction nwMealPopupController($scope, backend, fancyboxTools) {\n  var vm = this;\n  var submitCallback = false;\n  vm.isSingleItemInInsurance = false;\n  vm.close = close;\n  vm.submit = submit;\n  vm.popupId = \"#nw-\" + vm.esCode + \"-popup\";\n  fancyboxTools.setOpenListener(\"nw-\" + vm.esCode + \"-popup\", function (link, params) {\n    var popup = angular.element(vm.popupId);\n    var popupWrapper = popup.parents(\".fancybox-wrap\"); //   ,    \n\n    if (!popupWrapper.hasClass(\"extra-service__popup\")) {\n      popupWrapper.addClass(\"extra-service__popup\");\n    }\n  });\n\n  function submit() {\n    if (submitCallback) {\n      submitCallback(true);\n      close();\n    }\n  }\n}\n\n},{}],5:[function(require,module,exports){\n\"use strict\";\n\nvar app = angular.module(\"app\");\napp.component(\"nwExtraServicesList\", {\n  templateUrl: \"components/nw-extra-services-list/nw-extra-services-list.html\",\n  controller: \"extraServicesListController\",\n  controllerAs: \"vm\",\n  bindings: {\n    es: \"=es\",\n    list: \"=list\",\n    availableBundlesByPassengerSegments: \"<\",\n    locked: \"=locked\"\n  }\n});\napp.controller(\"extraServicesListController\", [\"utils\", \"backend\", extraServicesListController]);\n\nfunction extraServicesListController(utils, backend) {\n  var vm = this;\n  vm.isCommonService = utils.isCommonServiceCode;\n  vm.switchInsurance = switchInsurance;\n  vm.orderInfo = backend.getOrderInfo(); //    ,    , \n  //     ,   modifyExtraServices\n\n  var insuranceES = _.findWhere(vm.es, {\n    code: \"insurance\"\n  });\n\n  vm.isSingleItemInInsurance = insuranceES && insuranceES.items.length === 1;\n\n  function switchInsurance() {\n    if (!vm.locked) {\n      insuranceES.active = !insuranceES.active;\n\n      if (insuranceES.active) {\n        if (insuranceES.items.length === 1) {\n          backend.modifyExtraService(getInsuranceSubmitParams(insuranceES.items[0]));\n        }\n      } else {\n        backend.removeExtraService({\n          code: insuranceES.onlineMode ? \"insuranceOnline\" : \"insurance\"\n        });\n      }\n    }\n  }\n\n  function getInsuranceSubmitParams(item, passenger_id) {\n    var params = {\n      code: \"insurance\",\n      ins: item.ins,\n      tins: item.tins\n    };\n\n    if (passenger_id) {\n      params.passenger_id = passenger_id;\n    }\n\n    if (insuranceES.onlineMode) {\n      params.code = \"insuranceOnline\";\n      params.productCode = item.productCode;\n    }\n\n    return params;\n  }\n}\n\n},{}],6:[function(require,module,exports){\n\"use strict\";\n\nangular.module(\"wes\").component(\"nwInsurance\", {\n  templateUrl: \"components/nw-insurance/nw-insurance.html\",\n  controller: [\"backend\", InsuranceController],\n  controllerAs: \"vm\",\n  bindings: {\n    service: \"=service\",\n    locked: \"=locked\"\n  }\n});\n\nfunction InsuranceController(backend) {\n  var vm = this;\n  vm.switchService = switchService;\n  vm.switchServiceItem = switchServiceItem;\n  vm.selectFirstAvailablePassengerFlight = selectFirstAvailablePassengerFlight;\n  vm.selectedFlight = null;\n  vm.orderInfo = backend.getOrderInfo();\n\n  function switchService() {\n    if (!vm.locked) {\n      vm.service.active = !vm.service.active;\n\n      if (vm.service.active) {\n        if (vm.service.items.length === 1) {\n          backend.modifyExtraService(getInsuranceSubmitParams(vm.service.items[0]));\n        }\n      } else {\n        backend.removeExtraService({\n          code: vm.service.onlineMode ? \"insuranceOnline\" : \"insurance\"\n        });\n      }\n    }\n  }\n\n  function switchServiceItem(itemNum, paxKey) {\n    if (!vm.locked) {\n      if (paxKey === \"common\") {\n        backend[vm.service.items[itemNum].selected ? \"modifyExtraService\" : \"removeExtraService\"](getInsuranceSubmitParams(vm.service.items[itemNum]));\n      } else {\n        backend[vm.service.itemsByPassengers[paxKey][itemNum].selected ? \"modifyExtraService\" : \"removeExtraService\"](getInsuranceSubmitParams(vm.service.itemsByPassengers[paxKey][itemNum], vm.orderInfo.passengers[paxKey].id));\n      }\n    }\n  }\n\n  function getInsuranceSubmitParams(item, passenger_id) {\n    var params = {\n      code: \"insurance\",\n      ins: item.ins,\n      tins: item.tins\n    };\n\n    if (passenger_id) {\n      params.passenger_id = passenger_id;\n    }\n\n    if (vm.service.onlineMode) {\n      params.code = \"insuranceOnline\";\n      params.productCode = item.productCode;\n    }\n\n    return params;\n  } //\tselect first available flight functionality\n\n\n  function selectFirstAvailablePassengerFlight() {\n    vm.selectedFlight = getFirstAvailableFlightNum();\n    console.log(vm.selectedFlight);\n  }\n\n  function getFirstAvailableFlightNum() {\n    var i;\n\n    for (i = 0; i < vm.orderInfo.plainFlights.length; i++) {\n      // vm.service.availableBySegments[i]\n      console.log(vm.service);\n\n      if (vm.service.availableBySegments[i]) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  function getFirstAvailablePassengerNum(flightNum) {\n    var i;\n\n    if (vm.service.availableByPassengerSegments) {\n      for (i = 0; i < vm.orderInfo.passengers.length; i++) {\n        if (vm.service.availableByPassengerSegments[i][flightNum]) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n}\n\n},{}],7:[function(require,module,exports){\n\"use strict\";\n\nvar app = angular.module(\"app\");\napp.component(\"nwMeal\", {\n  templateUrl: \"components/nw-meal/nw-meal.html\",\n  controller: [\"$scope\", \"$element\", \"backend\", \"utils\", MealController],\n  controllerAs: \"vm\",\n  bindings: {\n    service: \"=service\",\n    locked: \"=locked\",\n    closePopup: \"&\"\n  }\n});\n\nfunction MealController($scope, $element, backend, utils) {\n  var vm = this,\n      passengersTableContainer = $element.find(\"div.passengersTableContainer\");\n  vm.switchService = switchService;\n  vm.selectFlightPassenger = selectFlightPassenger;\n  vm.selectFirstAvailablePassengerFlight = selectFirstAvailablePassengerFlight;\n  vm.mealCountChangeHandler = mealCountChangeHandler;\n  vm.removePassengerFlightMeal = removePassengerFlightMeal;\n  vm.getSelectedPassengerFlightMeal = getSelectedPassengerFlightMeal;\n  vm.scrollToStart = scrollToStart;\n  vm.scrollToEnd = scrollToEnd;\n  vm.hasAlias = backend.hasAlias;\n  vm.getAvailablePassengersCount = utils.getAvailablePassengersCount;\n  vm.checkServiceRemovalProhibited = backend.checkServiceRemovalProhibited;\n  vm.closePopup = vm.closePopup();\n  vm.canScrollRight = true;\n  vm.canScrollLeft = false;\n  vm.selectedFlight = 0;\n  vm.selectedPassenger = 0;\n\n  if (backend.getParam(\"site.externalStorageBaseUrl\")) {\n    vm.mealImagesPath = backend.getParam(\"site.externalStorageBaseUrl\") + \"/img/content/meal\";\n  } else {\n    vm.mealImagesPath = \"./themes/websky/assets/static/img/content/meal\";\n  }\n\n  backend.addOrderInfoListener(function (orderInfo) {\n    vm.orderInfo = orderInfo;\n  }, false, true);\n  $scope.$watch(\"vm.service\", function () {\n    updateMealMenu();\n  });\n  passengersTableContainer.on(\"scroll\", mobileTableScrollHandler);\n\n  if (vm.service.active) {\n    updateMealMenu();\n  }\n\n  function switchService() {\n    if (!vm.locked && !backend.checkServiceRemovalProhibited(\"meal\")) {\n      vm.service.active = !vm.service.active;\n\n      if (vm.service.active) {\n        selectFirstAvailablePassengerFlight();\n      } else {\n        backend.removeExtraService({\n          code: \"meal\"\n        });\n      }\n\n      vm.closePopup();\n    }\n  }\n\n  function selectFlightPassenger(flightNum, passengerNum) {\n    vm.selectedFlight = flightNum;\n    vm.selectedPassenger = passengerNum;\n    updateMealMenu();\n  }\n\n  function selectFirstAvailablePassengerFlight() {\n    vm.selectedFlight = getFirstAvailableFlightNum();\n    vm.selectedPassenger = getFirstAvailablePassengerNum(vm.selectedFlight);\n    updateMealMenu();\n  }\n\n  function updateMealMenu() {\n    vm.mealMenu = vm.service.itemsByPassengerSegments[vm.selectedPassenger][vm.selectedFlight];\n    vm.mealMenuSubgroup = false;\n  }\n\n  function mealCountChangeHandler(subgroupNum, mealItem, delta) {\n    if (!vm.locked) {\n      backend.modifyExtraService({\n        code: \"meal\",\n        passenger_id: vm.orderInfo.passengers[vm.selectedPassenger].id,\n        segment_id: vm.orderInfo.plainFlights[vm.selectedFlight].id,\n        subgroup: vm.service.subgroups[subgroupNum],\n        amount: (mealItem.alreadySelectedCount || 0) + delta,\n        rfisc: mealItem.rfisc\n      });\n    }\n  }\n\n  function removePassengerFlightMeal(passengerNum, flightNum) {\n    if (!vm.locked && !backend.checkServiceRemovalProhibited(\"meal\", passengerNum, flightNum)) {\n      backend.removeExtraService({\n        code: \"meal\",\n        passenger_id: vm.orderInfo.passengers[passengerNum].id,\n        segment_id: vm.orderInfo.plainFlights[flightNum].id\n      });\n    }\n  }\n\n  function getSelectedPassengerFlightMeal(passengerNum, flightNum) {\n    var count = 0,\n        cost = 0,\n        currency;\n\n    if (vm.orderInfo.groupedEditableExtraServices && vm.orderInfo.groupedEditableExtraServices.meal && vm.orderInfo.groupedEditableExtraServices.meal[passengerNum] && vm.orderInfo.groupedEditableExtraServices.meal[passengerNum][flightNum] && vm.orderInfo.groupedEditableExtraServices.meal[passengerNum][flightNum].length) {\n      vm.orderInfo.groupedEditableExtraServices.meal[passengerNum][flightNum].forEach(function (item) {\n        if (item.amount) {\n          count += item.amount;\n        }\n\n        if (item.totalPrice) {\n          cost = Big(cost).plus(item.totalPrice).toFixed(2);\n          currency = item.currency;\n        }\n      });\n    }\n\n    if (count) {\n      return {\n        count: count,\n        cost: cost,\n        currency: currency\n      };\n    } else {\n      return false;\n    }\n  }\n\n  function scrollToStart() {\n    passengersTableContainer.scrollTo(0);\n  }\n\n  function scrollToEnd() {\n    passengersTableContainer.scrollTo(passengersTableContainer[0].scrollWidth);\n  }\n\n  function mobileTableScrollHandler() {\n    var scrollLeft = passengersTableContainer[0].scrollLeft,\n        scrollWidth = passengersTableContainer[0].scrollWidth,\n        clientWidth = passengersTableContainer[0].clientWidth,\n        scrollRight = scrollWidth - clientWidth - scrollLeft;\n    vm.canScrollRight = scrollRight !== 0;\n    vm.canScrollLeft = scrollLeft !== 0;\n    $scope.$apply();\n  }\n\n  function getFirstAvailableFlightNum() {\n    var i;\n\n    for (i = 0; i < vm.orderInfo.plainFlights.length; i++) {\n      if (vm.service.availableBySegments[i]) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  function getFirstAvailablePassengerNum(flightNum) {\n    var i;\n\n    if (vm.service.availableByPassengerSegments) {\n      for (i = 0; i < vm.orderInfo.passengers.length; i++) {\n        if (vm.service.availableByPassengerSegments[i][flightNum]) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n}\n\n},{}],8:[function(require,module,exports){\n\"use strict\";\n\nangular.module(\"app\").component(\"nwPopupAeroexpressSchedule\", {\n  templateUrl: \"components/nw-popup-aeroexpress-schedule/nw-popup-aeroexpress-schedule.html\",\n  controller: [\"backend\", \"fancyboxTools\", PopupAeroexpressScheduleController],\n  controllerAs: \"vm\"\n});\n\nfunction PopupAeroexpressScheduleController(backend, fancyboxTools) {\n  var vm = this;\n  vm.close = close; //   \n\n  function close() {\n    fancyboxTools.openHandler('nw-aeroexpress-popup');\n  }\n\n  fancyboxTools.setOpenListener(\"popupAeroexpressSchedule\", function (link) {\n    var date = link.attr(\"data-date\"),\n        arrivalCode = link.attr(\"data-arrival-code\"),\n        departureCode = link.attr(\"data-departure-code\");\n    vm.loading = true;\n    $('.fancybox-overlay').on('click', close);\n    backend.aeroexpressSchedule({\n      date: date,\n      arrival: arrivalCode,\n      departure: departureCode\n    }).then(function (resp) {\n      vm.loading = false;\n      vm.arrival = link.attr(\"data-arrival\");\n      vm.departure = link.attr(\"data-departure\");\n      vm.schedule = resp.schedule;\n    }, function () {\n      vm.loading = false;\n    });\n  });\n}\n\n},{}],9:[function(require,module,exports){\n\"use strict\";\n\nangular.module(\"app\").component(\"nwSeat\", {\n  templateUrl: \"components/nw-seat/nw-seat.html\",\n  controller: [\"$scope\", \"$element\", \"$timeout\", \"redirect\", \"backend\", \"utils\", SeatController],\n  controllerAs: \"vm\",\n  bindings: {\n    service: \"=service\",\n    locked: \"=locked\",\n    closePopup: \"&\"\n  }\n});\n\nfunction SeatController($scope, $element, $timeout, redirect, backend, utils) {\n  var vm = this,\n      passengersTableContainer = $element.find(\"div.passengersTableContainer\"),\n      seatMapContainerTopPosition = \"0px\";\n  vm.switchService = switchService;\n  vm.selectFlightPassenger = selectFlightPassenger;\n  vm.selectFirstAvailablePassengerFlight = selectFirstAvailablePassengerFlight;\n  vm.setPassengerFlightSeat = setPassengerFlightSeat;\n  vm.closePopup = vm.closePopup();\n  vm.hasAlias = backend.hasAlias;\n  vm.scrollToStart = scrollToStart;\n  vm.scrollToEnd = scrollToEnd;\n  vm.getAvailablePassengersCount = utils.getAvailablePassengersCount;\n  vm.getAvailablePassengersCountWrap = getAvailablePassengersCountWrap;\n  vm.removePassengerFlightSeat = removePassengerFlightSeat;\n  vm.checkServiceRemovalProhibited = backend.checkServiceRemovalProhibited;\n  vm.canScrollRight = true;\n  vm.canScrollLeft = false;\n  vm.isBookingScreen = redirect.isBookingScreen();\n  backend.addOrderInfoListener(function (orderInfo) {\n    vm.orderInfo = orderInfo;\n  }, false, true);\n  updateSunInfoByFlights();\n  passengersTableContainer.on(\"scroll\", mobileTableScrollHandler);\n  vm.service.active = true;\n\n  if (vm.service.active) {\n    selectFirstAvailablePassengerFlight();\n  }\n\n  function switchService() {\n    if (!vm.locked && !backend.checkServiceRemovalProhibited(\"seat\")) {\n      vm.service.active = !vm.service.active;\n\n      if (vm.service.active) {\n        selectFirstAvailablePassengerFlight();\n      } else {\n        vm.modifyError = false;\n        backend.removeExtraService({\n          code: \"seat\"\n        }).then(clearFlightPassenger, function (resp) {\n          if (resp.error) {\n            vm.modifyError = resp.error;\n          }\n        });\n      }\n    }\n\n    vm.closePopup();\n  }\n\n  function clearFlightPassenger() {\n    vm.seatMap = false;\n    vm.selectedFlight = -1;\n    vm.selectedPassenger = -1;\n  }\n\n  function setSeatMapContainerTopPosition(reset) {\n    if (reset) {\n      seatMapContainerTopPosition = \"0px\";\n    } else {\n      seatMapContainerTopPosition = jQuery(\"#seatMapCont .mCSB_container\").css(\"top\");\n    }\n  }\n\n  function selectFlightPassenger(flightNum, passengerNum) {\n    //           \n    setSeatMapContainerTopPosition(vm.selectedFlight !== flightNum);\n    vm.selectedFlight = flightNum;\n    vm.selectedPassenger = passengerNum;\n    updateSeatMap();\n  }\n\n  function selectFirstAvailablePassengerFlight() {\n    // vm.selectedFlight = getFirstAvailableFlightNum();\n    // vm.selectedPassenger = getFirstAvailablePassengerNum(vm.selectedFlight);\n    // by default select first flight and first passenger\n    vm.selectedFlight = 0;\n    vm.selectedPassenger = 0;\n    updateSeatMap();\n  }\n\n  function updateSeatMap() {\n    if (vm.selectedPassenger !== -1 && vm.selectedFlight !== -1) {\n      vm.loadingSeatMap = true;\n      vm.seatMapError = false;\n      backend.seatMap(vm.orderInfo.passengers[vm.selectedPassenger].id, vm.orderInfo.plainFlights[vm.selectedFlight].id).then(function (resp) {\n        vm.seatMap = resp;\n        vm.loadingSeatMap = false;\n        $timeout(function () {\n          jQuery(\"#seatMapCont .mCSB_container\").css(\"top\", seatMapContainerTopPosition);\n        });\n      }, function (resp) {\n        vm.seatMapError = resp.error;\n        vm.loadingSeatMap = false;\n      });\n    }\n  }\n\n  function setPassengerFlightSeat(chair, cabinAllowed, rowNumber) {\n    if (!vm.locked) {\n      if (chair.available && cabinAllowed) {\n        setSeatMapContainerTopPosition();\n        vm.modifyError = false;\n        backend.modifyExtraService({\n          code: \"seat\",\n          passenger_id: vm.orderInfo.passengers[vm.selectedPassenger].id,\n          segment_id: vm.orderInfo.plainFlights[vm.selectedFlight].id,\n          value: rowNumber + chair.number,\n          subgroup: vm.service.commonSubgroup,\n          rfisc: chair.rfisc || \"\"\n        }).then(updateSeatMap, function (resp) {\n          if (resp.error) {\n            vm.modifyError = resp.error;\n          }\n        });\n      }\n    }\n  }\n\n  function updateSunInfoByFlights() {\n    vm.sunInfoByFlights = [];\n    vm.orderInfo.plainFlights.forEach(function (flight, flightNum) {\n      backend.sunInfo(flight.origincity, flight.departuredate, flight.departuretime, flight.destinationcity, flight.arrivaldate, flight.arrivaltime).then(function (resp) {\n        vm.sunInfoByFlights[flightNum] = resp;\n      });\n    });\n  }\n\n  function getFirstAvailableFlightNum() {\n    var i;\n\n    for (i = 0; i < vm.orderInfo.plainFlights.length; i++) {\n      // vm.service.availableBySegments[i]\n      if (vm.service.availableBySegments[i]) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  function getFirstAvailablePassengerNum(flightNum) {\n    var i;\n\n    if (vm.service.availableByPassengerSegments) {\n      for (i = 0; i < vm.orderInfo.passengers.length; i++) {\n        if (vm.service.availableByPassengerSegments[i][flightNum]) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n\n  function scrollToStart() {\n    passengersTableContainer.scrollTo(0);\n  }\n\n  function scrollToEnd() {\n    passengersTableContainer.scrollTo(passengersTableContainer[0].scrollWidth);\n  }\n\n  function mobileTableScrollHandler() {\n    var scrollLeft = passengersTableContainer[0].scrollLeft,\n        scrollWidth = passengersTableContainer[0].scrollWidth,\n        clientWidth = passengersTableContainer[0].clientWidth,\n        scrollRight = scrollWidth - clientWidth - scrollLeft;\n    vm.canScrollRight = scrollRight !== 0;\n    vm.canScrollLeft = scrollLeft !== 0;\n    $scope.$apply();\n  }\n\n  function getAvailablePassengersCountWrap(availableByPassengerSegments) {\n    var count = utils.getAvailablePassengersCount(availableByPassengerSegments);\n    return count + vm.orderInfo.passengers.filter(function (pax) {\n      return !pax.hasSeats;\n    }).length;\n  }\n\n  function removePassengerFlightSeat(passengerNum, flightNum) {\n    if (!vm.locked && !backend.checkServiceRemovalProhibited(\"seat\", passengerNum, flightNum)) {\n      vm.modifyError = false;\n      backend.removeExtraService({\n        code: \"seat\",\n        passenger_id: vm.orderInfo.passengers[passengerNum].id,\n        segment_id: vm.orderInfo.plainFlights[flightNum].id\n      }).then(function () {\n        if (vm.selectedFlight === flightNum) {\n          updateSeatMap();\n        }\n      }, function (resp) {\n        if (resp.error) {\n          vm.modifyError = resp.error;\n        }\n      });\n    }\n  }\n}\n\n},{}],10:[function(require,module,exports){\n\"use strict\";\n\nvar app = angular.module('app');\napp.component('orderWithEs', {\n  templateUrl: 'components/order-with-es/order-with-es.html',\n  controller: 'orderWithEsController',\n  controllerAs: 'vm',\n  transclude: {\n    'extra-services': 'nwExtraServicesList',\n    'payment': 'div'\n  },\n  bindings: {\n    orderInfo: '='\n  }\n});\napp.controller('orderWithEsController', ['$scope', '$window', '$timeout', 'backend', 'utils', 'redirect', 'fancyboxTools', 'uniqueTabIdGenerator', orderWithEsController]);\n\nfunction orderWithEsController($scope, $window, $timeout, backend, utils, redirect, fancyboxTools, uniqueTabIdGenerator) {\n  var vm = this;\n  vm.loading = true;\n  vm.errorMessage = false;\n  vm.choosePayMethodFailMsg = false;\n  vm.tabId = uniqueTabIdGenerator();\n  vm.openExchange = redirect.goToExchange;\n  vm.openRefund = redirect.goToRefund;\n  vm.openAddServices = redirect.goToAddServices;\n  vm.suffixCount = utils.suffixCount;\n  vm.retryPayment = retryPayment;\n  vm.bindOrder = bindOrder;\n  vm.clearSession = clearSession;\n  vm.newBooking = newBooking;\n  $scope.$on(\"popupChoosePayMethodChoosePayMethodFailMsg\", function (event, data) {\n    vm.choosePayMethodFailMsg = data;\n  });\n  $scope.$on(\"popupChoosePayMethodPending\", function (event, data) {\n    vm.popupChoosePayMethodPending = data;\n  });\n\n  vm.$onInit = function () {\n    var resultParam = utils.getParamFromLocation(\"result\");\n\n    if (resultParam === \"success\") {\n      if (vm.orderInfo.header && (vm.orderInfo.header.status === \"being_paid\" || vm.orderInfo.header.status === \"being_paid_for_exchange\")) {\n        backend.waitPayment(vm.orderInfo.header.regnum, vm.orderInfo.header.lastName).then(function () {\n          $window.location = \"./order?pnr=\" + vm.orderInfo.header.regnum + \"&lastName=\" + vm.orderInfo.header.lastName + \"&result=success\";\n          return;\n        }, function () {\n          vm.loading = false;\n        });\n      } else {\n        vm.loading = false;\n      }\n    } else {\n      //       \n      //      \n      if (!vm.orderInfo.hasFailedServices && vm.orderInfo.paymentRedirectTo) {\n        vm.showPaymentFrame = true;\n      }\n\n      vm.loading = false;\n    }\n\n    if (vm.orderInfo.hasFailedServices && !resultParam && vm.orderInfo.header && (vm.orderInfo.header.status === \"being_paid\" || vm.orderInfo.header.status === \"booked\")) {\n      $timeout(function () {\n        fancyboxTools.openHandler(\"popupRemovedServicesWarningByOrder\", false, {\n          submitCallback: function submitCallback() {\n            if (vm.orderInfo.paymentRedirectTo) {\n              vm.showPaymentFrame = true;\n            }\n\n            vm.ignoreFailedServices = true;\n          },\n          disableOutsideCloseClick: true\n        });\n      });\n    }\n\n    if (backend.getParam(\"ffp.enable\") && (vm.orderInfo.hasBonusCard || vm.orderInfo.ffpSumm)) {\n      backend.ffpBonus().then(function (resp) {\n        vm.ffpBonus = resp.total || 0;\n      });\n    }\n  };\n\n  function retryPayment(removeInsuranceAeroexpress) {\n    vm.loading = true;\n    backend.retryRegister(removeInsuranceAeroexpress).then(function (resp) {\n      if (resp.pnr && resp.lastName) {\n        $window.location = \"./order?pnr=\" + resp.pnr + \"&lastName=\" + resp.lastName;\n      } else if (resp.eraseAeroexpressBecauseOfCurrency || resp.eraseInsuranceBecauseOfCurrency) {\n        fancyboxTools.openHandler(\"popupChangeCurrencyError\", false, {\n          eraseAeroexpressBecauseOfCurrency: resp.eraseAeroexpressBecauseOfCurrency,\n          eraseInsuranceBecauseOfCurrency: resp.eraseInsuranceBecauseOfCurrency,\n          mode: \"retryRegister\",\n          submitCallback: retryPayment\n        });\n      }\n\n      vm.loading = false;\n    }, function (resp) {\n      vm.loading = false;\n      vm.errorMessage = resp.error;\n    });\n  }\n\n  function bindOrder() {\n    if (!vm.orderInfo.header || !vm.orderInfo.header.regnum || !vm.orderInfo.header.lastName) {\n      return;\n    }\n\n    vm.loading = true;\n    backend.bindOrder(vm.orderInfo.header.regnum, vm.orderInfo.header.lastName).then(function () {\n      vm.loading = false;\n      vm.orderInfo.bindAlowed = false;\n      vm.showBindOrderSuccessMessage = true;\n      $timeout(function () {\n        vm.showBindOrderSuccessMessage = false;\n      }, 10000);\n    }, function () {\n      vm.loading = false;\n      vm.showBindOrderFailMessage = true;\n      $timeout(function () {\n        vm.showBindOrderFailMessage = false;\n      }, 10000);\n    });\n  }\n\n  function clearSession() {\n    backend.clearSession().then(function () {\n      redirect.goToSearchOrder();\n    });\n  }\n\n  function newBooking() {\n    backend.clearLastSearchParams().then(function () {\n      $window.location = backend.getAlias(\"web.site.firstStepUrl\");\n    });\n  }\n}\n\n},{}],11:[function(require,module,exports){\n\"use strict\";\n\nvar app = angular.module('app');\napp.directive('replaceWith', function () {\n  return {\n    scope: false,\n    controllerAs: 'replaceWith',\n    bindToController: true,\n    scopeAs: 'vm',\n    controller: 'isRouteController'\n  };\n});\napp.controller('isRouteController', ['$scope', 'backend', '$location', isRouteController]);\n\nfunction isRouteController($scope, backend, $location) {\n  var vm = $scope.$parent.vm;\n  vm.originalBrands = false;\n  vm.needToRestoreBrandsInfo = false;\n  backend.ready.then(function () {\n    try {\n      var redefineRules = JSON.parse(backend.getAlias('web.brandConfig.redefine'));\n    } catch (e) {\n      console.error('redefine rules parse error', e);\n    }\n\n    vm.redefineRules = redefineRules;\n    $scope.$watch(angular.bind(this, function () {\n      return vm.selectedVariantsInfo;\n    }), restoreBrandsInfo);\n    $scope.$watch(angular.bind(this, function () {\n      return vm.searchResult;\n    }), function (newSearchResult) {\n      if ($location.path() === '/search-order') {\n        return;\n      }\n\n      onNewSearchResult(newSearchResult);\n    });\n    $scope.$watch(angular.bind(this, function () {\n      if (vm.orderInfo) {\n        return vm.orderInfo.flights;\n      }\n    }), function (newFlights) {\n      onNewSearchOrderFlights(newFlights);\n    });\n  });\n\n  function onNewSearchOrderFlights(flights) {\n    if (!flights) {\n      return;\n    }\n\n    _.forEach(flights, function (flightSegment) {\n      _.forEach(flightSegment.flights, function (userFlight) {\n        var origin = userFlight.originport ? userFlight.originport : userFlight.origincity;\n        var destination = userFlight.destinationport ? userFlight.destinationport : userFlight.destinationcity;\n        var redefineBrands = false;\n\n        _.forEach(vm.redefineRules, function (redefineRule) {\n          _.forEach(redefineRule.routes, function (flight) {\n            if (origin === flight.from && destination === flight.to || flight.from === destination && flight.to === origin) {\n              console.log('we redefine some rules here, check the replacWith directive');\n              redefineBrands = true;\n              var flightBrand = {\n                brand: userFlight.brand,\n                brandAvailableProps: userFlight.brandAvailableProps,\n                brandUnavailableProps: userFlight.brandUnavailableProps,\n                brandPaidProps: userFlight.brandPaidProps\n              };\n              var originalBrands = backend.getBrandConfig();\n              var originalBrand = originalBrands.filter(function (brand) {\n                return brand.code === flightBrand.brand;\n              })[0];\n\n              _.forEach(redefineRule.brands, function (brand) {\n                if (flightBrand.brand === brand.brand) {\n                  var available = [];\n                  var unavailable = [];\n                  var paid = [];\n\n                  _.forEach(brand.props, function (prop) {\n                    switch (prop.available) {\n                      case 'yes':\n                        userFlight.brandAvailableProps.push(prop.name);\n                        break;\n\n                      case 'no':\n                        userFlight.brandUnavailableProps.push(prop.name);\n                        break;\n\n                      case 'paid':\n                        userFlight.brandPaidProps.push(prop.name);\n                        break;\n\n                      default:\n                        break;\n                    }\n                  });\n                }\n              });\n            }\n          });\n        });\n      });\n    });\n  }\n\n  function onNewSearchResult(newSearchResult) {\n    vm.needToRestoreBrandsInfo = false;\n\n    if (newSearchResult && typeof vm.originalBrands === 'boolean') {\n      //    \n      // ..       js     \n      //        \n      //     \n      vm.originalBrands = angular.copy(backend.getBrandConfig());\n    }\n\n    var replaceInfo = false;\n\n    if (needToRedefine(newSearchResult)) {\n      replaceInfo = true;\n    }\n\n    if (replaceInfo) {\n      replaceInfoInBrandList(newSearchResult.brandsList);\n    } else {\n      if (typeof vm.originalBrands !== 'boolean' && newSearchResult.brandsList) {\n        //   \n        newSearchResult.brandsList = newSearchResult.brandsList.map(function (e, i) {\n          return vm.originalBrands.filter(function (item) {\n            return item.code === e.code;\n          })[0];\n        });\n        vm.needToRestoreBrandsInfo = true;\n      }\n    }\n  }\n\n  function needToRedefine(newSearchResult) {\n    var needRedefine = false;\n\n    _.forEach(vm.redefineRules, function (redefineRule) {\n      _.forEach(redefineRule.routes, function (flight) {\n        _.forEach(newSearchResult.segmentRows, function (segment) {\n          _.forEach(segment, function (segmentFlight) {\n            //     ,   \n            var origin = segmentFlight.flightsInfo.originport ? segmentFlight.flightsInfo.originport : segmentFlight.flightsInfo.origincity;\n            var destination = segmentFlight.flightsInfo.destinationport ? segmentFlight.flightsInfo.destinationport : segmentFlight.flightsInfo.destinationcity;\n\n            if (origin === flight.from && destination === flight.to || origin === flight.to && destination === flight.from) {\n              needRedefine = true;\n            }\n          });\n        });\n      });\n    });\n\n    return needRedefine;\n  }\n\n  function replaceInfoInBrandList(brandsList) {\n    _.forEach(vm.redefineRules, function (rules) {\n      _.forEach(rules.brands, function (replaceWithBrand) {\n        _.forEach(brandsList.slice(), function (brand) {\n          if (brand.code === replaceWithBrand.brand) {\n            replaceBrandInfo(brand, replaceWithBrand);\n          }\n        });\n      });\n    });\n  }\n\n  function replaceBrandInfo(brand, replaceWithBrand) {\n    console.log('we redefine some rules here, head to web.brandConfig.redefine');\n    console.log(brand, replaceWithBrand);\n\n    _.forEach(brand.props, function (brandProp) {\n      if (replaceWithBrand.props[brandProp.code]) {\n        _.extend(brandProp, replaceWithBrand.props[brandProp.code]);\n      }\n    });\n  }\n\n  function restoreBrandsInfo() {\n    if (!vm.selectedVariantsInfo) {\n      return;\n    }\n\n    if (!vm.needToRestoreBrandsInfo) {\n      return;\n    }\n\n    console.log('restoreBrandsInfo'); // console.log(vm.selectedVariantsInfo);\n    // console.log(vm.originalBrands);\n\n    _.forEach(vm.selectedVariantsInfo, rearrangeBrandProps);\n  }\n\n  function rearrangeBrandProps(selectedVariant) {\n    var originalBrand = getOriginalBrand(selectedVariant.brand);\n    var availableProps = [];\n    var paidProps = [];\n    var unavailableProps = [];\n\n    _.forEach(originalBrand.props, function (prop) {\n      switch (prop.available) {\n        case 'yes':\n          if (prop.shortDesc) {\n            availableProps.push(prop.shortDesc);\n          } else {\n            availableProps.push(prop.name);\n          }\n\n          break;\n\n        case 'paid':\n          paidProps.push(prop.name);\n          break;\n\n        case 'no':\n          unavailableProps.push(prop.name);\n          break;\n\n        default:\n          return;\n      }\n    });\n\n    selectedVariant.brandAvailableProps = availableProps.slice();\n    selectedVariant.brandPaidProps = paidProps.slice();\n    selectedVariant.brandUnavailableProps = unavailableProps.slice();\n  }\n\n  function getOriginalBrand(brandCode) {\n    return vm.originalBrands.filter(function (brand) {\n      return brand.code === brandCode;\n    })[0];\n  }\n}\n\n},{}],12:[function(require,module,exports){\n\"use strict\";\n\nvar lvovich = require('lvovich/dist/lvovich.min');\n\nangular.module('app').filter('toCity', function () {\n  return function (city) {\n    return ' ' + lvovich.cityTo(city);\n  };\n});\n\n},{\"lvovich/dist/lvovich.min\":1}],13:[function(require,module,exports){\n\"use strict\";\n\nrequire(\"./screens/add-services/AddServicesScreenController\");\n\nrequire(\"./screens/search-order/search-order\");\n\nrequire(\"./directives/replaceWith\");\n\nrequire(\"./components/nw-es-popup/nw-es-popup\");\n\nrequire(\"./components/order-with-es/order-with-es\");\n\nrequire(\"./components/nw-extra-services-list/nw-extra-services-list\");\n\nrequire(\"./components/nw-meal/nw-meal\");\n\nrequire(\"./components/nw-seat/nw-seat\");\n\nrequire(\"./components/nw-insurance/nw-insurance\");\n\nrequire(\"./components/nw-aeroexpress/nw-aeroexpress\");\n\nrequire(\"./components/nw-popup-aeroexpress-schedule/nwPopupAeroexpressSchedule\");\n\nrequire(\"./components/nw-baggage/nw-baggage\");\n\nrequire(\"./filters/toCity\"); // TODO: remove it!!\n\n\nangular.module(\"app\").config([\"$compileProvider\", function ($compileProvider) {\n  $compileProvider.debugInfoEnabled(true);\n}]);\nangular.module(\"app\").run([\"$rootScope\", \"redirect\", \"backend\", function ($rootScope, redirect, backend) {\n  $rootScope.$on(\"$locationChangeStart\", function (e) {\n    var href = location.href.split(\"#\")[1];\n    href = href.split(\"/\");\n    var route = href[1],\n        pnr = href[2],\n        lastName = href[3];\n\n    if (route === \"add-services\" && pnr && lastName) {\n      lastName = decodeURIComponent(lastName);\n      redirect.goToSearchOrder(pnr, lastName);\n    }\n  });\n}]);\n\n},{\"./components/nw-aeroexpress/nw-aeroexpress\":2,\"./components/nw-baggage/nw-baggage\":3,\"./components/nw-es-popup/nw-es-popup\":4,\"./components/nw-extra-services-list/nw-extra-services-list\":5,\"./components/nw-insurance/nw-insurance\":6,\"./components/nw-meal/nw-meal\":7,\"./components/nw-popup-aeroexpress-schedule/nwPopupAeroexpressSchedule\":8,\"./components/nw-seat/nw-seat\":9,\"./components/order-with-es/order-with-es\":10,\"./directives/replaceWith\":11,\"./filters/toCity\":12,\"./screens/add-services/AddServicesScreenController\":14,\"./screens/search-order/search-order\":15}],14:[function(require,module,exports){\n\"use strict\";\n'use strict';\n\nangular.module('app').controller('AddServicesScreenController', ['$scope', '$routeParams', '$window', 'redirect', 'backend', 'utils', 'fancyboxTools', function ($scope, $routeParams, $window, redirect, backend, utils, fancyboxTools) {\n  var vm = this;\n  vm.loading = true;\n  vm.searchOrderLoading = true;\n  vm.orderServicesLoading = true;\n  vm.openOrder = redirect.goToSearchOrder;\n  vm.submitPayment = submitPayment;\n  vm.paymentFormChangeHandler = paymentFormChangeHandler;\n  vm.reloadPage = reloadPage;\n  vm.clearSession = clearSession;\n  vm.swithcSubmitButtonHoverState = swithcSubmitButtonHoverState;\n  $scope.$on('plasticCardForPaymentChangeEvent', function (event, data) {\n    vm.card = data;\n  });\n  backend.ready.then(function () {\n    angular.element('title').text(backend.getAliasWithPrefix('web.pageTitle.', 'addServices'));\n    vm.loading = false;\n    backend.clearOrderInfoListeners();\n    backend.clearUpdateOrderServicesListeners();\n    backend.addOrderInfoListener(function (orderInfo) {\n      vm.orderInfo = orderInfo;\n    });\n    backend.addUpdateOrderServicesListener(function (resp) {\n      vm.orderInfo = resp[1];\n      vm.priceVariant = resp[2];\n      vm.isFreePricevariant = utils.isFreePricevariant(resp[2]);\n\n      if (vm.isFreePricevariant) {\n        vm.showNeedSelectPaymentFormMesage = false;\n      }\n\n      vm.es = utils.reformatAvailableExtraServices(resp[0], vm.orderInfo, vm.es);\n      vm.esList = utils.getAvailableExtraServicesList(resp[0], vm.es);\n      vm.searchOrderLoading = false;\n      vm.orderServicesLoading = false;\n\n      if (backend.getParam('ffp.enable') && (vm.orderInfo.hasBonusCard || vm.orderInfo.ffpSumm)) {\n        backend.ffpBonus().then(function (resp) {\n          vm.ffpBonus = resp.total || 0;\n        });\n      }\n    }, function (resp) {\n      vm.searchOrderLoading = false;\n      vm.orderServicesLoading = false;\n      vm.errorMessage = resp.error;\n    });\n    backend.updateOrderServices(true).then(function () {\n      vm.loading = true;\n      backend.switchDefaultSelectedServices(vm.esList, vm.es, vm.orderInfo).then(function () {\n        vm.loading = false;\n      }, function (resp) {\n        vm.errorMessage = resp.error;\n        vm.loading = false;\n      });\n    });\n    backend.addExtraServiceListener(function (state) {\n      vm.modifyServicesLoading = !state;\n      vm.orderServicesLoading = true;\n    });\n    backend.addExtraServiceErrorListener(function (resp, req) {\n      if (!req || req.code !== 'seat') {\n        vm.modifyServicesError = resp.error;\n      }\n\n      vm.modifyServicesLoading = false;\n      vm.orderServicesLoading = true;\n    });\n  });\n\n  function submitPayment(removeInsuranceAeroexpress) {\n    if (vm.agree && !vm.modifyServicesLoading && !vm.orderServicesLoading) {\n      if (vm.selectedPaymentForm && vm.selectedPaymentType) {\n        submitPaymentConfirm(removeInsuranceAeroexpress);\n      } else {\n        vm.showNeedSelectPaymentFormMesage = true;\n      }\n    }\n  }\n\n  function submitPaymentConfirm(removeInsuranceAeroexpress, email, phone) {\n    vm.confirmLoading = true;\n\n    if (vm.confirmError) {\n      delete vm.confirmError;\n    }\n\n    backend.startPaymentForExtraServices(vm.selectedPaymentForm, vm.selectedPaymentType, removeInsuranceAeroexpress, email, phone, vm.card).then(function (resp) {\n      if (resp.pnr && resp.lastName) {\n        redirect.goToConfirmOrder();\n      } else if (resp.eraseAeroexpressBecauseOfCurrency || resp.eraseInsuranceBecauseOfCurrency) {\n        fancyboxTools.openHandler('popupChangeCurrencyError', false, {\n          eraseAeroexpressBecauseOfCurrency: resp.eraseAeroexpressBecauseOfCurrency,\n          eraseInsuranceBecauseOfCurrency: resp.eraseInsuranceBecauseOfCurrency,\n          mode: 'addServices',\n          submitCallback: submitPayment\n        });\n      } else if (resp.removedSvcs && resp.removedSvcs.length) {\n        fancyboxTools.openHandler('popupRemovedServicesWarning', false, {\n          submitCallback: function submitCallback() {\n            submitPaymentConfirm(removeInsuranceAeroexpress, email, phone);\n          },\n          closeCallback: function closeCallback() {\n            backend.updateOrderServices(true);\n          },\n          removedSvcs: resp.removedSvcs,\n          svcsToIssue: resp.svcsToIssue,\n          noExtraServicesLeft: resp.noExtraServicesLeft,\n          disableOutsideCloseClick: true\n        });\n      }\n\n      vm.confirmLoading = false;\n    }, function (resp) {\n      if (resp.error === 'web.noBookedConfirmedExtraServices') {\n        vm.fatalError = resp.error;\n      } else {\n        vm.confirmError = resp.error;\n      }\n\n      vm.confirmLoading = false;\n    });\n  }\n\n  function paymentFormChangeHandler() {\n    vm.showNeedSelectPaymentFormMesage = false;\n  }\n\n  function reloadPage() {\n    $window.location.reload();\n    return false;\n  }\n\n  function clearSession() {\n    backend.clearSession().then(function () {\n      redirect.goToSearchOrder();\n    });\n  }\n\n  function swithcSubmitButtonHoverState() {\n    vm.submitButtonHover = !vm.submitButtonHover;\n  }\n}]);\n\n},{}],15:[function(require,module,exports){\n\"use strict\";\n\"use strict\";\n\nangular.module('app').controller('SearchOrderScreenController', ['$scope', '$routeParams', 'backend', 'redirect', '$timeout', 'utils', 'fancyboxTools', SearchOrderScreenController]);\n\nfunction SearchOrderScreenController($scope, $routeParams, backend, redirect, $timeout, utils, fancyboxTools) {\n  var vm = this;\n  vm.loading = true;\n  vm.searchOrderLoading = true;\n  vm.orderServicesLoading = true;\n  vm.showSearchForm = true;\n  vm.searchParams = {};\n  vm.partiallyAddedPassengers = [];\n  vm.submitPayment = submitPayment;\n  vm.submitSearch = submitSearch;\n  vm.confirmHandler = confirmHandler;\n  vm.clear = clear;\n  vm.addPassenger = addPassenger;\n  vm.swithcSubmitButtonHoverState = swithcSubmitButtonHoverState;\n  backend.ready.then(function () {\n    angular.element('title').text(backend.getAliasWithPrefix('web.pageTitle.', 'searchOrder'));\n    vm.passengerLastNameRegexp = backend.applicationConstants.passengerLastNameRegexp;\n    vm.pnrOrTicketRegexp = backend.applicationConstants.pnrOrTicketRegexp;\n    vm.ticketRegexp = backend.applicationConstants.ticketRegexp;\n    backend.clearOrderInfoListeners();\n    backend.clearUpdateOrderServicesListeners();\n\n    if ($routeParams.pnrOrTicketNumber && $routeParams.lastName && backend.getParam('site.searchOrdersBy') === 'LAST_NAME_PNR_TICKET') {\n      vm.searchParams.pnrOrTicketNumber = $routeParams.pnrOrTicketNumber;\n      vm.searchParams.lastName = $routeParams.lastName;\n      vm.loading = false;\n      $timeout(submitSearch);\n    } else {\n      updateOrderInfoHandler();\n      initAddServicesListeners();\n    } // add-services logic\n\n\n    backend.addOrderInfoListener(function (orderInfo) {\n      vm.orderInfo = orderInfo;\n    });\n  });\n\n  function submitPayment(removeInsuranceAeroexpress) {\n    if (vm.agree && !vm.modifyServicesLoading && !vm.orderServicesLoading) {\n      if (vm.selectedPaymentForm && vm.selectedPaymentType) {\n        submitPaymentConfirm(removeInsuranceAeroexpress);\n      } else {\n        vm.showNeedSelectPaymentFormMesage = true;\n      }\n    }\n  }\n\n  function submitPaymentConfirm(removeInsuranceAeroexpress, email, phone) {\n    vm.confirmLoading = true;\n\n    if (vm.confirmError) {\n      delete vm.confirmError;\n    }\n\n    backend.startPaymentForExtraServices(vm.selectedPaymentForm, vm.selectedPaymentType, removeInsuranceAeroexpress, email, phone, vm.card).then(function (resp) {\n      if (resp.pnr && resp.lastName) {\n        redirect.goToConfirmOrder();\n      } else if (resp.eraseAeroexpressBecauseOfCurrency || resp.eraseInsuranceBecauseOfCurrency) {\n        fancyboxTools.openHandler('popupChangeCurrencyError', false, {\n          eraseAeroexpressBecauseOfCurrency: resp.eraseAeroexpressBecauseOfCurrency,\n          eraseInsuranceBecauseOfCurrency: resp.eraseInsuranceBecauseOfCurrency,\n          mode: 'addServices',\n          submitCallback: submitPayment\n        });\n      } else if (resp.removedSvcs && resp.removedSvcs.length) {\n        fancyboxTools.openHandler('popupRemovedServicesWarning', false, {\n          submitCallback: function submitCallback() {\n            submitPaymentConfirm(removeInsuranceAeroexpress, email, phone);\n          },\n          closeCallback: function closeCallback() {\n            backend.updateOrderServices(true);\n          },\n          removedSvcs: resp.removedSvcs,\n          svcsToIssue: resp.svcsToIssue,\n          noExtraServicesLeft: resp.noExtraServicesLeft,\n          disableOutsideCloseClick: true\n        });\n      }\n\n      vm.confirmLoading = false;\n    }, function (resp) {\n      if (resp.error === 'web.noBookedConfirmedExtraServices') {\n        vm.fatalError = resp.error;\n      } else {\n        vm.confirmError = resp.error;\n      }\n\n      vm.confirmLoading = false;\n    });\n  }\n\n  function paymentFormChangeHandler() {\n    vm.showNeedSelectPaymentFormMesage = false;\n  }\n\n  function reloadPage() {\n    $window.location.reload();\n    return false;\n  }\n\n  function clearSession() {\n    backend.clearSession().then(function () {\n      redirect.goToSearchOrder();\n    });\n  }\n\n  function clear() {\n    backend.clearSession();\n    backend.clearOrderInfo();\n    vm.orderInfo = false;\n    vm.showSearchForm = true;\n    vm.partiallyAddedPassengers = [];\n  }\n\n  function submitSearch() {\n    vm.submitTouched = true;\n\n    if ((!backend.getParam('site.useSearchOrderAgreeCheckbox') || vm.searchOrderAgree) && vm.searchOrderForm.$valid) {\n      vm.searchLoading = true;\n      vm.errorMessage = false;\n      backend.searchOrderByParams(vm.searchParams, !!vm.partiallyAddedPassengers.length).then(function (resp) {\n        if (vm.searchParams.flight && vm.searchParams.date) {\n          vm.searchParams = {\n            flight: vm.searchParams.flight,\n            date: vm.searchParams.date\n          };\n        } else if (!resp.needToSpecifyDocument) {\n          vm.searchParams = {};\n        }\n\n        vm.needToSpecifyDocument = resp.needToSpecifyDocument;\n        vm.showSearchForm = false;\n        vm.submitTouched = false;\n        initAddServicesListeners();\n\n        if (resp.orderCompletelyInitialized) {\n          vm.partiallyAddedPassengers = []; // call updateOrderInfo with callback\n          // because need to redirect to add-services\n          // only if adding extra services allowed\n\n          updateOrderInfoHandler();\n        } else {\n          if (resp.partiallyAddedPassengers) {\n            vm.partiallyAddedPassengers = resp.partiallyAddedPassengers;\n          }\n\n          if (vm.needToSpecifyDocument) {\n            vm.showSearchForm = true;\n          }\n        }\n\n        vm.searchLoading = false;\n      }, errorHandler);\n    }\n  }\n\n  function initAddServicesListeners() {\n    backend.addUpdateOrderServicesListener(function (resp) {\n      vm.orderInfo = resp[1];\n      vm.priceVariant = resp[2];\n      vm.isFreePricevariant = utils.isFreePricevariant(resp[2]);\n\n      if (vm.isFreePricevariant) {\n        vm.showNeedSelectPaymentFormMesage = false;\n      }\n\n      vm.es = utils.reformatAvailableExtraServices(resp[0], vm.orderInfo, vm.es);\n      vm.esList = utils.getAvailableExtraServicesList(resp[0], vm.es);\n      vm.searchOrderLoading = false;\n      vm.orderServicesLoading = false;\n\n      if (backend.getParam('ffp.enable') && (vm.orderInfo.hasBonusCard || vm.orderInfo.ffpSumm)) {\n        backend.ffpBonus().then(function (resp) {\n          vm.ffpBonus = resp.total || 0;\n        });\n      }\n    }, function (resp) {\n      vm.searchOrderLoading = false;\n      vm.orderServicesLoading = false;\n      vm.errorMessage = resp.error;\n    });\n    backend.updateOrderServices(true).then(function () {\n      vm.loading = true;\n      backend.switchDefaultSelectedServices(vm.esList, vm.es, vm.orderInfo).then(function () {\n        vm.loading = false;\n      }, function (resp) {\n        vm.errorMessage = resp.error;\n        vm.loading = false;\n      });\n    });\n    backend.addExtraServiceListener(function (state) {\n      vm.modifyServicesLoading = !state;\n      vm.orderServicesLoading = true;\n    });\n    backend.addExtraServiceErrorListener(function (resp, req) {\n      if (!req || req.code !== 'seat') {\n        vm.modifyServicesError = resp.error;\n      }\n\n      vm.modifyServicesLoading = false;\n      vm.orderServicesLoading = true;\n    });\n  }\n\n  function updateOrderInfoHandler(cb) {\n    backend.updateOrderInfo().then(function (orderInfo) {\n      if (orderInfo.passengers) {\n        vm.orderInfo = orderInfo;\n        vm.showSearchForm = false;\n\n        if (typeof cb === 'function') {\n          cb();\n        }\n      }\n\n      vm.loading = false;\n    }, errorHandler);\n  }\n\n  function errorHandler(resp) {\n    vm.loading = false;\n    vm.searchLoading = false;\n\n    if (resp.error !== 'web.messages.emptyOrder') {\n      vm.errorMessage = resp.error;\n    }\n  }\n\n  function confirmHandler() {\n    backend.finishSeparatePassengersSearch().then(updateOrderInfoHandler, errorHandler);\n  }\n\n  function addPassenger() {\n    vm.showSearchForm = true;\n  }\n\n  function swithcSubmitButtonHoverState() {\n    vm.submitButtonHover = !vm.submitButtonHover;\n  }\n}\n\n},{}]},{},[13]);\n"]}